var shadow$provide = {};
(function(){
shadow$provide[0]=function(Hf,If,ef,Jf){function Ra(a){return a*Math.PI/180}function Ab(a){return 180*a/Math.PI}function db(a,d,k){return d>k?db(a,k,d):Math.min(Math.max(a,d),k)}function eb(a,d,k){if("number"==typeof a&&"number"==typeof d)return a+(d-a)*k;if(a instanceof z&&d instanceof z||a instanceof Z&&d instanceof Z)return a.lerp(d,k);throw Error(`Bad value for lerp(): ${a}, ${d}. Only number, Vec2 and Color is supported.`);}function ib(a,d,k,n,r){return n+(a-d)/(k-d)*(r-n)}function hd(a,d,k,
n,r){return db(ib(a,d,k,n,r),n,r)}function B(...a){if(1===a.length){if(a[0]instanceof z)return new z(a[0].x,a[0].y);if(Array.isArray(a[0])&&2===a[0].length)return new z(...a[0])}return new z(...a)}function Y(...a){if(0===a.length)return new Z(255,255,255);if(1===a.length){if(a[0]instanceof Z)return a[0].clone();if("string"==typeof a[0])return Z.fromHex(a[0]);if(Array.isArray(a[0])&&3===a[0].length)return Z.fromArray(a[0])}return new Z(...a)}function ea(a,d,k,n){return new oa(a,d,k,n)}function Ec(a,
d,k,n=r=>-Math.cos(r)){return a+(n(k)+1)/2*(d-a)}function id(a){return null!=a&&(Fc.seed=a),Fc.seed}function Pb(...a){return Fc.genAny(...a)}function Gc(...a){return Math.floor(Pb(...a))}function jd(a){return Pb()<=a}function kd(a){return a[Gc(a.length)]}function ld(a,d){return a.pos.x+a.width>d.pos.x&&a.pos.x<d.pos.x+d.width&&a.pos.y+a.height>d.pos.y&&a.pos.y<d.pos.y+d.height}function md(a,d){if(a.p1.x===a.p2.x&&a.p1.y===a.p2.y||d.p1.x===d.p2.x&&d.p1.y===d.p2.y)return null;let k=(d.p2.y-d.p1.y)*
(a.p2.x-a.p1.x)-(d.p2.x-d.p1.x)*(a.p2.y-a.p1.y);if(0===k)return null;let n=((d.p2.x-d.p1.x)*(a.p1.y-d.p1.y)-(d.p2.y-d.p1.y)*(a.p1.x-d.p1.x))/k;a=((a.p2.x-a.p1.x)*(a.p1.y-d.p1.y)-(a.p2.y-a.p1.y)*(a.p1.x-d.p1.x))/k;return 0>n||1<n||0>a||1<a?null:n}function Bb(a,d){return(d=md(a,d))?B(a.p1.x+d*(a.p2.x-a.p1.x),a.p1.y+d*(a.p2.y-a.p1.y)):null}function nd(a,d){if(Qb(a,d.p1)||Qb(a,d.p2))return!0;a=a.points();return!!Bb(d,new Cb(a[0],a[1]))||!!Bb(d,new Cb(a[1],a[2]))||!!Bb(d,new Cb(a[2],a[3]))||!!Bb(d,new Cb(a[3],
a[0]))}function Qb(a,d){return d.x>a.pos.x&&d.x<a.pos.x+a.width&&d.y>a.pos.y&&d.y<a.pos.y+a.height}function od(a,d){d=d.sub(a.p1);a=a.p2.sub(a.p1);if(Math.abs(d.cross(a))>Number.EPSILON)return!1;a=d.dot(a)/a.dot(a);return 0<=a&&1>=a}function Hc(a,d){var k=a.p2.sub(a.p1),n=k.dot(k),r=a.p1.sub(d.center);k=2*k.dot(r);r=r.dot(r)-d.radius*d.radius;let J=k*k-4*n*r;if(n<=Number.EPSILON||0>J)return!1;if(0==J){if(n=-k/(2*n),0<=n&&1>=n)return!0}else if(r=(-k+Math.sqrt(J))/(2*n),n=(-k-Math.sqrt(J))/(2*n),0<=
r&&1>=r||0<=n&&1>=n)return!0;return Ic(d,a.p1)}function Ic(a,d){return a.center.sdist(d)<a.radius*a.radius}function pd(a,d){let k=d.pts[d.pts.length-1];for(let n of d.pts){if(Hc(new Cb(k,n),a))return!0;k=n}return Ic(a,d.pts[0])?!0:Jc(d,a.center)}function Jc(a,d){let k=!1;a=a.pts;for(let n=0,r=a.length-1;n<a.length;r=n++)a[n].y>d.y!=a[r].y>d.y&&d.x<(a[r].x-a[n].x)*(d.y-a[n].y)/(a[r].y-a[n].y)+a[n].x&&(k=!k);return k}function qd(a,d){var k=Number.MAX_VALUE;let n=B(0);for(let V of[a,d])for(let ha=0;ha<
V.pts.length;ha++){let pa=V.pts[(ha+1)%V.pts.length].sub(V.pts[ha]).normal().unit(),ia=Number.MAX_VALUE;var r=-Number.MAX_VALUE;for(var J=0;J<a.pts.length;J++){var M=a.pts[J].dot(pa);ia=Math.min(ia,M);r=Math.max(r,M)}J=Number.MAX_VALUE;M=-Number.MAX_VALUE;for(var R=0;R<d.pts.length;R++){let Ea=d.pts[R].dot(pa);J=Math.min(J,Ea);M=Math.max(M,Ea)}R=Math.min(r,M)-Math.max(ia,J);if(0>R)return null;R<Math.abs(k)&&(k=M-ia,r=J-r,k=Math.abs(k)<Math.abs(r)?k:r,n=pa.scale(k))}return n}function qc(a,d){if(a===
d)return!0;var k=typeof a,n=typeof d;if(k!==n)return!1;if("object"===k&&"object"===n&&null!==a&&null!==d){if(Array.isArray(a)!==Array.isArray(d))return!1;k=Object.keys(a);n=Object.keys(d);if(k.length!==n.length)return!1;for(let r of k)if(!qc(a[r],d[r]))return!1;return!0}return!1}function rd(a){a=window.atob(a);let d=a.length,k=new Uint8Array(d);for(let n=0;n<d;n++)k[n]=a.charCodeAt(n);return k.buffer}function sd(a){return rd(a.split(",")[1])}function rc(a,d){let k=document.createElement("a");k.href=
d;k.download=a;k.click()}function Kc(a,d){rc(a,"data:text/plain;charset\x3dutf-8,"+d)}function td(a,d){Kc(a,JSON.stringify(d))}function Lc(a,d){d=URL.createObjectURL(d);rc(a,d);URL.revokeObjectURL(d)}function Aa(a,d){return(...k)=>{let n=k.length;if(n===a.length)return a(...k);if(n===d.length)return d(...k)}}function ud(a){if("string"!=typeof a)throw new TypeError("string cannot be undefined or null");let d=[],k=0,n=0;for(;k<a.length;)(n+=vd(k+n,a),wd(a[k+n])&&n++,xd(a[k+n])&&n++,yd(a[k+n])&&n++,
zd(a[k+n]))?n++:(d.push(a.substring(k,k+n)),k+=n,n=0);return d}function vd(a,d){var k=d[a];if(!Ad(k)||a===d.length-1)return 1;k+=d[a+1];let n=d.substring(a+2,a+5);return Mc(k)&&Mc(n)?4:Bd(k)&&Cd(n)?d.slice(a).indexOf(String.fromCodePoint(917631))+2:Dd(n)?4:2}function Ad(a){return a&&jb(a[0].charCodeAt(0),55296,56319)}function Mc(a){return jb(sc(a),127462,127487)}function Bd(a){return jb(sc(a),127988,127988)}function Dd(a){return jb(sc(a),127995,127999)}function xd(a){return"string"==typeof a&&jb(a.charCodeAt(0),
65024,65039)}function yd(a){return"string"==typeof a&&jb(a.charCodeAt(0),8400,8447)}function Cd(a){let d=a.codePointAt(0);return"string"==typeof a&&"number"==typeof d&&jb(d,917504,917631)}function wd(a){return"string"==typeof a&&ff.includes(a.charCodeAt(0))}function zd(a){return"string"==typeof a&&8205===a.charCodeAt(0)}function sc(a){let d=a.charCodeAt(0)-55296;a=a.charCodeAt(1)-56320;return(d<<10)+a+65536}function jb(a,d,k){return a>=d&&a<=k}function kb(a){let d=[],k=h(J=>{d.push(J);a(J)},"push"),
n=h(()=>{d.pop();a(r()??null)},"pop"),r=h(()=>d[d.length-1],"cur");return[k,n,r]}function Ed(a,d={}){function k(W){J.push(W)}function n(){J.forEach(W=>W());a.getExtension("WEBGL_lose_context").loseContext()}function r(W){if(!qc(W,M)){M=W;var Sa=W.reduce((Fa,ya)=>Fa+ya.size,0);W.reduce((Fa,ya,lb)=>(a.vertexAttribPointer(lb,ya.size,a.FLOAT,!1,4*Sa,Fa),a.enableVertexAttribArray(lb),Fa+4*ya.size),0)}}let J=[];h(k,"onDestroy");h(n,"destroy");let M=null;h(r,"setVertexFormat");let [R,V]=kb(W=>a.bindTexture(a.TEXTURE_2D,
W)),[ha,pa]=kb(W=>a.bindBuffer(a.ARRAY_BUFFER,W)),[ia,Ea]=kb(W=>a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,W)),[Ta,Ma]=kb(W=>a.bindFramebuffer(a.FRAMEBUFFER,W)),[Ua,Va]=kb(W=>a.bindRenderbuffer(a.RENDERBUFFER,W)),[Na,Ga]=kb(({x:W,y:Sa,w:Fa,h:ya})=>{a.viewport(W,Sa,Fa,ya)}),[Ha,mb]=kb(W=>a.useProgram(W));return Na({x:0,y:0,w:a.drawingBufferWidth,h:a.drawingBufferHeight}),{gl:a,opts:d,onDestroy:k,destroy:n,pushTexture2D:R,popTexture2D:V,pushArrayBuffer:ha,popArrayBuffer:pa,pushElementArrayBuffer:ia,popElementArrayBuffer:Ea,
pushFramebuffer:Ta,popFramebuffer:Ma,pushRenderbuffer:Ua,popRenderbuffer:Va,pushViewport:Na,popViewport:Ga,pushProgram:Ha,popProgram:mb,setVertexFormat:r}}function tc(a){return fetch(a).then(d=>{if(!d.ok)throw Error(`Failed to fetch "${a}"`);return d})}function Rb(a){return tc(a).then(d=>d.json())}function Fd(a){return tc(a).then(d=>d.text())}function Gd(a){return tc(a).then(d=>d.arrayBuffer())}function Sb(a){let d=new Image;return d.crossOrigin="anonymous",d.src=a,new Promise((k,n)=>{d.onload=()=>
k(d);d.onerror=()=>n(Error(`Failed to load image from "${a}"`))})}function qb(a){switch(a){case "topleft":return new z(-1,-1);case "top":return new z(0,-1);case "topright":return new z(1,-1);case "left":return new z(-1,0);case "center":return new z(0,0);case "right":return new z(1,0);case "botleft":return new z(-1,1);case "bot":return new z(0,1);case "botright":return new z(1,1);default:return a}}function Hd(a){switch(a){case "left":return 0;case "center":return.5;case "right":return 1;default:return 0}}
function Id(a){return a.createBuffer(1,1,44100)}var uc=Object.defineProperty,gf=Object.getOwnPropertyDescriptor,hf=Object.getOwnPropertyNames,jf=Object.prototype.hasOwnProperty,h=(a,d)=>uc(a,"name",{value:d,configurable:!0}),kf=(a,d,k,n)=>{if(d&&"object"==typeof d||"function"==typeof d)for(let r of hf(d))!jf.call(a,r)&&r!==k&&uc(a,r,{get:()=>d[r],enumerable:!(n=gf(d,r))||n.enumerable});return a},lf=(()=>{for(var a=new Uint8Array(128),d=0;64>d;d++)a[26>d?d+65:52>d?d+71:62>d?d-4:4*d-205]=d;return k=>
{for(var n=k.length,r=new Uint8Array(3*(n-("\x3d"==k[n-1])-("\x3d"==k[n-2]))/4|0),J=0,M=0;J<n;){var R=a[k.charCodeAt(J++)],V=a[k.charCodeAt(J++)],ha=a[k.charCodeAt(J++)],pa=a[k.charCodeAt(J++)];r[M++]=R<<2|V>>4;r[M++]=V<<4|ha>>2;r[M++]=ha<<6|pa}return r}})(),Jd={};((a,d)=>{for(var k in d)uc(a,k,{get:d[k],enumerable:!0})})(Jd,{default:()=>mf});ef.exports=(a=>kf(uc({},"__esModule",{value:!0}),a))(Jd);h(Ra,"deg2rad");h(Ab,"rad2deg");h(db,"clamp");h(eb,"lerp");h(ib,"map");h(hd,"mapc");const ca=class{static $jscomp$static$block$m600241313$0(){h(this,
"Vec2")}constructor(a=0,d=a){this.y=this.x=0;this.x=a;this.y=d}static fromAngle(a){a=Ra(a);return new ca(Math.cos(a),Math.sin(a))}static $jscomp$static$init$m600241313$1$LEFT(){return new ca(-1,0)}static $jscomp$static$init$m600241313$2$RIGHT(){return new ca(1,0)}static $jscomp$static$init$m600241313$3$UP(){return new ca(0,-1)}static $jscomp$static$init$m600241313$4$DOWN(){return new ca(0,1)}clone(){return new ca(this.x,this.y)}add(...a){a=B(...a);return new ca(this.x+a.x,this.y+a.y)}sub(...a){a=
B(...a);return new ca(this.x-a.x,this.y-a.y)}scale(...a){a=B(...a);return new ca(this.x*a.x,this.y*a.y)}dist(...a){a=B(...a);return this.sub(a).len()}sdist(...a){a=B(...a);return this.sub(a).slen()}len(){return Math.sqrt(this.dot(this))}slen(){return this.dot(this)}unit(){let a=this.len();return 0===a?new ca(0):this.scale(1/a)}normal(){return new ca(this.y,-this.x)}reflect(a){return this.sub(a.scale(2*this.dot(a)))}project(a){return a.scale(a.dot(this)/a.len())}reject(a){return this.sub(this.project(a))}dot(a){return this.x*
a.x+this.y*a.y}cross(a){return this.x*a.y-this.y*a.x}angle(...a){a=B(...a);return Ab(Math.atan2(this.y-a.y,this.x-a.x))}angleBetween(...a){a=B(...a);return Ab(Math.atan2(this.cross(a),this.dot(a)))}lerp(a,d){return new ca(eb(this.x,a.x,d),eb(this.y,a.y,d))}slerp(a,d){var k=this.dot(a);let n=this.cross(a);k=Math.atan2(n,k);return this.scale(Math.sin((1-d)*k)).add(a.scale(Math.sin(d*k))).scale(1/n)}isZero(){return 0===this.x&&0===this.y}toFixed(a){return new ca(Number(this.x.toFixed(a)),Number(this.y.toFixed(a)))}transform(a){return a.multVec2(this)}eq(a){return this.x===
a.x&&this.y===a.y}bbox(){return new va(this,0,0)}toString(){return`vec2(${this.x.toFixed(2)}, ${this.y.toFixed(2)})`}};ca.$jscomp$static$block$m600241313$0();ca.LEFT=ca.$jscomp$static$init$m600241313$1$LEFT();ca.RIGHT=ca.$jscomp$static$init$m600241313$2$RIGHT();ca.UP=ca.$jscomp$static$init$m600241313$3$UP();ca.DOWN=ca.$jscomp$static$init$m600241313$4$DOWN();var z=ca;h(B,"vec2");const Q=class{static $jscomp$static$block$m600241313$5(){h(this,"Color")}constructor(a,d,k){this.b=this.g=this.r=255;this.r=
db(a,0,255);this.g=db(d,0,255);this.b=db(k,0,255)}static fromArray(a){return new Q(a[0],a[1],a[2])}static fromHex(a){if("number"==typeof a)return new Q(a>>16&255,a>>8&255,a>>0&255);if("string"==typeof a)return a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a),new Q(parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16));throw Error("Invalid hex color format");}static fromHSL(a,d,k){if(0==d)return new Q(255*k,255*k,255*k);let n=h((M,R,V)=>(0>V&&(V+=1),1<V&&--V,V<1/6?M+6*(R-M)*V:.5>V?R:V<2/3?M+(R-
M)*(2/3-V)*6:M),"hue2rgb");d=.5>k?k*(1+d):k+d-k*d;let r=2*k-d;k=n(r,d,a+1/3);let J=n(r,d,a);a=n(r,d,a-1/3);return new Q(Math.round(255*k),Math.round(255*J),Math.round(255*a))}static $jscomp$static$init$m600241313$6$RED(){return new Q(255,0,0)}static $jscomp$static$init$m600241313$7$GREEN(){return new Q(0,255,0)}static $jscomp$static$init$m600241313$8$BLUE(){return new Q(0,0,255)}static $jscomp$static$init$m600241313$9$YELLOW(){return new Q(255,255,0)}static $jscomp$static$init$m600241313$10$MAGENTA(){return new Q(255,
0,255)}static $jscomp$static$init$m600241313$11$CYAN(){return new Q(0,255,255)}static $jscomp$static$init$m600241313$12$WHITE(){return new Q(255,255,255)}static $jscomp$static$init$m600241313$13$BLACK(){return new Q(0,0,0)}clone(){return new Q(this.r,this.g,this.b)}lighten(a){return new Q(this.r+a,this.g+a,this.b+a)}darken(a){return this.lighten(-a)}invert(){return new Q(255-this.r,255-this.g,255-this.b)}mult(a){return new Q(this.r*a.r/255,this.g*a.g/255,this.b*a.b/255)}lerp(a,d){return new Q(eb(this.r,
a.r,d),eb(this.g,a.g,d),eb(this.b,a.b,d))}toHSL(){let a=this.r/255,d=this.g/255,k=this.b/255,n=Math.max(a,d,k);var r=Math.min(a,d,k);let J=(n+r)/2,M=J;if(n==r)J=r=0;else{let R=n-r;switch(r=.5<M?R/(2-n-r):R/(n+r),n){case a:J=(d-k)/R+(d<k?6:0);break;case d:J=(k-a)/R+2;break;case k:J=(a-d)/R+4}J/=6}return[J,r,M]}eq(a){return this.r===a.r&&this.g===a.g&&this.b===a.b}toString(){return`rgb(${this.r}, ${this.g}, ${this.b})`}toHex(){return"#"+(16777216+(this.r<<16)+(this.g<<8)+this.b).toString(16).slice(1)}};
Q.$jscomp$static$block$m600241313$5();Q.RED=Q.$jscomp$static$init$m600241313$6$RED();Q.GREEN=Q.$jscomp$static$init$m600241313$7$GREEN();Q.BLUE=Q.$jscomp$static$init$m600241313$8$BLUE();Q.YELLOW=Q.$jscomp$static$init$m600241313$9$YELLOW();Q.MAGENTA=Q.$jscomp$static$init$m600241313$10$MAGENTA();Q.CYAN=Q.$jscomp$static$init$m600241313$11$CYAN();Q.WHITE=Q.$jscomp$static$init$m600241313$12$WHITE();Q.BLACK=Q.$jscomp$static$init$m600241313$13$BLACK();var Z=Q;h(Y,"rgb");var nf=h((a,d,k)=>Z.fromHSL(a,d,k),
"hsl2rgb"),oa=(()=>{const a=class{static $jscomp$static$block$m600241313$14(){h(this,"Quad")}constructor(d,k,n,r){this.y=this.x=0;this.h=this.w=1;this.x=d;this.y=k;this.w=n;this.h=r}scale(d){return new a(this.x+this.w*d.x,this.y+this.h*d.y,this.w*d.w,this.h*d.h)}pos(){return new z(this.x,this.y)}clone(){return new a(this.x,this.y,this.w,this.h)}eq(d){return this.x===d.x&&this.y===d.y&&this.w===d.w&&this.h===d.h}toString(){return`quad(${this.x}, ${this.y}, ${this.w}, ${this.h})`}};a.$jscomp$static$block$m600241313$14();
return a})();h(ea,"quad");const Wa=class{static $jscomp$static$block$m600241313$15(){h(this,"Mat4")}constructor(a){this.m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a&&(this.m=a)}static translate(a){return new Wa([1,0,0,0,0,1,0,0,0,0,1,0,a.x,a.y,0,1])}static scale(a){return new Wa([a.x,0,0,0,0,a.y,0,0,0,0,1,0,0,0,0,1])}static rotateX(a){a=Ra(-a);let d=Math.cos(a);a=Math.sin(a);return new Wa([1,0,0,0,0,d,-a,0,0,a,d,0,0,0,0,1])}static rotateY(a){a=Ra(-a);let d=Math.cos(a);a=Math.sin(a);return new Wa([d,0,a,
0,0,1,0,0,-a,0,d,0,0,0,0,1])}static rotateZ(a){a=Ra(-a);let d=Math.cos(a);a=Math.sin(a);return new Wa([d,-a,0,0,a,d,0,0,0,0,1,0,0,0,0,1])}translate(a){return this.m[12]+=this.m[0]*a.x+this.m[4]*a.y,this.m[13]+=this.m[1]*a.x+this.m[5]*a.y,this.m[14]+=this.m[2]*a.x+this.m[6]*a.y,this.m[15]+=this.m[3]*a.x+this.m[7]*a.y,this}scale(a){return this.m[0]*=a.x,this.m[4]*=a.y,this.m[1]*=a.x,this.m[5]*=a.y,this.m[2]*=a.x,this.m[6]*=a.y,this.m[3]*=a.x,this.m[7]*=a.y,this}rotate(a){a=Ra(-a);let d=Math.cos(a);
a=Math.sin(a);let k=this.m[0],n=this.m[1],r=this.m[4],J=this.m[5];return this.m[0]=k*d+n*a,this.m[1]=-k*a+n*d,this.m[4]=r*d+J*a,this.m[5]=-r*a+J*d,this}mult(a){let d=[];for(let k=0;4>k;k++)for(let n=0;4>n;n++)d[4*k+n]=this.m[0+n]*a.m[4*k]+this.m[4+n]*a.m[4*k+1]+this.m[8+n]*a.m[4*k+2]+this.m[12+n]*a.m[4*k+3];return new Wa(d)}multVec2(a){return new z(a.x*this.m[0]+a.y*this.m[4]+this.m[12],a.x*this.m[1]+a.y*this.m[5]+this.m[13])}getTranslation(){return new z(this.m[12],this.m[13])}getScale(){if(0!=this.m[0]||
0!=this.m[1]){var a=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]);return new z(a,(this.m[0]*this.m[5]-this.m[1]*this.m[4])/a)}return 0!=this.m[4]||0!=this.m[5]?(a=Math.sqrt(this.m[4]*this.m[4]+this.m[5]*this.m[5]),new z((this.m[0]*this.m[5]-this.m[1]*this.m[4])/a,a)):new z(0,0)}getRotation(){if(0!=this.m[0]||0!=this.m[1]){var a=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]);return Ab(0<this.m[1]?Math.acos(this.m[0]/a):-Math.acos(this.m[0]/a))}return 0!=this.m[4]||0!=this.m[5]?(a=Math.sqrt(this.m[4]*
this.m[4]+this.m[5]*this.m[5]),Ab(Math.PI/2-(0<this.m[5]?Math.acos(-this.m[4]/a):-Math.acos(this.m[4]/a)))):0}getSkew(){if(0!=this.m[0]||0!=this.m[1]){var a=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]);return new z(Math.atan(this.m[0]*this.m[4]+this.m[1]*this.m[5])/(a*a),0)}return 0!=this.m[4]||0!=this.m[5]?(a=Math.sqrt(this.m[4]*this.m[4]+this.m[5]*this.m[5]),new z(0,Math.atan(this.m[0]*this.m[4]+this.m[1]*this.m[5])/(a*a))):new z(0,0)}invert(){let a=[];var d=this.m[10]*this.m[15]-this.m[14]*
this.m[11],k=this.m[9]*this.m[15]-this.m[13]*this.m[11],n=this.m[9]*this.m[14]-this.m[13]*this.m[10];let r=this.m[8]*this.m[15]-this.m[12]*this.m[11],J=this.m[8]*this.m[14]-this.m[12]*this.m[10],M=this.m[8]*this.m[13]-this.m[12]*this.m[9],R=this.m[6]*this.m[15]-this.m[14]*this.m[7],V=this.m[5]*this.m[15]-this.m[13]*this.m[7],ha=this.m[5]*this.m[14]-this.m[13]*this.m[6],pa=this.m[4]*this.m[15]-this.m[12]*this.m[7],ia=this.m[4]*this.m[14]-this.m[12]*this.m[6],Ea=this.m[5]*this.m[15]-this.m[13]*this.m[7],
Ta=this.m[4]*this.m[13]-this.m[12]*this.m[5],Ma=this.m[6]*this.m[11]-this.m[10]*this.m[7],Ua=this.m[5]*this.m[11]-this.m[9]*this.m[7],Va=this.m[5]*this.m[10]-this.m[9]*this.m[6],Na=this.m[4]*this.m[11]-this.m[8]*this.m[7],Ga=this.m[4]*this.m[10]-this.m[8]*this.m[6],Ha=this.m[4]*this.m[9]-this.m[8]*this.m[5];a[0]=this.m[5]*d-this.m[6]*k+this.m[7]*n;a[4]=-(this.m[4]*d-this.m[6]*r+this.m[7]*J);a[8]=this.m[4]*k-this.m[5]*r+this.m[7]*M;a[12]=-(this.m[4]*n-this.m[5]*J+this.m[6]*M);a[1]=-(this.m[1]*d-this.m[2]*
k+this.m[3]*n);a[5]=this.m[0]*d-this.m[2]*r+this.m[3]*J;a[9]=-(this.m[0]*k-this.m[1]*r+this.m[3]*M);a[13]=this.m[0]*n-this.m[1]*J+this.m[2]*M;a[2]=this.m[1]*R-this.m[2]*V+this.m[3]*ha;a[6]=-(this.m[0]*R-this.m[2]*pa+this.m[3]*ia);a[10]=this.m[0]*Ea-this.m[1]*pa+this.m[3]*Ta;a[14]=-(this.m[0]*ha-this.m[1]*ia+this.m[2]*Ta);a[3]=-(this.m[1]*Ma-this.m[2]*Ua+this.m[3]*Va);a[7]=this.m[0]*Ma-this.m[2]*Na+this.m[3]*Ga;a[11]=-(this.m[0]*Ua-this.m[1]*Na+this.m[3]*Ha);a[15]=this.m[0]*Va-this.m[1]*Ga+this.m[2]*
Ha;d=this.m[0]*a[0]+this.m[1]*a[4]+this.m[2]*a[8]+this.m[3]*a[12];for(k=0;4>k;k++)for(n=0;4>n;n++)a[4*k+n]*=1/d;return new Wa(a)}clone(){return new Wa([...this.m])}toString(){return this.m.toString()}};Wa.$jscomp$static$block$m600241313$15();var Xa=Wa;h(Ec,"wave");var Nc=class{static $jscomp$static$block$m600241313$16(){h(this,"RNG")}constructor(a){this.seed=a}gen(){return this.seed=(1103515245*this.seed+12345)%2147483648,this.seed/2147483648}genNumber(a,d){return a+this.gen()*(d-a)}genVec2(a,d){return new z(this.genNumber(a.x,
d.x),this.genNumber(a.y,d.y))}genColor(a,d){return new Z(this.genNumber(a.r,d.r),this.genNumber(a.g,d.g),this.genNumber(a.b,d.b))}genAny(...a){if(0===a.length)return this.gen();if(1===a.length){if("number"==typeof a[0])return this.genNumber(0,a[0]);if(a[0]instanceof z)return this.genVec2(B(0,0),a[0]);if(a[0]instanceof Z)return this.genColor(Y(0,0,0),a[0])}else if(2===a.length){if("number"==typeof a[0]&&"number"==typeof a[1])return this.genNumber(a[0],a[1]);if(a[0]instanceof z&&a[1]instanceof z)return this.genVec2(a[0],
a[1]);if(a[0]instanceof Z&&a[1]instanceof Z)return this.genColor(a[0],a[1])}}},Fc=new Nc(Date.now());Nc.$jscomp$static$block$m600241313$16();h(id,"randSeed");h(Pb,"rand");h(Gc,"randi");h(jd,"chance");h(kd,"choose");h(ld,"testRectRect");h(md,"testLineLineT");h(Bb,"testLineLine");h(nd,"testRectLine");h(Qb,"testRectPoint");h(od,"testLinePoint");h(Hc,"testLineCircle");h(Ic,"testCirclePoint");h(pd,"testCirclePolygon");h(Jc,"testPolygonPoint");const vc=class{static $jscomp$static$block$m600241313$17(){h(this,
"Line")}constructor(a,d){this.p1=a.clone();this.p2=d.clone()}transform(a){return new vc(a.multVec2(this.p1),a.multVec2(this.p2))}bbox(){return va.fromPoints(this.p1,this.p2)}area(){return this.p1.dist(this.p2)}clone(){return new vc(this.p1,this.p2)}};vc.$jscomp$static$block$m600241313$17();var Cb=vc,va=(()=>{const a=class{static $jscomp$static$block$m600241313$18(){h(this,"Rect")}constructor(d,k,n){this.pos=d.clone();this.width=k;this.height=n}static fromPoints(d,k){return new a(d.clone(),k.x-d.x,
k.y-d.y)}center(){return new z(this.pos.x+this.width/2,this.pos.y+this.height/2)}points(){return[this.pos,this.pos.add(this.width,0),this.pos.add(this.width,this.height),this.pos.add(0,this.height)]}transform(d){return new Tb(this.points().map(k=>d.multVec2(k)))}bbox(){return this.clone()}area(){return this.width*this.height}clone(){return new a(this.pos.clone(),this.width,this.height)}distToPoint(d){return Math.sqrt(this.sdistToPoint(d))}sdistToPoint(d){let k=this.pos,n=this.pos.add(this.width,this.height),
r=Math.max(k.x-d.x,0,d.x-n.x);d=Math.max(k.y-d.y,0,d.y-n.y);return r*r+d*d}};a.$jscomp$static$block$m600241313$18();return a})(),Kd=(()=>{const a=class{static $jscomp$static$block$m600241313$19(){h(this,"Circle")}constructor(d,k){this.center=d.clone();this.radius=k}transform(d){return(new of(this.center,this.radius,this.radius)).transform(d)}bbox(){return va.fromPoints(this.center.sub(B(this.radius)),this.center.add(B(this.radius)))}area(){return this.radius*this.radius*Math.PI}clone(){return new a(this.center,
this.radius)}};a.$jscomp$static$block$m600241313$19();return a})(),of=(()=>{const a=class{static $jscomp$static$block$m600241313$20(){h(this,"Ellipse")}constructor(d,k,n){this.center=d.clone();this.radiusX=k;this.radiusY=n}transform(d){return new a(d.multVec2(this.center),d.m[0]*this.radiusX,d.m[5]*this.radiusY)}bbox(){return va.fromPoints(this.center.sub(B(this.radiusX,this.radiusY)),this.center.add(B(this.radiusX,this.radiusY)))}area(){return this.radiusX*this.radiusY*Math.PI}clone(){return new a(this.center,
this.radiusX,this.radiusY)}};a.$jscomp$static$block$m600241313$20();return a})(),Tb=(()=>{const a=class{static $jscomp$static$block$m600241313$21(){h(this,"Polygon")}constructor(d){if(3>d.length)throw Error("Polygons should have at least 3 vertices");this.pts=d}transform(d){return new a(this.pts.map(k=>d.multVec2(k)))}bbox(){let d=B(Number.MAX_VALUE),k=B(-Number.MAX_VALUE);for(let n of this.pts)d.x=Math.min(d.x,n.x),k.x=Math.max(k.x,n.x),d.y=Math.min(d.y,n.y),k.y=Math.max(k.y,n.y);return va.fromPoints(d,
k)}area(){let d=0,k=this.pts.length;for(let n=0;n<k;n++){let r=this.pts[n],J=this.pts[(n+1)%k];d+=r.x*J.y*.5;d-=J.x*r.y*.5}return Math.abs(d)}clone(){return new a(this.pts.map(d=>d.clone()))}};a.$jscomp$static$block$m600241313$21();return a})();h(qd,"sat");var Oc=class extends Map{static $jscomp$static$block$m600241313$22(){h(this,"Registry")}constructor(...a){super(...a);this.lastID=0}push(a){let d=this.lastID;return this.set(d,a),this.lastID++,d}pushd(a){let d=this.push(a);return()=>this.delete(d)}},
Db=(()=>{const a=class{static $jscomp$static$block$m600241313$23(){h(this,"EventController")}constructor(d){this.paused=!1;this.cancel=d}static join(d){let k=new a(()=>d.forEach(n=>n.cancel()));return Object.defineProperty(k,"paused",{get:()=>d[0].paused,set:n=>d.forEach(r=>r.paused=n)}),k.paused=!1,k}};a.$jscomp$static$block$m600241313$23();return a})(),Ia=class{constructor(){this.handlers=new Oc}static $jscomp$static$block$m600241313$24(){h(this,"Event")}add(a){let d=this.handlers.pushd((...n)=>
{k.paused||a(...n)}),k=new Db(d);return k}addOnce(a){let d=this.add((...k)=>{d.cancel();a(...k)});return d}next(){return new Promise(a=>this.addOnce(a))}trigger(...a){this.handlers.forEach(d=>d(...a))}numListeners(){return this.handlers.size}clear(){this.handlers.clear()}},Eb=class{constructor(){this.handlers={}}static $jscomp$static$block$m600241313$25(){h(this,"EventHandler")}on(a,d){return this.handlers[a]||(this.handlers[a]=new Ia),this.handlers[a].add(d)}onOnce(a,d){let k=this.on(a,(...n)=>{k.cancel();
d(...n)});return k}next(a){return new Promise(d=>{this.onOnce(a,(...k)=>d(k[0]))})}trigger(a,...d){this.handlers[a]&&this.handlers[a].trigger(...d)}remove(a){delete this.handlers[a]}clear(){this.handlers={}}numListeners(a){return this.handlers[a]?.numListeners()??0}};Eb.$jscomp$static$block$m600241313$25();Ia.$jscomp$static$block$m600241313$24();Oc.$jscomp$static$block$m600241313$22();h(qc,"deepEq");h(rd,"base64ToArrayBuffer");h(sd,"dataURLToArrayBuffer");h(rc,"download");h(Kc,"downloadText");h(td,
"downloadJSON");h(Lc,"downloadBlob");var Ld=h(a=>a.match(/^data:\w+\/\w+;base64,.+/),"isDataURL"),pf=h(a=>a.split(".").slice(0,-1).join("."),"getFileName");h(Aa,"overload2");var qf=(()=>{let a=0;return()=>a++})(),rf=h(a=>a instanceof Error?a.message:String(a),"getErrorMessage"),Md=class{static $jscomp$static$block$m600241313$26(){h(this,"BinaryHeap")}constructor(a=(d,k)=>d<k){this._compareFn=a;this._items=[]}insert(a){this._items.push(a);this.moveUp(this._items.length-1)}remove(){if(0===this._items.length)return null;
let a=this._items[0],d=this._items.pop();return 0!==this._items.length&&(this._items[0]=d,this.moveDown(0)),a}clear(){this._items.splice(0,this._items.length)}moveUp(a){for(;0<a;){let d=Math.floor((a-1)/2);if(!this._compareFn(this._items[a],this._items[d])&&this._items[a]>=this._items[d])break;this.swap(a,d);a=d}}moveDown(a){for(;a<Math.floor(this._items.length/2);){let d=2*a+1;if(d<this._items.length-1&&!this._compareFn(this._items[d],this._items[d+1])&&++d,this._compareFn(this._items[a],this._items[d]))break;
this.swap(a,d);a=d}}swap(a,d){[this._items[a],this._items[d]]=[this._items[d],this._items[a]]}get length(){return this._items.length}};Md.$jscomp$static$block$m600241313$26();var ff=Object.freeze([776,2359,2367,2984,3007,3021,3633,3635,3648,3657,4352,4449,4520]);h(ud,"runes");h(vd,"nextUnits");h(Ad,"isFirstOfSurrogatePair");h(Mc,"isRegionalIndicator");h(Bd,"isSubdivisionFlag");h(Dd,"isFitzpatrickModifier");h(xd,"isVariationSelector");h(yd,"isDiacriticalMark");h(Cd,"isSupplementarySpecialpurposePlane");
h(wd,"isGrapheme");h(zd,"isZeroWidthJoiner");h(sc,"codePointFromSurrogatePair");h(jb,"betweenInclusive");var Nd={"Joy-Con L+R (STANDARD GAMEPAD Vendor: 057e Product: 200e)":{buttons:{0:"south",1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",6:"ltrigger",7:"rtrigger",8:"select",9:"start",10:"lstick",11:"rstick",12:"dpad-up",13:"dpad-down",14:"dpad-left",15:"dpad-right",16:"home",17:"capture"},sticks:{left:{x:0,y:1},right:{x:2,y:3}}},"Joy-Con (L) (STANDARD GAMEPAD Vendor: 057e Product: 2006)":{buttons:{0:"south",
1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",9:"select",10:"lstick",16:"start"},sticks:{left:{x:0,y:1}}},"Joy-Con (R) (STANDARD GAMEPAD Vendor: 057e Product: 2007)":{buttons:{0:"south",1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",9:"start",10:"lstick",16:"select"},sticks:{left:{x:0,y:1}}},"Pro Controller (STANDARD GAMEPAD Vendor: 057e Product: 2009)":{buttons:{0:"south",1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",6:"ltrigger",7:"rtrigger",8:"select",9:"start",10:"lstick",
11:"rstick",12:"dpad-up",13:"dpad-down",14:"dpad-left",15:"dpad-right",16:"home",17:"capture"},sticks:{left:{x:0,y:1},right:{x:2,y:3}}},default:{buttons:{0:"south",1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",6:"ltrigger",7:"rtrigger",8:"select",9:"start",10:"lstick",11:"rstick",12:"dpad-up",13:"dpad-down",14:"dpad-left",15:"dpad-right",16:"home"},sticks:{left:{x:0,y:1},right:{x:2,y:3}}}},Ub=class{constructor(){this.pressed=new Set([]);this.pressedRepeat=new Set([]);this.released=new Set([]);
this.down=new Set([])}static $jscomp$static$block$m600241313$27(){h(this,"ButtonState")}update(){this.pressed.clear();this.released.clear();this.pressedRepeat.clear()}press(a){this.pressed.add(a);this.pressedRepeat.add(a);this.down.add(a)}pressRepeat(a){this.pressedRepeat.add(a)}release(a){this.down.delete(a);this.pressed.delete(a);this.released.add(a)}},Od=class{constructor(){this.buttonState=new Ub;this.stickState=new Map}static $jscomp$static$block$m600241313$28(){h(this,"GamepadState")}},Pd=class{constructor(){this.dts=
[];this.fps=this.timer=0}static $jscomp$static$block$m600241313$29(){h(this,"FPSCounter")}tick(a){this.dts.push(a);this.timer+=a;1<=this.timer&&(this.timer=0,this.fps=Math.round(1/(this.dts.reduce((d,k)=>d+k)/this.dts.length)),this.dts=[])}},sf=h(a=>{function d(){return p.dt*p.timeScale}function k(){return p.time}function n(){return p.fpsCounter.fps}function r(){return p.numFrames}function J(){return p.canvas.toDataURL()}function M(m){p.canvas.style.cursor=m}function R(){return p.canvas.style.cursor}
function V(m){if(m)try{let x=p.canvas.requestPointerLock();x.catch&&x.catch(C=>console.error(C))}catch(x){console.error(x)}else document.exitPointerLock()}function ha(){return!!document.pointerLockElement}function pa(m){m.requestFullscreen?m.requestFullscreen():m.webkitRequestFullscreen&&m.webkitRequestFullscreen()}function ia(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullScreen&&document.webkitExitFullScreen()}function Ea(){return document.fullscreenElement||document.webkitFullscreenElement}
function Ta(m=!0){m?pa(p.canvas):ia()}function Ma(){return!!Ea()}function Ua(){p.stopped=!0;for(let m in ja)p.canvas.removeEventListener(m,ja[m]);for(let m in nb)document.removeEventListener(m,nb[m]);for(let m in wa)window.removeEventListener(m,wa[m]);Vb.disconnect()}function Va(m){null!==p.loopID&&cancelAnimationFrame(p.loopID);let x=0,C=h(N=>{if(!p.stopped){if("visible"===document.visibilityState){N/=1E3;var ka=N-p.realTime,qa=a.maxFPS?1/a.maxFPS:0;p.realTime=N;x+=ka;x>qa&&(p.skipTime||(p.dt=x,
p.time+=d(),p.fpsCounter.tick(p.dt)),x=0,p.skipTime=!1,p.numFrames++,fb(),m(),sa())}p.loopID=requestAnimationFrame(C)}},"frame");C(0)}function Na(){return"ontouchstart"in window||0<navigator.maxTouchPoints}function Ga(){return p.mousePos.clone()}function Ha(){return p.mouseDeltaPos.clone()}function mb(m="left"){return p.mouseState.pressed.has(m)}function W(m="left"){return p.mouseState.down.has(m)}function Sa(m="left"){return p.mouseState.released.has(m)}function Fa(){return p.isMouseMoved}function ya(m){return void 0===
m?0<p.keyState.pressed.size:p.keyState.pressed.has(m)}function lb(m){return void 0===m?0<p.keyState.pressedRepeat.size:p.keyState.pressedRepeat.has(m)}function Wb(m){return void 0===m?0<p.keyState.down.size:p.keyState.down.has(m)}function Fb(m){return void 0===m?0<p.keyState.released.size:p.keyState.released.has(m)}function Xb(m){return void 0===m?0<p.mergedGamepadState.buttonState.pressed.size:p.mergedGamepadState.buttonState.pressed.has(m)}function Gb(m){return void 0===m?0<p.mergedGamepadState.buttonState.down.size:
p.mergedGamepadState.buttonState.down.has(m)}function Hb(m){return void 0===m?0<p.mergedGamepadState.buttonState.released.size:p.mergedGamepadState.buttonState.released.has(m)}function Yb(m){return p.events.on("resize",m)}function rb(m){return p.events.on("mouseMove",()=>m(Ga(),Ha()))}function Zb(m){return p.events.on("charInput",m)}function sb(m){return p.events.on("touchStart",m)}function Ja(m){return p.events.on("touchMove",m)}function tb(m){return p.events.on("touchEnd",m)}function $b(m){return p.events.on("scroll",
m)}function ub(m){return p.events.on("hide",m)}function ac(m){return p.events.on("show",m)}function bc(m,x){if("function"==typeof m)return p.events.on("gamepadButtonDown",m);if("string"==typeof m&&"function"==typeof x)return p.events.on("gamepadButtonDown",C=>C===m&&x(m))}function aa(m,x){if("function"==typeof m)return p.events.on("gamepadButtonPress",m);if("string"==typeof m&&"function"==typeof x)return p.events.on("gamepadButtonPress",C=>C===m&&x(m))}function Ya(m,x){if("function"==typeof m)return p.events.on("gamepadButtonRelease",
m);if("string"==typeof m&&"function"==typeof x)return p.events.on("gamepadButtonRelease",C=>C===m&&x(m))}function Za(m,x){return p.events.on("gamepadStick",(C,N)=>C===m&&x(N))}function ta(m){p.events.on("gamepadConnect",m)}function ra(m){p.events.on("gamepadDisconnect",m)}function $a(m){return p.mergedGamepadState.stickState.get(m)||new z(0)}function ob(){return[...p.charInputted]}function Ib(){return[...p.gamepads]}function fb(){p.events.trigger("input");p.keyState.down.forEach(m=>p.events.trigger("keyDown",
m));p.mouseState.down.forEach(m=>p.events.trigger("mouseDown",m));Jb()}function sa(){p.keyState.update();p.mouseState.update();p.mergedGamepadState.buttonState.update();p.mergedGamepadState.stickState.forEach((m,x)=>{p.mergedGamepadState.stickState.set(x,new z(0))});p.charInputted=[];p.isMouseMoved=!1;p.gamepadStates.forEach(m=>{m.buttonState.update();m.stickState.forEach((x,C)=>{m.stickState.set(C,new z(0))})})}function ab(m){let x={index:m.index,isPressed:C=>p.gamepadStates.get(m.index).buttonState.pressed.has(C),
isDown:C=>p.gamepadStates.get(m.index).buttonState.down.has(C),isReleased:C=>p.gamepadStates.get(m.index).buttonState.released.has(C),getStick:C=>p.gamepadStates.get(m.index).stickState.get(C)};return p.gamepads.push(x),p.gamepadStates.set(m.index,{buttonState:new Ub,stickState:new Map([["left",new z(0)],["right",new z(0)]])}),x}function Kb(m){p.gamepads=p.gamepads.filter(x=>x.index!==m.index);p.gamepadStates.delete(m.index)}function Jb(){for(var m of navigator.getGamepads())m&&!p.gamepadStates.has(m.index)&&
ab(m);for(let C of p.gamepads){m=navigator.getGamepads()[C.index];let N=(a.gamepads??{})[m.id]??Nd[m.id]??Nd.default,ka=p.gamepadStates.get(C.index);for(var x=0;x<m.buttons.length;x++)m.buttons[x].pressed?(ka.buttonState.down.has(N.buttons[x])||(p.mergedGamepadState.buttonState.press(N.buttons[x]),ka.buttonState.press(N.buttons[x]),p.events.trigger("gamepadButtonPress",N.buttons[x])),p.events.trigger("gamepadButtonDown",N.buttons[x])):ka.buttonState.down.has(N.buttons[x])&&(p.mergedGamepadState.buttonState.release(N.buttons[x]),
ka.buttonState.release(N.buttons[x]),p.events.trigger("gamepadButtonRelease",N.buttons[x]));for(let qa in N.sticks)x=N.sticks[qa],x=new z(m.axes[x.x],m.axes[x.y]),ka.stickState.set(qa,x),p.mergedGamepadState.stickState.set(qa,x),p.events.trigger("gamepadStick",qa,x)}}if(!a.canvas)throw Error("Please provide a canvas");let p={canvas:a.canvas,loopID:null,stopped:!1,dt:0,time:0,realTime:0,fpsCounter:new Pd,timeScale:1,skipTime:!1,numFrames:0,mousePos:new z(0),mouseDeltaPos:new z(0),keyState:new Ub,mouseState:new Ub,
mergedGamepadState:new Od,gamepadStates:new Map,gamepads:[],charInputted:[],isMouseMoved:!1,lastWidth:a.canvas.offsetWidth,lastHeight:a.canvas.offsetHeight,events:new Eb};h(d,"dt");h(k,"time");h(n,"fps");h(r,"numFrames");h(J,"screenshot");h(M,"setCursor");h(R,"getCursor");h(V,"setCursorLocked");h(ha,"isCursorLocked");h(pa,"enterFullscreen");h(ia,"exitFullscreen");h(Ea,"getFullscreenElement");h(Ta,"setFullscreen");h(Ma,"isFullscreen");h(Ua,"quit");h(Va,"run");h(Na,"isTouchscreen");h(Ga,"mousePos");
h(Ha,"mouseDeltaPos");h(mb,"isMousePressed");h(W,"isMouseDown");h(Sa,"isMouseReleased");h(Fa,"isMouseMoved");h(ya,"isKeyPressed");h(lb,"isKeyPressedRepeat");h(Wb,"isKeyDown");h(Fb,"isKeyReleased");h(Xb,"isGamepadButtonPressed");h(Gb,"isGamepadButtonDown");h(Hb,"isGamepadButtonReleased");h(Yb,"onResize");let cc=Aa(m=>p.events.on("keyDown",m),(m,x)=>p.events.on("keyDown",C=>C===m&&x(m))),Oa=Aa(m=>p.events.on("keyPress",m),(m,x)=>p.events.on("keyPress",C=>C===m&&x(m))),dc=Aa(m=>p.events.on("keyPressRepeat",
m),(m,x)=>p.events.on("keyPressRepeat",C=>C===m&&x(m))),ec=Aa(m=>p.events.on("keyRelease",m),(m,x)=>p.events.on("keyRelease",C=>C===m&&x(m))),fc=Aa(m=>p.events.on("mouseDown",x=>m(x)),(m,x)=>p.events.on("mouseDown",C=>C===m&&x(C))),gc=Aa(m=>p.events.on("mousePress",x=>m(x)),(m,x)=>p.events.on("mousePress",C=>C===m&&x(C))),Pa=Aa(m=>p.events.on("mouseRelease",x=>m(x)),(m,x)=>p.events.on("mouseRelease",C=>C===m&&x(C)));h(rb,"onMouseMove");h(Zb,"onCharInput");h(sb,"onTouchStart");h(Ja,"onTouchMove");
h(tb,"onTouchEnd");h($b,"onScroll");h(ub,"onHide");h(ac,"onShow");h(bc,"onGamepadButtonDown");h(aa,"onGamepadButtonPress");h(Ya,"onGamepadButtonRelease");h(Za,"onGamepadStick");h(ta,"onGamepadConnect");h(ra,"onGamepadDisconnect");h($a,"getGamepadStick");h(ob,"charInputted");h(Ib,"getGamepads");h(fb,"processInput");h(sa,"resetInput");h(ab,"registerGamepad");h(Kb,"removeGamepad");h(Jb,"processGamepad");let ja={},nb={},wa={},Lb=a.pixelDensity||window.devicePixelRatio||1;ja.mousemove=m=>{let x=new z(m.offsetX,
m.offsetY),C=new z(m.movementX,m.movementY);if(Ma()){let qa=p.canvas.width/Lb,bb=p.canvas.height/Lb;var N=window.innerWidth,ka=window.innerHeight;N/ka>qa/bb?(ka/=bb,x.x=ib(m.offsetX-(N-qa*ka)/2,0,qa*ka,0,qa),x.y=ib(m.offsetY,0,bb*ka,0,bb)):(N/=qa,ka=(ka-bb*N)/2,x.x=ib(m.offsetX,0,qa*N,0,qa),x.y=ib(m.offsetY-ka,0,bb*N,0,bb))}p.events.onOnce("input",()=>{p.isMouseMoved=!0;p.mousePos=x;p.mouseDeltaPos=C;p.events.trigger("mouseMove")})};let Qa=["left","middle","right","back","forward"];ja.mousedown=m=>
{p.events.onOnce("input",()=>{let x=Qa[m.button];x&&(p.mouseState.press(x),p.events.trigger("mousePress",x))})};ja.mouseup=m=>{p.events.onOnce("input",()=>{let x=Qa[m.button];x&&(p.mouseState.release(x),p.events.trigger("mouseRelease",x))})};let ma=new Set(" ;ArrowLeft;ArrowRight;ArrowUp;ArrowDown;Tab".split(";")),na={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down"," ":"space"};ja.keydown=m=>{ma.has(m.key)&&m.preventDefault();p.events.onOnce("input",()=>{let x=na[m.key]||m.key.toLowerCase();
1===x.length?(p.events.trigger("charInput",x),p.charInputted.push(x)):"space"===x&&(p.events.trigger("charInput"," "),p.charInputted.push(" "));m.repeat?(p.keyState.pressRepeat(x),p.events.trigger("keyPressRepeat",x)):(p.keyState.press(x),p.events.trigger("keyPressRepeat",x),p.events.trigger("keyPress",x))})};ja.keyup=m=>{p.events.onOnce("input",()=>{let x=na[m.key]||m.key.toLowerCase();p.keyState.release(x);p.events.trigger("keyRelease",x)})};ja.touchstart=m=>{m.preventDefault();p.events.onOnce("input",
()=>{let x=[...m.changedTouches],C=p.canvas.getBoundingClientRect();!1!==a.touchToMouse&&(p.mousePos=new z(x[0].clientX-C.x,x[0].clientY-C.y),p.mouseState.press("left"),p.events.trigger("mousePress","left"));x.forEach(N=>{p.events.trigger("touchStart",new z(N.clientX-C.x,N.clientY-C.y),N)})})};ja.touchmove=m=>{m.preventDefault();p.events.onOnce("input",()=>{let x=[...m.changedTouches],C=p.canvas.getBoundingClientRect();!1!==a.touchToMouse&&(p.mousePos=new z(x[0].clientX-C.x,x[0].clientY-C.y),p.events.trigger("mouseMove"));
x.forEach(N=>{p.events.trigger("touchMove",new z(N.clientX-C.x,N.clientY-C.y),N)})})};ja.touchend=m=>{p.events.onOnce("input",()=>{let x=[...m.changedTouches],C=p.canvas.getBoundingClientRect();!1!==a.touchToMouse&&(p.mousePos=new z(x[0].clientX-C.x,x[0].clientY-C.y),p.mouseState.release("left"),p.events.trigger("mouseRelease","left"));x.forEach(N=>{p.events.trigger("touchEnd",new z(N.clientX-C.x,N.clientY-C.y),N)})})};ja.touchcancel=m=>{p.events.onOnce("input",()=>{let x=[...m.changedTouches],C=
p.canvas.getBoundingClientRect();!1!==a.touchToMouse&&(p.mousePos=new z(x[0].clientX-C.x,x[0].clientY-C.y),p.mouseState.release("left"),p.events.trigger("mouseRelease","left"));x.forEach(N=>{p.events.trigger("touchEnd",new z(N.clientX-C.x,N.clientY-C.y),N)})})};ja.wheel=m=>{m.preventDefault();p.events.onOnce("input",()=>{p.events.trigger("scroll",new z(m.deltaX,m.deltaY))})};ja.contextmenu=m=>m.preventDefault();nb.visibilitychange=()=>{"visible"===document.visibilityState?(p.skipTime=!0,p.events.trigger("show")):
p.events.trigger("hide")};wa.gamepadconnected=m=>{let x=ab(m.gamepad);p.events.onOnce("input",()=>{p.events.trigger("gamepadConnect",x)})};wa.gamepaddisconnected=m=>{let x=Ib().filter(C=>C.index===m.gamepad.index)[0];Kb(m.gamepad);p.events.onOnce("input",()=>{p.events.trigger("gamepadDisconnect",x)})};for(let m in ja)p.canvas.addEventListener(m,ja[m]);for(let m in nb)document.addEventListener(m,nb[m]);for(let m in wa)window.addEventListener(m,wa[m]);let Vb=new ResizeObserver(m=>{for(let x of m)if(x.target===
p.canvas){if(p.lastWidth===p.canvas.offsetWidth&&p.lastHeight===p.canvas.offsetHeight)break;p.lastWidth=p.canvas.offsetWidth;p.lastHeight=p.canvas.offsetHeight;p.events.onOnce("input",()=>{p.events.trigger("resize")})}});return Vb.observe(p.canvas),{dt:d,time:k,run:Va,canvas:p.canvas,fps:n,numFrames:r,quit:Ua,setFullscreen:Ta,isFullscreen:Ma,setCursor:M,screenshot:J,getGamepads:Ib,getCursor:R,setCursorLocked:V,isCursorLocked:ha,isTouchscreen:Na,mousePos:Ga,mouseDeltaPos:Ha,isKeyDown:Wb,isKeyPressed:ya,
isKeyPressedRepeat:lb,isKeyReleased:Fb,isMouseDown:W,isMousePressed:mb,isMouseReleased:Sa,isMouseMoved:Fa,isGamepadButtonPressed:Xb,isGamepadButtonDown:Gb,isGamepadButtonReleased:Hb,getGamepadStick:$a,charInputted:ob,onResize:Yb,onKeyDown:cc,onKeyPress:Oa,onKeyPressRepeat:dc,onKeyRelease:ec,onMouseDown:fc,onMousePress:gc,onMouseRelease:Pa,onMouseMove:rb,onCharInput:Zb,onTouchStart:sb,onTouchMove:Ja,onTouchEnd:tb,onScroll:$b,onHide:ub,onShow:ac,onGamepadButtonDown:bc,onGamepadButtonPress:aa,onGamepadButtonRelease:Ya,
onGamepadStick:Za,onGamepadConnect:ta,onGamepadDisconnect:ra,events:p.events}},"default");Pd.$jscomp$static$block$m600241313$29();Od.$jscomp$static$block$m600241313$28();Ub.$jscomp$static$block$m600241313$27();const Pc=class{static $jscomp$static$block$m600241313$30(){h(this,"Texture")}constructor(a,d,k,n={}){this.src=null;this.ctx=a;let r=a.gl;this.glTex=a.gl.createTexture();a.onDestroy(()=>this.free());this.width=d;this.height=k;a={linear:r.LINEAR,nearest:r.NEAREST}[n.filter??a.opts.texFilter]??
r.NEAREST;n={repeat:r.REPEAT,clampToEadge:r.CLAMP_TO_EDGE}[n.wrap]??r.CLAMP_TO_EDGE;this.bind();d&&k&&r.texImage2D(r.TEXTURE_2D,0,r.RGBA,d,k,0,r.RGBA,r.UNSIGNED_BYTE,null);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,a);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,a);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,n);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,n);this.unbind()}static fromImage(a,d,k={}){a=new Pc(a,d.width,d.height,k);return a.update(d),a.src=d,a}update(a,d=0,k=0){let n=
this.ctx.gl;this.bind();n.texSubImage2D(n.TEXTURE_2D,0,d,k,n.RGBA,n.UNSIGNED_BYTE,a);this.unbind()}bind(){this.ctx.pushTexture2D(this.glTex)}unbind(){this.ctx.popTexture2D()}free(){this.ctx.gl.deleteTexture(this.glTex)}};Pc.$jscomp$static$block$m600241313$30();var vb=Pc,hc=class{static $jscomp$static$block$m600241313$31(){h(this,"FrameBuffer")}constructor(a,d,k,n={}){this.ctx=a;let r=a.gl;a.onDestroy(()=>this.free());this.tex=new vb(a,d,k,n);this.glFramebuffer=r.createFramebuffer();this.glRenderbuffer=
r.createRenderbuffer();this.bind();r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,d,k);r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.tex.glTex,0);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,this.glRenderbuffer);this.unbind()}get width(){return this.tex.width}get height(){return this.tex.height}toImageData(){var a=this.ctx.gl;let d=new Uint8ClampedArray(this.width*this.height*4);this.bind();a.readPixels(0,0,this.width,this.height,
a.RGBA,a.UNSIGNED_BYTE,d);this.unbind();a=4*this.width;let k=new Uint8Array(a);for(let n=0;n<(this.height/2|0);n++){let r=n*a,J=(this.height-n-1)*a;k.set(d.subarray(r,r+a));d.copyWithin(r,J,J+a);d.set(k,J)}return new ImageData(d,this.width,this.height)}toDataURL(){let a=document.createElement("canvas"),d=a.getContext("2d");return a.width=this.width,a.height=this.height,d.putImageData(this.toImageData(),0,0),a.toDataURL()}draw(a){this.bind();a();this.unbind()}bind(){this.ctx.pushFramebuffer(this.glFramebuffer);
this.ctx.pushRenderbuffer(this.glRenderbuffer);this.ctx.pushViewport({x:0,y:0,w:this.width,h:this.height})}unbind(){this.ctx.popFramebuffer();this.ctx.popRenderbuffer();this.ctx.popViewport()}free(){let a=this.ctx.gl;a.deleteFramebuffer(this.glFramebuffer);a.deleteRenderbuffer(this.glRenderbuffer);this.tex.free()}},Qd=class{static $jscomp$static$block$m600241313$32(){h(this,"Shader")}constructor(a,d,k,n){this.ctx=a;a.onDestroy(()=>this.free());let r=a.gl;a=r.createShader(r.VERTEX_SHADER);let J=r.createShader(r.FRAGMENT_SHADER);
r.shaderSource(a,d);r.shaderSource(J,k);r.compileShader(a);r.compileShader(J);let M=r.createProgram();if(this.glProgram=M,r.attachShader(M,a),r.attachShader(M,J),n.forEach((R,V)=>r.bindAttribLocation(M,V,R)),r.linkProgram(M),!r.getProgramParameter(M,r.LINK_STATUS)){if(d=r.getShaderInfoLog(a))throw Error("VERTEX SHADER "+d);if(d=r.getShaderInfoLog(J))throw Error("FRAGMENT SHADER "+d);}r.deleteShader(a);r.deleteShader(J)}bind(){this.ctx.pushProgram(this.glProgram)}unbind(){this.ctx.popProgram()}send(a){let d=
this.ctx.gl;for(let k in a){let n=a[k],r=d.getUniformLocation(this.glProgram,k);"number"==typeof n?d.uniform1f(r,n):n instanceof Xa?d.uniformMatrix4fv(r,!1,new Float32Array(n.m)):n instanceof Z?d.uniform3f(r,n.r,n.g,n.b):n instanceof z&&d.uniform2f(r,n.x,n.y)}}free(){this.ctx.gl.deleteProgram(this.glProgram)}},Rd=class{static $jscomp$static$block$m600241313$33(){h(this,"BatchRenderer")}constructor(a,d,k,n){this.vqueue=[];this.iqueue=[];this.numDraws=0;this.curShader=this.curTex=this.curPrimitive=
null;this.curUniform={};let r=a.gl;this.vertexFormat=d;this.ctx=a;this.stride=d.reduce((J,M)=>J+M.size,0);this.maxVertices=k;this.maxIndices=n;this.glVBuf=r.createBuffer();a.pushArrayBuffer(this.glVBuf);r.bufferData(r.ARRAY_BUFFER,4*k,r.DYNAMIC_DRAW);a.popArrayBuffer();this.glIBuf=r.createBuffer();a.pushElementArrayBuffer(this.glIBuf);r.bufferData(r.ELEMENT_ARRAY_BUFFER,4*n,r.DYNAMIC_DRAW);a.popElementArrayBuffer()}push(a,d,k,n,r=null,J={}){(a!==this.curPrimitive||r!==this.curTex||n!==this.curShader||
!qc(this.curUniform,J)||this.vqueue.length+d.length*this.stride>this.maxVertices||this.iqueue.length+k.length>this.maxIndices)&&this.flush();let M=this.vqueue.length/this.stride;for(let R of d)this.vqueue.push(R);for(let R of k)this.iqueue.push(R+M);this.curPrimitive=a;this.curShader=n;this.curTex=r;this.curUniform=J}flush(){if(this.curPrimitive&&this.curShader&&0!==this.vqueue.length&&0!==this.iqueue.length){var a=this.ctx.gl;this.ctx.pushArrayBuffer(this.glVBuf);a.bufferSubData(a.ARRAY_BUFFER,0,
new Float32Array(this.vqueue));this.ctx.pushElementArrayBuffer(this.glIBuf);a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,new Uint16Array(this.iqueue));this.ctx.setVertexFormat(this.vertexFormat);this.curShader.bind();this.curShader.send(this.curUniform);this.curTex?.bind();a.drawElements(this.curPrimitive,this.iqueue.length,a.UNSIGNED_SHORT,0);this.curTex?.unbind();this.curShader.unbind();this.ctx.popArrayBuffer();this.ctx.popElementArrayBuffer();this.vqueue=[];this.iqueue=[];this.numDraws++}}free(){let a=
this.ctx.gl;a.deleteBuffer(this.glVBuf);a.deleteBuffer(this.glIBuf)}};Rd.$jscomp$static$block$m600241313$33();Qd.$jscomp$static$block$m600241313$32();hc.$jscomp$static$block$m600241313$31();h(kb,"genStack");h(Ed,"initGfx");const Qc=class{static $jscomp$static$block$m600241313$34(){h(this,"Asset")}constructor(a){this.loaded=!1;this.error=this.data=null;this.onLoadEvents=new Ia;this.onErrorEvents=new Ia;this.onFinishEvents=new Ia;a.then(d=>{this.data=d;this.onLoadEvents.trigger(d)}).catch(d=>{if(this.error=
d,0<this.onErrorEvents.numListeners())this.onErrorEvents.trigger(d);else throw d;}).finally(()=>{this.onFinishEvents.trigger();this.loaded=!0})}static loaded(a){let d=new Qc(Promise.resolve(a));return d.data=a,d.loaded=!0,d}onLoad(a){return this.loaded&&this.data?a(this.data):this.onLoadEvents.add(a),this}onError(a){return this.loaded&&this.error?a(this.error):this.onErrorEvents.add(a),this}onFinish(a){return this.loaded?a():this.onFinishEvents.add(a),this}then(a){return this.onLoad(a)}catch(a){return this.onError(a)}finally(a){return this.onFinish(a)}};
Qc.$jscomp$static$block$m600241313$34();var Ka=Qc,wb=class{constructor(){this.assets=new Map;this.lastUID=0}static $jscomp$static$block$m600241313$35(){h(this,"AssetBucket")}add(a,d){a=a??this.lastUID++ +"";d=new Ka(d);return this.assets.set(a,d),d}addLoaded(a,d){a=a??this.lastUID++ +"";d=Ka.loaded(d);return this.assets.set(a,d),d}get(a){return this.assets.get(a)}progress(){if(0===this.assets.size)return 1;let a=0;return this.assets.forEach(d=>{d.loaded&&a++}),a/this.assets.size}};wb.$jscomp$static$block$m600241313$35();
h(tc,"fetchURL");h(Rb,"fetchJSON");h(Fd,"fetchText");h(Gd,"fetchArrayBuffer");h(Sb,"loadImg");var Sd=2*Math.PI/3,Td=2*Math.PI/4.5,wc={linear:a=>a,easeInSine:a=>1-Math.cos(a*Math.PI/2),easeOutSine:a=>Math.sin(a*Math.PI/2),easeInOutSine:a=>-(Math.cos(Math.PI*a)-1)/2,easeInQuad:a=>a*a,easeOutQuad:a=>1-(1-a)*(1-a),easeInOutQuad:a=>.5>a?2*a*a:1-Math.pow(-2*a+2,2)/2,easeInCubic:a=>a*a*a,easeOutCubic:a=>1-Math.pow(1-a,3),easeInOutCubic:a=>.5>a?4*a*a*a:1-Math.pow(-2*a+2,3)/2,easeInQuart:a=>a*a*a*a,easeOutQuart:a=>
1-Math.pow(1-a,4),easeInOutQuart:a=>.5>a?8*a*a*a*a:1-Math.pow(-2*a+2,4)/2,easeInQuint:a=>a*a*a*a*a,easeOutQuint:a=>1-Math.pow(1-a,5),easeInOutQuint:a=>.5>a?16*a*a*a*a*a:1-Math.pow(-2*a+2,5)/2,easeInExpo:a=>0===a?0:Math.pow(2,10*a-10),easeOutExpo:a=>1===a?1:1-Math.pow(2,-10*a),easeInOutExpo:a=>0===a?0:1===a?1:.5>a?Math.pow(2,20*a-10)/2:(2-Math.pow(2,-20*a+10))/2,easeInCirc:a=>1-Math.sqrt(1-Math.pow(a,2)),easeOutCirc:a=>Math.sqrt(1-Math.pow(a-1,2)),easeInOutCirc:a=>.5>a?(1-Math.sqrt(1-Math.pow(2*a,
2)))/2:(Math.sqrt(1-Math.pow(-2*a+2,2))+1)/2,easeInBack:a=>2.70158*a*a*a-1.70158*a*a,easeOutBack:a=>1+2.70158*Math.pow(a-1,3)+1.70158*Math.pow(a-1,2),easeInOutBack:a=>.5>a?Math.pow(2*a,2)*(7.189819*a-2.5949095)/2:(Math.pow(2*a-2,2)*(3.5949095*(2*a-2)+2.5949095)+2)/2,easeInElastic:a=>0===a?0:1===a?1:-Math.pow(2,10*a-10)*Math.sin((10*a-10.75)*Sd),easeOutElastic:a=>0===a?0:1===a?1:Math.pow(2,-10*a)*Math.sin((10*a-.75)*Sd)+1,easeInOutElastic:a=>0===a?0:1===a?1:.5>a?-(Math.pow(2,20*a-10)*Math.sin((20*
a-11.125)*Td))/2:Math.pow(2,-20*a+10)*Math.sin((20*a-11.125)*Td)/2+1,easeInBounce:a=>1-wc.easeOutBounce(1-a),easeOutBounce:a=>a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,easeInOutBounce:a=>.5>a?(1-wc.easeOutBounce(1-2*a))/2:(1+wc.easeOutBounce(2*a-1))/2},xc=wc,Ud=class{static $jscomp$static$block$m600241313$36(){h(this,"TexPacker")}constructor(a,d,k){this.textures=[];this.curHeight=this.y=this.x=0;this.gfx=a;this.canvas=
document.createElement("canvas");this.canvas.width=d;this.canvas.height=k;this.textures=[vb.fromImage(a,this.canvas)];this.c2d=this.canvas.getContext("2d")}add(a){if(a.width>this.canvas.width||a.height>this.canvas.height)throw Error(`Texture size (${a.width} x ${a.height}) exceeds limit (${this.canvas.width} x ${this.canvas.height})`);this.x+a.width>this.canvas.width&&(this.x=0,this.y+=this.curHeight,this.curHeight=0);this.y+a.height>this.canvas.height&&(this.c2d.clearRect(0,0,this.canvas.width,this.canvas.height),
this.textures.push(vb.fromImage(this.gfx,this.canvas)),this.x=0,this.y=0,this.curHeight=0);let d=this.textures[this.textures.length-1],k=new z(this.x,this.y);return this.x+=a.width,a.height>this.curHeight&&(this.curHeight=a.height),a instanceof ImageData?this.c2d.putImageData(a,k.x,k.y):this.c2d.drawImage(a,k.x,k.y),d.update(this.canvas),[d,new oa(k.x/this.canvas.width,k.y/this.canvas.height,a.width/this.canvas.width,a.height/this.canvas.height)]}free(){for(let a of this.textures)a.free()}};Ud.$jscomp$static$block$m600241313$36();
var tf=lf("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L5QNSqT5iiySS9Ja2SV//5ME0ak//+4KgAAABgQBAADAMDgYCAEgCteQ0fZH6+ICXA357+MPfhR/+ywRf/U///LVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5JknQAFoWhGLm5gBClBmT3GiAAAAAGkHAAAIAAANIOAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV"),
Rc=[{name:"a_pos",size:2},{name:"a_uv",size:2},{name:"a_color",size:4}],uf=8192*Rc.reduce((a,d)=>a+d.size,0),vf=new Set(["id","require"]),wf=new Set("add update draw destroy inspect drawInspect".split(" "));h(qb,"anchorPt");h(Hd,"alignPt");h(Id,"createEmptyAudioBuffer");var mf=h((a={})=>{function d(b){return"string"!=typeof b||Ld(b)?b:T.urlPrefix+b}function k(b){return T.custom.add(null,b)}function n(){let b=[T.sprites,T.sounds,T.shaders,T.fonts,T.bitmapFonts,T.custom];return b.reduce((c,e)=>c+e.progress(),
0)/b.length}function r(b){return void 0!==b&&(T.urlPrefix=b),T.urlPrefix}function J(b,c){return T.custom.add(b,Rb(c))}function M(b,c,e={}){let f=new FontFace(b,"string"==typeof c?`url(${c})`:c);return document.fonts.add(f),T.fonts.add(b,f.load().catch(g=>{throw Error(`Failed to load font from "${c}": ${g}`);}).then(g=>new ic(g,e)))}function R(b,c,e,f,g={}){return T.bitmapFonts.add(b,Sb(c).then(q=>Zb(vb.fromImage(La,q,g),e,f,g.chars??" !\"#$%\x26'()*+,-./0123456789:;\x3c\x3d\x3e?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~")))}
function V(b=1,c=1,e=0,f=0,g=1,q=1){let u=[];g/=b;q/=c;for(let t=0;t<c;t++)for(let v=0;v<b;v++)u.push(new oa(e+v*g,f+t*q,g,q));return u}function ha(b,c){return b=d(b),k("string"==typeof c?new Promise((e,f)=>{Rb(c).then(g=>{ha(b,g).then(e).catch(f)})}):Ba.from(b).then(e=>{let f={};for(let q in c){let u=c[q],t=e.frames[0],v=2048*t.w,l=2048*t.h;var g=u.frames?u.frames.map(w=>new oa(t.x+(u.x+w.x)/v*t.w,t.y+(u.y+w.y)/l*t.h,w.w/v*t.w,w.h/l*t.h)):V(u.sliceX||1,u.sliceY||1,t.x+u.x/v*t.w,t.y+u.y/l*t.h,u.width/
v*t.w,u.height/l*t.h);g=new Ba(e.tex,g,u.anims);T.sprites.addLoaded(q,g);f[q]=g}return f}))}function pa(b,c={}){var e=document.createElement("canvas");let f=b[0].width,g=b[0].height;e.width=f*b.length;e.height=g;let q=e.getContext("2d");b.forEach((u,t)=>{u instanceof ImageData?q.putImageData(u,t*f,0):q.drawImage(u,t*f,0)});e=q.getImageData(0,0,b.length*f,g);return Ba.fromImage(e,{...c,sliceX:b.length,sliceY:1})}function ia(b,c,e={sliceX:1,sliceY:1,anims:{}}){return c=d(c),Array.isArray(c)?c.some(f=>
"string"==typeof f)?T.sprites.add(b,Promise.all(c.map(f=>"string"==typeof f?Sb(f):Promise.resolve(f))).then(f=>pa(f,e))):T.sprites.addLoaded(b,pa(c,e)):"string"==typeof c?T.sprites.add(b,Ba.from(c,e)):T.sprites.addLoaded(b,Ba.fromImage(c,e))}function Ea(b,c){return c=d(c),T.sprites.add(b,new Promise(async e=>{let f="string"==typeof c?await Rb(c):c;var g=await Promise.all(f.frames.map(Sb));let q=document.createElement("canvas");q.width=f.width;q.height=f.height*f.frames.length;let u=q.getContext("2d");
g.forEach((t,v)=>{u.drawImage(t,0,v*f.height)});g=await ia(null,q,{sliceY:f.frames.length,anims:f.anims});e(g)}))}function Ta(b,c,e){c=d(c);e=d(e);"string"==typeof c&&!e&&(e=pf(c)+".json");e="string"==typeof e?Rb(e):Promise.resolve(e);return T.sprites.add(b,e.then(f=>{let g=f.meta.size,q=f.frames.map(t=>new oa(t.frame.x/g.w,t.frame.y/g.h,t.frame.w/g.w,t.frame.h/g.h)),u={};for(let t of f.meta.frameTags)t.from===t.to?u[t.name]=t.from:u[t.name]={from:t.from,to:t.to,speed:10,loop:!0,pingpong:"pingpong"===
t.direction};return Ba.from(c,{frames:q,anims:u})}))}function Ma(b,c,e){return T.shaders.addLoaded(b,rb(c,e))}function Ua(b,c,e){c=d(c);e=d(e);let f=h(g=>g?Fd(g):Promise.resolve(null),"resolveUrl");c=Promise.all([f(c),f(e)]).then(([g,q])=>rb(g,q));return T.shaders.add(b,c)}function Va(b,c){return c=d(c),T.sounds.add(b,"string"==typeof c?gb.fromURL(c):gb.fromArrayBuffer(c))}function Na(b="bean"){return ia(b,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAA1CAYAAADyMeOEAAAAAXNSR0IArs4c6QAAAoVJREFUaIHdm7txwkAQhheGAqACiCHzOKQDQrqgILpwSAeEDBnEUAF0gCMxZ7G72qce/mec2Lpf9+3unaS78wgSNZ8uX5729+d1FNWXUuGmXlBOUUEIMckEpeQJgBu6C+BSFngztBR2vd+ovY+7g+p6LbgaWgJrAeUkDYIUXgXdBBwNi6kpABJwMTQH3AZsXRR8GHTfgEth8E3gjdAUcNewpbTgY85sCMCUuOokozE0YM0YRzM9NGAAXd8+omAF5h4lnmBRvpSnZHyLoLEbaN+aKB9KWv/KWw0tAbbANnlG+UvB2dm77NxxdwgBpjrF/d7rW9cbmpvio2A5z8iAYpVU8pGZlo6/2+MSco2lHfd3rv9jAP038e1xef9o2mjvYb2OqpqKE81028/jeietlSEVO5FRWsxWsJit1G3aFpW8iWe5RwpiCZAk25QvV6nz6fIlynRGuTd5WqpJ4guAlDfVKBK87hXljflgv1ON6fV+4+5gVlA17SfeG0heKqQd4l4jI/wrmaA9N9R4ar+wpHJDZyrrfcH0nB66PqAzPi76pn+faSyJk/vzOorYhGurQrzj/P68jtBMawHaHBIR9xoD5O34dy0qQOSYHvqExq2TpT2nf76+w7y251OYF0CRaU+J920TwLUa6inx6OxE6g80lu2ux7Y2eJLF/rCXE6zEPdnenk9o+4ih9AEdnW2q81HXl5LuU6OTl2fXUhqganbXAGq3g6jJOWV/OnoesO6YqqEB/GdNsjf7uHtwj2DzmRNpp7iOZfm6D9oAxB6Yi1gC4oIYeo4MIPdopEQRB+cAko5J1tW386HpB2Kz1eop4Epdwls/kgZ1sh8gZsEjdcWkr//D8Qu3Z3l5Nl1NtAAAAABJRU5ErkJggg\x3d\x3d")}
function Ga(b){return T.sprites.get(b)}function Ha(b){return T.sounds.get(b)}function mb(b){return T.fonts.get(b)}function W(b){return T.bitmapFonts.get(b)}function Sa(b){return T.shaders.get(b)}function Fa(b){return T.custom.get(b)}function ya(b){if("string"==typeof b){let c=Ga(b);if(c)return c;if(1>n())return null;throw Error(`Sprite not found: ${b}`);}if(b instanceof Ba)return Ka.loaded(b);if(b instanceof Ka)return b;throw Error(`Invalid sprite: ${b}`);}function lb(b){if("string"==typeof b){let c=
Ha(b);if(c)return c;if(1>n())return null;throw Error(`Sound not found: ${b}`);}if(b instanceof gb)return Ka.loaded(b);if(b instanceof Ka)return b;throw Error(`Invalid sound: ${b}`);}function Wb(b){if(!b)return A.defShader;if("string"==typeof b){let c=Sa(b);if(c)return c.data??c;if(1>n())return null;throw Error(`Shader not found: ${b}`);}return b instanceof Ka?b.data?b.data:b:b}function Fb(b){if(!b)return Fb(a.font??"monospace");if("string"==typeof b){let c=W(b),e=mb(b);if(c)return c.data??c;if(e)return e.data??
e;if(document.fonts.check(`${64}px ${b}`))return b;if(1>n())return null;throw Error(`Font not found: ${b}`);}return b instanceof Ka?b.data?b.data:b:b}function Xb(b){return void 0!==b&&(ua.masterNode.gain.value=b),ua.masterNode.gain.value}function Gb(b,c={}){let e=ua.ctx,f=c.paused??!1,g=e.createBufferSource(),q=new Ia,u=e.createGain(),t=c.seek??0,v=0,l=0,w=!1;g.loop=!!c.loop;g.detune.value=c.detune??0;g.playbackRate.value=c.speed??1;g.connect(u);g.onended=()=>{G()>=g.buffer?.duration&&q.trigger()};
u.connect(ua.masterNode);u.gain.value=c.volume??1;c=h(D=>{g.buffer=D.buf;f||(v=e.currentTime,g.start(0,t),w=!0)},"start");b=lb(b);b instanceof Ka&&b.onLoad(c);let G=h(()=>{if(!g.buffer)return 0;let D=f?l-v:e.currentTime-v,O=g.buffer.duration;return g.loop?D%O:Math.min(D,O)},"getTime"),H=h(D=>{let O=e.createBufferSource();return O.buffer=D.buffer,O.loop=D.loop,O.playbackRate.value=D.playbackRate.value,O.detune.value=D.detune.value,O.onended=D.onended,O.connect(u),O},"cloneNode");return{stop(){this.paused=
!0;this.seek(0)},set paused(D){f!==D&&((f=D,D)?(w&&(g.stop(),w=!1),l=e.currentTime):(g=H(g),D=l-v,g.start(0,D),w=!0,v=e.currentTime-D,l=0))},get paused(){return f},play(D=0){this.seek(D);this.paused=!1},seek(D){g.buffer?.duration&&(D>g.buffer.duration||(f?(g=H(g),v=l-D):(g.stop(),g=H(g),v=e.currentTime-D,g.start(0,D),w=!0,l=0)))},set speed(D){g.playbackRate.value=D},get speed(){return g.playbackRate.value},set detune(D){g.detune.value=D},get detune(){return g.detune.value},set volume(D){u.gain.value=
Math.max(D,0)},get volume(){return u.gain.value},set loop(D){g.loop=D},get loop(){return g.loop},duration(){return g.buffer?.duration??0},time(){return G()%this.duration()},onEnd(D){return q.add(D)},then(D){return this.onEnd(D)}}}function Hb(b){return Gb(ua.burpSnd,b)}function Yb(b,c){return new hc(La,b,c)}function rb(b="\nvec4 vert(vec2 pos, vec2 uv, vec4 color) {\n\treturn def_vert();\n}\n",c="\nvec4 frag(vec2 pos, vec2 uv, vec4 color, sampler2D tex) {\n\treturn def_frag();\n}\n"){b="\nattribute vec2 a_pos;\nattribute vec2 a_uv;\nattribute vec4 a_color;\n\nvarying vec2 v_pos;\nvarying vec2 v_uv;\nvarying vec4 v_color;\n\nvec4 def_vert() {\n\treturn vec4(a_pos, 0.0, 1.0);\n}\n\n{{user}}\n\nvoid main() {\n\tvec4 pos \x3d vert(a_pos, a_uv, a_color);\n\tv_pos \x3d a_pos;\n\tv_uv \x3d a_uv;\n\tv_color \x3d a_color;\n\tgl_Position \x3d pos;\n}\n".replace("{{user}}",
b??"\nvec4 vert(vec2 pos, vec2 uv, vec4 color) {\n\treturn def_vert();\n}\n");c="\nprecision mediump float;\n\nvarying vec2 v_pos;\nvarying vec2 v_uv;\nvarying vec4 v_color;\n\nuniform sampler2D u_tex;\n\nvec4 def_frag() {\n\treturn v_color * texture2D(u_tex, v_uv);\n}\n\n{{user}}\n\nvoid main() {\n\tgl_FragColor \x3d frag(v_pos, v_uv, v_color, u_tex);\n\tif (gl_FragColor.a \x3d\x3d 0.0) {\n\t\tdiscard;\n\t}\n}\n".replace("{{user}}",c??"\nvec4 frag(vec2 pos, vec2 uv, vec4 color, sampler2D tex) {\n\treturn def_frag();\n}\n");
try{return new Qd(La,b,c,Rc.map(f=>f.name))}catch(f){var e=rf(f).match(/(?<type>^\w+) SHADER ERROR: 0:(?<line>\d+): (?<msg>.+)/);c=Number(e.groups.line)-14;b=e.groups.msg.trim();e=e.groups.type.toLowerCase();throw Error(`${e} shader line ${c}: ${b}`);}}function Zb(b,c,e,f){let g=b.width/c,q={};f=f.split("").entries();for(let [u,t]of f)q[t]=new oa(u%g*c,Math.floor(u/g)*e,c,e);return{tex:b,map:q,size:e}}function sb(b,c,e,f=A.defTex,g=A.defShader,q={}){if((g=Wb(g))&&!(g instanceof Ka)){e=A.fixed||e?
A.transform:E.cam.transform.mult(A.transform);var u=[];for(let t of b)b=ac(e.multVec2(t.pos)),u.push(b.x,b.y,t.uv.x,t.uv.y,t.color.r/255,t.color.g/255,t.color.b/255,t.opacity);A.renderer.push(I.TRIANGLES,u,c,g,f,q)}}function Ja(){A.renderer.flush()}function tb(){I.clear(I.COLOR_BUFFER_BIT);A.frameBuffer.bind();I.clear(I.COLOR_BUFFER_BIT);A.bgColor||Pa(()=>{$a({width:ma(),height:na(),quad:new oa(0,0,ma()/64,na()/64),tex:A.bgTex,fixed:!0})});A.renderer.numDraws=0;A.fixed=!1;A.transformStack.length=
0;A.transform=new Xa}function $b(b,c){A.postShader=b;A.postShaderUniform=c??null}function ub(){Ja();A.lastDrawCalls=A.renderer.numDraws;A.frameBuffer.unbind();I.viewport(0,0,I.drawingBufferWidth,I.drawingBufferHeight);let b=A.width,c=A.height;A.width=I.drawingBufferWidth/Ca;A.height=I.drawingBufferHeight/Ca;ob({flipY:!0,tex:A.frameBuffer.tex,pos:new z(A.viewport.x,A.viewport.y),width:A.viewport.width,height:A.viewport.height,shader:A.postShader,uniform:"function"==typeof A.postShaderUniform?A.postShaderUniform():
A.postShaderUniform,fixed:!0});Ja();A.width=b;A.height=c}function ac(b){return new z(b.x/ma()*2-1,-b.y/na()*2+1)}function bc(b){A.transform=b.clone()}function aa(...b){void 0!==b[0]&&(b=B(...b),0===b.x&&0===b.y||A.transform.translate(b))}function Ya(...b){void 0!==b[0]&&(b=B(...b),1===b.x&&1===b.y||A.transform.scale(b))}function Za(b){b&&A.transform.rotate(b)}function ta(){A.transformStack.push(A.transform.clone())}function ra(){0<A.transformStack.length&&(A.transform=A.transformStack.pop())}function $a(b){if(void 0===
b.width||void 0===b.height)throw Error('drawUVQuad() requires property "width" and "height".');if(!(0>=b.width||0>=b.height)){var c=b.width,e=b.height,f=qb(b.anchor||"topleft").scale((new z(c,e)).scale(-.5)),g=b.quad||new oa(0,0,1,1),q=b.color||Y(255,255,255),u=b.opacity??1,t=b.tex?.1/b.tex.width:0,v=b.tex?.1/b.tex.height:0,l=g.x+t,w=g.y+v;t=g.w-2*t;g=g.h-2*v;ta();aa(b.pos);Za(b.angle);Ya(b.scale);aa(f);sb([{pos:new z(-c/2,e/2),uv:new z(b.flipX?l+t:l,b.flipY?w:w+g),color:q,opacity:u},{pos:new z(-c/
2,-e/2),uv:new z(b.flipX?l+t:l,b.flipY?w+g:w),color:q,opacity:u},{pos:new z(c/2,-e/2),uv:new z(b.flipX?l:l+t,b.flipY?w+g:w),color:q,opacity:u},{pos:new z(c/2,e/2),uv:new z(b.flipX?l:l+t,b.flipY?w:w+g),color:q,opacity:u}],[0,1,3,1,2,3],b.fixed,b.tex,b.shader,b.uniform);ra()}}function ob(b){if(!b.tex)throw Error('drawTexture() requires property "tex".');let c=b.quad??new oa(0,0,1,1),e=b.tex.width*c.w,f=b.tex.height*c.h,g=new z(1);if(b.tiled){let q=Math.ceil((b.width||e)/e),u=Math.ceil((b.height||f)/
f),t=qb(b.anchor||"topleft").add(new z(1,1)).scale(.5).scale(q*e,u*f);for(let v=0;v<q;v++)for(let l=0;l<u;l++)$a(Object.assign({},b,{pos:(b.pos||new z(0)).add(new z(e*v,f*l)).sub(t),scale:g.scale(b.scale||new z(1)),tex:b.tex,quad:c,width:e,height:f,anchor:"topleft"}))}else b.width&&b.height?(g.x=b.width/e,g.y=b.height/f):b.width?(g.x=b.width/e,g.y=g.x):b.height&&(g.y=b.height/f,g.x=g.y),$a(Object.assign({},b,{scale:g.scale(b.scale||new z(1)),tex:b.tex,quad:c,width:e,height:f}))}function Ib(b){if(!b.sprite)throw Error('drawSprite() requires property "sprite"');
let c=ya(b.sprite);if(c&&c.data){var e=c.data.frames[b.frame??0];if(!e)throw Error(`Frame not found: ${b.frame??0}`);ob(Object.assign({},b,{tex:c.data.tex,quad:e.scale(b.quad??new oa(0,0,1,1))}))}}function fb(b,c,e,f,g,q=1){f=Ra(f%360);g=Ra(g%360);g<=f&&(g+=2*Math.PI);let u=[];q=Math.ceil((g-f)/Ra(8)*q);for(q=(g-f)/q;f<g;f+=q)u.push(b.add(c*Math.cos(f),e*Math.sin(f)));return u.push(b.add(c*Math.cos(g),e*Math.sin(g))),u}function sa(b){if(void 0===b.width||void 0===b.height)throw Error('drawRect() requires property "width" and "height".');
if(!(0>=b.width||0>=b.height)){var c=b.width,e=b.height,f=qb(b.anchor||"topleft").add(1,1).scale((new z(c,e)).scale(-.5)),g=[new z(0,0),new z(c,0),new z(c,e),new z(0,e)];b.radius&&(g=Math.min(Math.min(c,e)/2,b.radius),g=[new z(g,0),new z(c-g,0),...fb(new z(c-g,g),g,g,270,360),new z(c,g),new z(c,e-g),...fb(new z(c-g,e-g),g,g,0,90),new z(c-g,e),new z(g,e),...fb(new z(g,e-g),g,g,90,180),new z(0,e-g),new z(0,g),...fb(new z(g,g),g,g,180,270)]);Oa(Object.assign({},b,{offset:f,pts:g,...(b.gradient?{colors:b.horizontal?
[b.gradient[0],b.gradient[1],b.gradient[1],b.gradient[0]]:[b.gradient[0],b.gradient[0],b.gradient[1],b.gradient[1]]}:{})}))}}function ab(b){let {p1:c,p2:e}=b;if(!c||!e)throw Error('drawLine() requires properties "p1" and "p2".');var f=b.width||1;f=e.sub(c).unit().normal().scale(.5*f);f=[c.sub(f),c.add(f),e.add(f),e.sub(f)].map(g=>({pos:new z(g.x,g.y),uv:new z(0),color:b.color??Z.WHITE,opacity:b.opacity??1}));sb(f,[0,1,3,1,2,3],b.fixed,A.defTex,b.shader,b.uniform)}function Kb(b){let c=b.pts;if(!c)throw Error('drawLines() requires property "pts".');
if(!(2>c.length))if(b.radius&&3<=c.length){var e=c[0].sdist(c[1]);for(let f=1;f<c.length-1;f++)e=Math.min(c[f].sdist(c[f+1]),e);ab(Object.assign({},b,{p1:c[0],p2:c[1]}));for(e=1;e<c.length-2;e++)ab(Object.assign({},b,{p1:c[e],p2:c[e+1]}));ab(Object.assign({},b,{p1:c[c.length-2],p2:c[c.length-1]}))}else for(e=0;e<c.length-1;e++)ab(Object.assign({},b,{p1:c[e],p2:c[e+1]})),"none"!==b.join&&p(Object.assign({},b,{pos:c[e],radius:b.width/2}))}function Jb(b){if(!b.p1||!b.p2||!b.p3)throw Error('drawTriangle() requires properties "p1", "p2" and "p3".');
return Oa(Object.assign({},b,{pts:[b.p1,b.p2,b.p3]}))}function p(b){if("number"!=typeof b.radius)throw Error('drawCircle() requires property "radius".');0!==b.radius&&cc(Object.assign({},b,{radiusX:b.radius,radiusY:b.radius,angle:0}))}function cc(b){if(void 0===b.radiusX||void 0===b.radiusY)throw Error('drawEllipse() requires properties "radiusX" and "radiusY".');if(0!==b.radiusX&&0!==b.radiusY){var c=b.start??0,e=b.end??360,f=qb(b.anchor??"center").scale(new z(-b.radiusX,-b.radiusY)),g=fb(f,b.radiusX,
b.radiusY,c,e,b.resolution);g.unshift(f);f=Object.assign({},b,{pts:g,radius:0,...(b.gradient?{colors:[b.gradient[0],...Array(g.length-1).fill(b.gradient[1])]}:{})});360<=e-c&&b.outline?(!1!==b.fill&&Oa(Object.assign(f,{outline:null})),Oa(Object.assign(f,{pts:g.slice(1),fill:!1}))):Oa(f)}}function Oa(b){if(!b.pts)throw Error('drawPolygon() requires property "pts".');var c=b.pts.length;if(!(3>c)){if(ta(),aa(b.pos),Ya(b.scale),Za(b.angle),aa(b.offset),!1!==b.fill){let e=b.color??Z.WHITE,f=b.pts.map((g,
q)=>({pos:new z(g.x,g.y),uv:new z(0,0),color:b.colors&&b.colors[q]?b.colors[q].mult(e):e,opacity:b.opacity??1}));c=[...Array(c-2).keys()].map(g=>[0,g+1,g+2]).flat();sb(f,b.indices??c,b.fixed,A.defTex,b.shader,b.uniform)}b.outline&&Kb({pts:[...b.pts,b.pts[0]],radius:b.radius,width:b.outline.width,color:b.outline.color,join:b.outline.join,uniform:b.uniform,fixed:b.fixed,opacity:b.opacity});ra()}}function dc(b,c,e){Ja();I.clear(I.STENCIL_BUFFER_BIT);I.enable(I.STENCIL_TEST);I.stencilFunc(I.NEVER,1,255);
I.stencilOp(I.REPLACE,I.REPLACE,I.REPLACE);c();Ja();I.stencilFunc(e,1,255);I.stencilOp(I.KEEP,I.KEEP,I.KEEP);b();Ja();I.disable(I.STENCIL_TEST)}function ec(b,c){dc(b,c,I.EQUAL)}function fc(b,c){dc(b,c,I.NOTEQUAL)}function gc(){return(A.viewport.width+A.viewport.height)/(A.width+A.height)}function Pa(b){Ja();let c=A.width,e=A.height;A.width=A.viewport.width;A.height=A.viewport.height;b();Ja();A.width=c;A.height=e}function ja(b,c){c.pos&&(b.pos=b.pos.add(c.pos));c.scale&&(b.scale=b.scale.scale(B(c.scale)));
c.angle&&(b.angle+=c.angle);c.color&&1===b.ch.length&&(b.color=b.color.mult(c.color));c.opacity&&(b.opacity*=c.opacity)}function nb(b){let c={},e=b.replace(Vd,"$2"),f=0;for(let g of b.matchAll(Vd)){b=g.index-f;for(let q=0;q<g.groups.text.length;q++)c[q+b]=[g.groups.style];f+=g[0].length-g.groups.text.length}return{charStyleMap:c,text:e}}function wa(b){if(void 0===b.text)throw Error('formatText() requires property "text".');var c=Fb(b.font);if(""===b.text||c instanceof Ka||!c)return{width:0,height:0,
chars:[],opt:b};let {charStyleMap:e,text:f}=nb(b.text+"");var g=ud(f);if(c instanceof ic||"string"==typeof c){var q=c instanceof ic?c.fontface.family:c;c=c instanceof ic?{outline:c.outline,filter:c.filter}:{outline:null,filter:"linear"};var u=Sc[q]??{font:{tex:new vb(La,2048,2048,{filter:c.filter}),map:{},size:64},cursor:new z(0),outline:c.outline};Sc[q]||(Sc[q]=u);c=u.font;for(var t of g)if(!u.font.map[t]){var v=xf;v.clearRect(0,0,jc.width,jc.height);v.font=`${c.size}px ${q}`;v.textBaseline="top";
v.textAlign="left";v.fillStyle="#ffffff";var l=v.measureText(t);l=Math.ceil(l.width);var w=c.size;u.outline&&(v.lineJoin="round",v.lineWidth=2*u.outline.width,v.strokeStyle=u.outline.color.toHex(),v.strokeText(t,u.outline.width,u.outline.width),l+=2*u.outline.width,w+=3*u.outline.width);v.fillText(t,u.outline?.width??0,u.outline?.width??0);v=v.getImageData(0,0,l,w);if(2048<u.cursor.x+l&&(u.cursor.x=0,u.cursor.y+=w,2048<u.cursor.y))throw Error("Font atlas exceeds character limit");c.tex.update(v,u.cursor.x,
u.cursor.y);c.map[t]=new oa(u.cursor.x,u.cursor.y,l,w);u.cursor.x+=l}}l=b.size||c.size;q=B(b.scale??1).scale(l/c.size);w=b.lineSpacing??0;let G=b.letterSpacing??0,H=0;u=t=0;v=[];let D=[],O=0,P=null,xa=null;for(;O<g.length;){let fa=g[O];if("\n"===fa)u+=l+w,v.push({width:H-G,chars:D}),xa=P=null,H=0,D=[];else{let U=c.map[fa];if(U){let za=U.w*q.x;b.width&&H+za>b.width&&(u+=l+w,null!=P&&(O-=D.length-P,fa=g[O],U=c.map[fa],za=U.w*q.x,D=D.slice(0,P-1),H=xa),P=null,xa=null,v.push({width:H-G,chars:D}),H=0,
D=[]);D.push({tex:c.tex,width:U.w,height:U.h,quad:new oa(U.x/c.tex.width,U.y/c.tex.height,U.w/c.tex.width,U.h/c.tex.height),ch:fa,pos:new z(H,u),opacity:b.opacity??1,color:b.color??Z.WHITE,scale:B(q),angle:0});" "===fa&&(P=D.length,xa=H);H+=za;t=Math.max(t,H);H+=G}}O++}v.push({width:H-G,chars:D});u+=l;b.width&&(t=b.width);g=[];for(let fa of v){v=(t-fa.width)*Hd(b.align??"left");for(let U of fa.chars){w=c.map[U.ch];l=g.length;(U.pos=U.pos.add(v,0).add(w.w*q.x*.5,w.h*q.y*.5),b.transform)&&(w="function"==
typeof b.transform?b.transform(l,U.ch):b.transform)&&ja(U,w);if(e[l]){w=e[l];for(let za of w)w=b.styles[za],(w="function"==typeof w?w(l,U.ch):w)&&ja(U,w)}g.push(U)}}return{width:t,height:u,chars:g,opt:b}}function Lb(b){Qa(wa(b))}function Qa(b){ta();aa(b.opt.pos);Za(b.opt.angle);aa(qb(b.opt.anchor??"topleft").add(1,1).scale(b.width,b.height).scale(-.5));b.chars.forEach(c=>{$a({tex:c.tex,width:c.width,height:c.height,pos:c.pos,scale:c.scale,angle:c.angle,color:c.color,opacity:c.opacity,quad:c.quad,
anchor:"center",uniform:b.opt.uniform,shader:b.opt.shader,fixed:b.opt.fixed})});ra()}function ma(){return A.width}function na(){return A.height}function Vb(b){return new z((b.x-A.viewport.x)*ma()/A.viewport.width,(b.y-A.viewport.y)*na()/A.viewport.height)}function m(b){return new z(b.x*A.viewport.width/A.width,b.y*A.viewport.height/A.height)}function x(){return Vb(F.mousePos())}function C(){return F.dt()*da.timeScale}function N(...b){return 0<b.length&&(E.cam.pos=B(...b)),E.cam.pos?E.cam.pos.clone():
kc()}function ka(...b){return 0<b.length&&(E.cam.scale=B(...b)),E.cam.scale.clone()}function qa(b){return void 0!==b&&(E.cam.angle=b),E.cam.angle}function bb(b=12){E.cam.shake+=b}function Tc(b){return E.cam.transform.multVec2(b)}function Uc(b){return E.cam.transform.invert().multVec2(b)}function lc(b){let c=new Xa;return b.pos&&c.translate(b.pos),b.scale&&c.scale(b.scale),b.angle&&c.rotate(b.angle),b.parent?c.mult(b.parent.transform):c}function yc(b=[]){let c=new Map,e={},f=new Eb,g=[],q=null,u=!1,
t={id:qf(),hidden:!1,transform:new Xa,children:[],parent:null,set paused(l){if(l!==u){u=l;for(let w of g)w.paused=l}},get paused(){return u},add(l=[]){l=Array.isArray(l)?yc(l):l;if(l.parent)throw Error("Cannot add a game obj that already has a parent.");return l.parent=this,l.transform=lc(l),this.children.push(l),l.trigger("add",l),E.events.trigger("add",l),l},readd(l){let w=this.children.indexOf(l);return-1!==w&&(this.children.splice(w,1),this.children.push(l)),l},remove(l){let w=this.children.indexOf(l);
if(-1!==w){l.parent=null;this.children.splice(w,1);let G=h(H=>{H.trigger("destroy");E.events.trigger("destroy",H);H.children.forEach(D=>G(D))},"trigger");G(l)}},removeAll(l){if(l)this.get(l).forEach(w=>this.remove(w));else for(let w of[...this.children])this.remove(w)},update(){this.paused||(this.children.sort((l,w)=>(l.z??0)-(w.z??0)).forEach(l=>l.update()),this.trigger("update"))},draw(){if(!this.hidden){this.canvas&&this.canvas.bind();var l=A.fixed;this.fixed&&(A.fixed=!0);ta();aa(this.pos);Ya(this.scale);
Za(this.angle);var w=this.children.sort((G,H)=>(G.z??0)-(H.z??0));if(this.mask){let G={intersect:ec,subtract:fc}[this.mask];if(!G)throw Error(`Invalid mask func: "${this.mask}"`);G(()=>{w.forEach(H=>H.draw())},()=>{this.trigger("draw")})}else this.trigger("draw"),w.forEach(G=>G.draw());ra();A.fixed=l;this.canvas&&this.canvas.unbind()}},drawInspect(){this.hidden||(ta(),aa(this.pos),Ya(this.scale),Za(this.angle),this.children.sort((l,w)=>(l.z??0)-(w.z??0)).forEach(l=>l.drawInspect()),this.trigger("drawInspect"),
ra())},use(l){if(l){if("string"==typeof l)return this.use({id:l});var w=[];l.id&&(this.unuse(l.id),e[l.id]=[],w=e[l.id],c.set(l.id,l));for(let H in l)if(!vf.has(H)){var G=Object.getOwnPropertyDescriptor(l,H);if("function"==typeof G.value&&(l[H]=l[H].bind(this)),G.set&&Object.defineProperty(l,H,{set:G.set.bind(this)}),G.get&&Object.defineProperty(l,H,{get:G.get.bind(this)}),wf.has(H))w.push(this.on(H,"add"===H?()=>{q=h(D=>w.push(D),"onCurCompCleanup");l[H]();q=null}:l[H]).cancel);else if(void 0===
this[H])Object.defineProperty(this,H,{get:()=>l[H],set:D=>l[H]=D,configurable:!0,enumerable:!0}),w.push(()=>delete this[H]);else throw Error(`Duplicate component property: "${H}"`);}G=h(()=>{if(l.require)for(let H of l.require)if(!this.c(H))throw Error(`Component "${l.id}" requires component "${H}"`);},"checkDeps");l.destroy&&w.push(l.destroy.bind(this));this.exists()?(G(),l.add&&(q=h(H=>w.push(H),"onCurCompCleanup"),l.add.call(this),q=null)):l.require&&w.push(this.on("add",G).cancel)}},unuse(l){e[l]&&
(e[l].forEach(w=>w()),delete e[l]);c.has(l)&&c.delete(l)},c(l){return c.get(l)},get(l,w={}){let G=w.recursive?this.children.flatMap(h(function O(D){return[D,...D.children.flatMap(O)]},"recurse")):this.children;if(G=G.filter(D=>l?D.is(l):!0),w.liveUpdate){let D=h(P=>w.recursive?this.isAncestorOf(P):P.parent===this,"isChild"),O=[];O.push(Vc(P=>{D(P)&&P.is(l)&&G.push(P)}));O.push(Wd(P=>{if(D(P)&&P.is(l)){let xa=G.findIndex(fa=>fa.id===P.id);-1!==xa&&G.splice(xa,1)}}));this.onDestroy(()=>{for(let P of O)P.cancel()})}return G},
isAncestorOf(l){return l.parent?l.parent===this||this.isAncestorOf(l.parent):!1},exists(){return E.root.isAncestorOf(this)},is(l){if("*"===l)return!0;if(Array.isArray(l)){for(let w of l)if(!this.c(w))return!1;return!0}return null!=this.c(l)},on(l,w){let G=f.on(l,w.bind(this));return q&&q(()=>G.cancel()),G},trigger(l,...w){f.trigger(l,...w);E.objEvents.trigger(l,this,...w)},destroy(){this.parent&&this.parent.remove(this)},inspect(){let l={};for(let [w,G]of c)l[w]=G.inspect?G.inspect():null;return l},
onAdd(l){return this.on("add",l)},onUpdate(l){return this.on("update",l)},onDraw(l){return this.on("draw",l)},onDestroy(l){return this.on("destroy",l)},clearEvents(){f.clear()}},v="onKeyPress onKeyPressRepeat onKeyDown onKeyRelease onMousePress onMouseDown onMouseRelease onMouseMove onCharInput onMouseMove onTouchStart onTouchMove onTouchEnd onScroll onGamepadButtonPress onGamepadButtonDown onGamepadButtonRelease onGamepadStick".split(" ");for(let l of v)t[l]=(...w)=>{let G=F[l](...w);return g.push(G),
t.onDestroy(()=>G.cancel()),G};for(let l of b)t.use(l);return t}function hb(b,c,e){return E.objEvents[b]||(E.objEvents[b]=new Oc),E.objEvents.on(b,(f,...g)=>{f.is(c)&&e(f,...g)})}function Xd(b,c,e){return hb("collide",b,(f,g,q)=>g.is(c)&&e(f,g,q))}function Yd(b,c,e){return hb("collideUpdate",b,(f,g,q)=>g.is(c)&&e(f,g,q))}function Zd(b,c,e){return hb("collideEnd",b,(f,g,q)=>g.is(c)&&e(f,g,q))}function mc(b,c){Wc(b,{recursive:!0}).forEach(c);Vc(b,c)}function $d(b,c){let e=[];return mc(b,f=>{if(!f.area)throw Error("onHover() requires the object to have area() component");
e.push(f.onHover(()=>c(f)))}),Db.join(e)}function ae(b,c){let e=[];return mc(b,f=>{if(!f.area)throw Error("onHoverUpdate() requires the object to have area() component");e.push(f.onHoverUpdate(()=>c(f)))}),Db.join(e)}function be(b,c){let e=[];return mc(b,f=>{if(!f.area)throw Error("onHoverEnd() requires the object to have area() component");e.push(f.onHoverEnd(()=>c(f)))}),Db.join(e)}function ce(b){E.gravity=b}function de(){return E.gravity}function ee(...b){1===b.length||2===b.length?(A.bgColor=
Y(b[0]),b[1]&&(A.bgAlpha=b[1])):(3===b.length||4===b.length)&&(A.bgColor=Y(b[0],b[1],b[2]),b[3]&&(A.bgAlpha=b[3]));I.clearColor(A.bgColor.r/255,A.bgColor.g/255,A.bgColor.b/255,A.bgAlpha)}function fe(){return A.bgColor.clone()}function nc(...b){return{id:"pos",pos:B(...b),moveBy(...c){this.pos=this.pos.add(B(...c))},move(...c){this.moveBy(B(...c).scale(C()))},moveTo(...c){if("number"==typeof c[0]&&"number"==typeof c[1])return this.moveTo(B(c[0],c[1]),c[2]);let e=c[0];c=c[1];if(void 0===c)this.pos=
B(e);else{var f=e.sub(this.pos);f.len()<=c*C()?this.pos=B(e):this.move(f.unit().scale(c))}},worldPos(){return this.parent?this.parent.transform.multVec2(this.pos):this.pos},screenPos(){let c=this.worldPos();return Mb(this)?c:Tc(c)},inspect(){return`(${Math.round(this.pos.x)}, ${Math.round(this.pos.y)})`},drawInspect(){p({color:Y(255,0,0),radius:4/gc()})}}}function oc(...b){return 0===b.length?oc(1):{id:"scale",scale:B(...b),scaleTo(...c){this.scale=B(...c)},scaleBy(...c){this.scale.scale(B(...c))},
inspect(){return`(${Nb(this.scale.x,2)}, ${Nb(this.scale.y,2)})`}}}function ge(b){return{id:"rotate",angle:b??0,rotateBy(c){this.angle+=c},rotateTo(c){this.angle=c},inspect(){return`${Math.round(this.angle)}`}}}function he(...b){return{id:"color",color:Y(...b),inspect(){return this.color.toString()}}}function Nb(b,c){return Number(b.toFixed(c))}function ie(b){return{id:"opacity",opacity:b??1,inspect(){return`${Nb(this.opacity,1)}`},fadeOut(c=1,e=xc.linear){return Xc(this.opacity,0,c,f=>this.opacity=
f,e)}}}function zc(b){if(!b)throw Error("Please define an anchor");return{id:"anchor",anchor:b,inspect(){return"string"==typeof this.anchor?this.anchor:this.anchor.toString()}}}function je(b){return{id:"z",z:b,inspect(){return`${this.z}`}}}function ke(b,c){return{id:"follow",require:["pos"],follow:{obj:b,offset:c??B(0)},add(){b.exists()&&(this.pos=this.follow.obj.pos.add(this.follow.offset))},update(){b.exists()&&(this.pos=this.follow.obj.pos.add(this.follow.offset))}}}function le(b,c){let e="number"==
typeof b?z.fromAngle(b):b.unit();return{id:"move",require:["pos"],update(){this.move(e.scale(c))}}}function me(b={}){let c=b.distance??200,e=!1;return{id:"offscreen",require:["pos"],isOffScreen(){let f=this.screenPos(),g=new va(B(0),ma(),na());return!Qb(g,f)&&g.sdistToPoint(f)>c*c},onExitScreen(f){return this.on("exitView",f)},onEnterScreen(f){return this.on("enterView",f)},update(){this.isOffScreen()?(e||(this.trigger("exitView"),e=!0),b.hide&&(this.hidden=!0),b.pause&&(this.paused=!0),b.destroy&&
this.destroy()):(e&&(this.trigger("enterView"),e=!1),b.hide&&(this.hidden=!1),b.pause&&(this.paused=!1))}}}function Mb(b){return b.fixed?!0:b.parent?Mb(b.parent):!1}function ne(b={}){let c={},e=new Set;return{id:"area",collisionIgnore:b.collisionIgnore??[],add(){this.area.cursor&&this.onHover(()=>F.setCursor(this.area.cursor));this.onCollideUpdate((f,g)=>{c[f.id]||this.trigger("collide",f,g);c[f.id]=g;e.add(f.id)})},update(){for(let f in c)e.has(Number(f))||(this.trigger("collideEnd",c[f].target),
delete c[f]);e.clear()},drawInspect(){let f=this.localArea();ta();Ya(this.area.scale);aa(this.area.offset);let g={outline:{width:4/gc(),color:Y(0,0,255)},anchor:this.anchor,fill:!1,fixed:Mb(this)};f instanceof va?sa({...g,pos:f.pos,width:f.width,height:f.height}):f instanceof Tb?Oa({...g,pts:f.pts}):f instanceof Kd&&p({...g,pos:f.center,radius:f.radius});ra()},area:{shape:b.shape??null,scale:b.scale?B(b.scale):B(1),offset:b.offset??B(0),cursor:b.cursor??null},isClicked(){return F.isMousePressed()&&
this.isHovering()},isHovering(){let f=Mb(this)?x():Uc(x());return this.hasPoint(f)},checkCollision(f){return c[f.id]??null},getCollisions(){return Object.values(c)},isColliding(f){return!!c[f.id]},isOverlapping(f){return(f=c[f.id])&&f.hasOverlap()},onClick(f){let g=F.onMousePress("left",()=>{this.isHovering()&&f()});return this.onDestroy(()=>g.cancel()),g},onHover(f){let g=!1;return this.onUpdate(()=>{g?g=this.isHovering():this.isHovering()&&(g=!0,f())})},onHoverUpdate(f){return this.onUpdate(()=>
{this.isHovering()&&f()})},onHoverEnd(f){let g=!1;return this.onUpdate(()=>{g?this.isHovering()||(g=!1,f()):g=this.isHovering()})},onCollide(f,g){if("function"==typeof f&&void 0===g)return this.on("collide",f);if("string"==typeof f)return this.onCollide((q,u)=>{q.is(f)&&g(q,u)})},onCollideUpdate(f,g){if("function"==typeof f&&void 0===g)return this.on("collideUpdate",f);if("string"==typeof f)return this.on("collideUpdate",(q,u)=>q.is(f)&&g(q,u))},onCollideEnd(f,g){if("function"==typeof f&&void 0===
g)return this.on("collideEnd",f);if("string"==typeof f)return this.on("collideEnd",q=>q.is(f)&&g(q))},hasPoint(f){return Jc(this.worldArea(),f)},resolveCollision(f){(f=this.checkCollision(f))&&!f.resolved&&(this.pos=this.pos.add(f.displacement),f.resolved=!0)},localArea(){return this.area.shape?this.area.shape:this.renderArea()},worldArea(){let f=this.localArea();if(!(f instanceof Tb||f instanceof va))throw Error("Only support polygon and rect shapes for now");let g=this.transform.clone().scale(B(this.area.scale??
1)).translate(this.area.offset);if(f instanceof va){let q=qb(this.anchor||"topleft").add(1,1).scale(-.5).scale(f.width,f.height);g.translate(q)}return f.transform(g)},screenArea(){let f=this.worldArea();return Mb(this)?f:f.transform(E.cam.transform)}}}function pb(b){return{color:b.color,opacity:b.opacity,anchor:b.anchor,outline:b.outline,shader:b.shader,uniform:b.uniform}}function Ac(b,c={}){let e=null,f=null,g=null,q=new Ia;if(!b)throw Error("Please pass the resource name or data to sprite()");let u=
h((t,v,l,w)=>{let G=B(1,1);return l&&w?(G.x=l/(t.width*v.w),G.y=w/(t.height*v.h)):l?(G.x=l/(t.width*v.w),G.y=G.x):w&&(G.y=w/(t.height*v.h),G.x=G.y),G},"calcTexScale");return{id:"sprite",width:0,height:0,frame:c.frame||0,quad:c.quad||new oa(0,0,1,1),animSpeed:c.animSpeed??1,flipX:c.flipX??!1,flipY:c.flipY??!1,draw(){if(e){var t=e.frames[this.frame??0];if(!t)throw Error(`Frame not found: ${this.frame??0}`);if(e.slice9){let {left:D,right:O,top:P,bottom:xa}=e.slice9;var v=e.tex.width*t.w,l=e.tex.height*
t.h,w=this.width-D-O,G=this.height-P-xa,H=D/v;v=O/v;let fa=1-H-v,U=P/l;l=xa/l;let za=1-U-l;w=[ea(0,0,H,U),ea(H,0,fa,U),ea(H+fa,0,v,U),ea(0,U,H,za),ea(H,U,fa,za),ea(H+fa,U,v,za),ea(0,U+za,H,l),ea(H,U+za,fa,l),ea(H+fa,U+za,v,l),ea(0,0,D,P),ea(D,0,w,P),ea(D+w,0,O,P),ea(0,P,D,G),ea(D,P,w,G),ea(D+w,P,O,G),ea(0,P+G,D,xa),ea(D,P+G,w,xa),ea(D+w,P+G,O,xa)];for(G=0;9>G;G++)H=w[G],v=w[G+9],ob(Object.assign(pb(this),{pos:v.pos(),tex:e.tex,quad:t.scale(H),flipX:this.flipX,flipY:this.flipY,tiled:c.tiled,width:v.w,
height:v.h}))}else ob(Object.assign(pb(this),{tex:e.tex,quad:t.scale(this.quad??new oa(0,0,1,1)),flipX:this.flipX,flipY:this.flipY,tiled:c.tiled,width:this.width,height:this.height}))}},add(){let t=h(l=>{let w=l.frames[0].clone();c.quad&&(w=w.scale(c.quad));let G=u(l.tex,w,c.width,c.height);this.width=l.tex.width*w.w*G.x;this.height=l.tex.height*w.h*G.y;c.anim&&this.play(c.anim);e=l;q.trigger(e)},"setSpriteData"),v=ya(b);v?v.onLoad(t):Bc(()=>t(ya(b).data))},update(){if(f){var t=e.anims[f.name];if("number"==
typeof t)this.frame=t;else{if(0===t.speed)throw Error("Sprite anim speed cannot be 0");f.timer+=C()*this.animSpeed;f.timer>=1/f.speed&&(f.timer=0,this.frame+=g,(this.frame<Math.min(t.from,t.to)||this.frame>Math.max(t.from,t.to))&&(f.loop?f.pingpong?(this.frame-=g,g*=-1,this.frame+=g):this.frame=t.from:(this.frame=t.to,f.onEnd(),this.stop())))}}},play(t,v={}){if(e){var l=e.anims[t];if(void 0===l)throw Error(`Anim not found: ${t}`);f&&this.stop();f="number"==typeof l?{name:t,timer:0,loop:!1,pingpong:!1,
speed:0,onEnd:()=>{}}:{name:t,timer:0,loop:v.loop??l.loop??!1,pingpong:v.pingpong??l.pingpong??!1,speed:v.speed??l.speed??10,onEnd:v.onEnd??(()=>{})};g="number"==typeof l?null:l.from<l.to?1:-1;this.frame="number"==typeof l?l:l.from;this.trigger("animStart",t)}else q.add(()=>this.play(t,v))},stop(){if(f){var t=f.name;f=null;this.trigger("animEnd",t)}},numFrames(){return e?.frames.length??0},curAnim(){return f?.name},onAnimEnd(t){return this.on("animEnd",t)},onAnimStart(t){return this.on("animStart",
t)},renderArea(){return new va(B(0),this.width,this.height)},inspect(){if("string"==typeof b)return`"${b}"`}}}function oe(b,c={}){function e(g){let q=wa(Object.assign(pb(g),{text:g.text+"",size:g.textSize,font:g.font,width:c.width&&g.width,align:g.align,letterSpacing:g.letterSpacing,lineSpacing:g.lineSpacing,transform:g.textTransform,styles:g.textStyles}));return c.width||(g.width=q.width/(g.scale?.x||1)),g.height=q.height/(g.scale?.y||1),q}h(e,"update");let f={id:"text",set text(g){b=g;e(this)},
get text(){return b},textSize:c.size??36,font:c.font,width:c.width??0,height:0,align:c.align,lineSpacing:c.lineSpacing,letterSpacing:c.letterSpacing,textTransform:c.transform,textStyles:c.styles,add(){Bc(()=>e(this))},draw(){Qa(e(this))},renderArea(){return new va(B(0),this.width,this.height)}};return e(f),f}function pe(b,c={}){if(3>b.length)throw Error(`Polygon's need more than two points, ${b.length} points provided`);return{id:"polygon",pts:b,colors:c.colors,radius:c.radius,draw(){Oa(Object.assign(pb(this),
{pts:this.pts,colors:this.colors,radius:this.radius,fill:c.fill}))},renderArea(){return new Tb(this.pts)},inspect(){return this.pts.map(e=>`[${e.x},${e.y}]`).join(",")}}}function qe(b,c,e={}){return{id:"rect",width:b,height:c,radius:e.radius||0,draw(){sa(Object.assign(pb(this),{width:this.width,height:this.height,radius:this.radius,fill:e.fill}))},renderArea(){return new va(B(0),this.width,this.height)},inspect(){return`${Math.ceil(this.width)}, ${Math.ceil(this.height)}`}}}function re(b,c){return{id:"rect",
width:b,height:c,draw(){$a(Object.assign(pb(this),{width:this.width,height:this.height}))},renderArea(){return new va(B(0),this.width,this.height)},inspect(){return`${Math.ceil(this.width)}, ${Math.ceil(this.height)}`}}}function se(b,c={}){return{id:"circle",radius:b,draw(){p(Object.assign(pb(this),{radius:this.radius,fill:c.fill}))},renderArea(){return new va(new z(this.anchor?0:-this.radius),2*this.radius,2*this.radius)},inspect(){return`${Math.ceil(this.radius)}`}}}function te(b=1,c=Y(0,0,0)){return{id:"outline",
outline:{width:b,color:c}}}function Cc(){return{id:"timer",wait(b,c){let e=[];c&&e.push(c);let f=0,g=this.onUpdate(()=>{f+=C();f>=b&&(e.forEach(q=>q()),g.cancel())});return{get paused(){return g.paused},set paused(q){g.paused=q},cancel:g.cancel,onEnd(q){e.push(q)},then(q){return this.onEnd(q),this}}},loop(b,c){let e=null,f=h(()=>{e=this.wait(b,f);c()},"newAction");return e=this.wait(0,f),{get paused(){return e.paused},set paused(g){e.paused=g},cancel:()=>e.cancel()}},tween(b,c,e,f,g=xc.linear){let q=
0,u=[],t=this.onUpdate(()=>{q+=C();let v=Math.min(q/e,1);f(eb(b,c,g(v)));1===v&&(t.cancel(),f(c),u.forEach(l=>l()))});return{get paused(){return t.paused},set paused(v){t.paused=v},onEnd(v){u.push(v)},then(v){return this.onEnd(v),this},cancel(){t.cancel()},finish(){t.cancel();f(c);u.forEach(v=>v())}}}}}function ue(b={}){let c=null,e=null,f=!1;return{id:"body",require:["pos","area"],vel:new z(0),jumpForce:b.jumpForce??640,gravityScale:b.gravityScale??1,isStatic:b.isStatic??!1,mass:b.mass??1,add(){if(0===
this.mass)throw Error("Can't set body mass to 0");this.onCollideUpdate((g,q)=>{if(g.is("body")&&!q.resolved&&(this.trigger("beforePhysicsResolve",q),g.trigger("beforePhysicsResolve",q.reverse()),!(q.resolved||this.isStatic&&g.isStatic))){if(this.isStatic||g.isStatic){var u=!this.isStatic&&g.isStatic?q:q.reverse();u.source.pos=u.source.pos.add(u.displacement);u.source.transform=lc(u.source)}else u=this.mass+g.mass,this.pos=this.pos.add(q.displacement.scale(g.mass/u)),g.pos=g.pos.add(q.displacement.scale(-this.mass/
u)),this.transform=lc(this),g.transform=lc(g);q.resolved=!0;this.trigger("physicsResolve",q);g.trigger("physicsResolve",q.reverse())}});this.onPhysicsResolve(g=>{E.gravity&&(g.isBottom()&&this.isFalling()?(this.vel.y=0,c=g.target,e=g.target.pos,f?f=!1:this.trigger("ground",c)):g.isTop()&&this.isJumping()&&(this.vel.y=0,this.trigger("headbutt",g.target)))})},update(){if(E.gravity&&!this.isStatic){if(f&&(c=null,e=null,this.trigger("fallOff"),f=!1),c){if(this.isColliding(c)&&c.exists()&&c.is("body")){!c.pos.eq(e)&&
!1!==b.stickToPlatform&&this.moveBy(c.pos.sub(e));e=c.pos;return}f=!0}var g=this.vel.y;this.vel.y+=E.gravity*this.gravityScale*C();this.vel.y=Math.min(this.vel.y,b.maxVelocity??65536);0>g&&0<=this.vel.y&&this.trigger("fall");this.move(this.vel)}},onPhysicsResolve(g){return this.on("physicsResolve",g)},onBeforePhysicsResolve(g){return this.on("beforePhysicsResolve",g)},curPlatform(){return c},isGrounded(){return null!==c},isFalling(){return 0<this.vel.y},isJumping(){return 0>this.vel.y},jump(g){e=
c=null;this.vel.y=-g||-this.jumpForce},onGround(g){return this.on("ground",g)},onFall(g){return this.on("fall",g)},onFallOff(g){return this.on("fallOff",g)},onHeadbutt(g){return this.on("headbutt",g)}}}function ve(b=2){let c=b;return{id:"doubleJump",require:["body"],numJumps:b,add(){this.onGround(()=>{c=this.numJumps})},doubleJump(e){0>=c||(c<this.numJumps&&this.trigger("doubleJump"),c--,this.jump(e))},onDoubleJump(e){return this.on("doubleJump",e)},inspect(){return`${c}`}}}function we(b,c){return{id:"shader",
shader:b,...("function"==typeof c?{uniform:c(),update(){this.uniform=c()}}:{uniform:c})}}function xe(){return{id:"fixed",fixed:!0}}function Yc(b){return{id:"stay",stay:!0,scenesToStay:b}}function ye(b,c){if(null==b)throw Error("health() requires the initial amount of hp");return{id:"health",hurt(e=1){this.setHP(b-e);this.trigger("hurt",e)},heal(e=1){let f=b;this.setHP(b+e);this.trigger("heal",b-f)},hp(){return b},maxHP(){return c??null},setMaxHP(e){c=e},setHP(e){b=c?Math.min(c,e):e;0>=b&&this.trigger("death")},
onHurt(e){return this.on("hurt",e)},onHeal(e){return this.on("heal",e)},onDeath(e){return this.on("death",e)},inspect(){return`${b}`}}}function ze(b,c={}){if(null==b)throw Error("lifespan() requires time");let e=c.fade??0;return{id:"lifespan",async add(){await Ae(b);0<e&&this.opacity&&await Xc(this.opacity,0,e,f=>this.opacity=f,xc.linear);this.destroy()}}}function Be(b,c,e){function f(v){u[v]||(u[v]={enter:new Ia,end:new Ia,update:new Ia,draw:new Ia})}function g(v,l,w){return f(l),u[l][v].add(w)}
function q(v,l,...w){f(l);u[l][v].trigger(...w)}if(!b)throw Error("state() requires an initial state");let u={};h(f,"initStateEvents");h(g,"on");h(q,"trigger");let t=!1;return{id:"state",state:b,enterState(v,...l){if(t=!0,c&&!c.includes(v))throw Error(`State not found: ${v}`);let w=this.state;if(e){if(!e?.[w])return;let G="string"==typeof e[w]?[e[w]]:e[w];if(!G.includes(v))throw Error(`Cannot transition state from "${w}" to "${v}". Available transitions: ${G.map(H=>`"${H}"`).join(", ")}`);}q("end",
w,...l);this.state=v;q("enter",v,...l);q("enter",`${w} -> ${v}`,...l)},onStateTransition(v,l,w){return g("enter",`${v} -> ${l}`,w)},onStateEnter(v,l){return g("enter",v,l)},onStateUpdate(v,l){return g("update",v,l)},onStateDraw(v,l){return g("draw",v,l)},onStateEnd(v,l){return g("end",v,l)},update(){t||(q("enter",b),t=!0);q("update",this.state)},draw(){q("draw",this.state)},inspect(){return this.state}}}function Ce(b=1){let c=0,e=!1;return{require:["opacity"],add(){this.opacity=0},update(){e||(c+=
C(),this.opacity=ib(c,0,b,0,1),c>=b&&(this.opacity=1,e=!0))}}}function De(b="intersect"){return{id:"mask",mask:b}}function Ee(b){return{add(){this.canvas=b}}}function Bc(b){T.loaded?b():E.events.on("load",b)}function Fe(b,c){E.scenes[b]=c}function Ge(b,...c){if(!E.scenes[b])throw Error(`Scene not found: ${b}`);E.events.onOnce("frameEnd",()=>{E.events.trigger("sceneLeave",b);F.events.clear();E.events.clear();E.objEvents.clear();[...E.root.children].forEach(e=>{(!e.stay||e.scenesToStay&&!e.scenesToStay.includes(b))&&
E.root.remove(e)});E.root.clearEvents();Zc();E.cam={pos:null,scale:B(1),angle:0,shake:0,transform:new Xa};E.scenes[b](...c)})}function He(b){return E.events.on("sceneLeave",b)}function Ie(b,c){try{return JSON.parse(window.localStorage[b])}catch{return c?($c(b,c),c):null}}function $c(b,c){window.localStorage[b]=JSON.stringify(c)}function ad(b,...c){b=b(xb);let e;"function"==typeof b?e=b(...c)(xb):e=b;for(let f in e)xb[f]=e[f],!1!==a.global&&(window[f]=e[f]);return xb}function kc(){return B(ma()/2,
na()/2)}function bd(b={}){let c=B(0),e=b.isObstacle??!1,f=b.cost??0,g=b.edges??[],q=h(()=>{let t={left:1,top:2,right:4,bottom:8};return g.map(v=>t[v]||0).reduce((v,l)=>v|l,0)},"getEdgeMask"),u=q();return{id:"tile",tilePosOffset:b.offset??B(0),set tilePos(t){let v=this.getLevel();c=t.clone();this.pos=B(this.tilePos.x*v.tileWidth(),this.tilePos.y*v.tileHeight()).add(this.tilePosOffset)},get tilePos(){return c},set isObstacle(t){e!==t&&(e=t,this.getLevel().invalidateNavigationMap())},get isObstacle(){return e},
set cost(t){f!==t&&(f=t,this.getLevel().invalidateNavigationMap())},get cost(){return f},set edges(t){g=t;u=q();this.getLevel().invalidateNavigationMap()},get edges(){return g},get edgeMask(){return u},getLevel(){return this.parent},moveLeft(){this.tilePos=this.tilePos.add(B(-1,0))},moveRight(){this.tilePos=this.tilePos.add(B(1,0))},moveUp(){this.tilePos=this.tilePos.add(B(0,-1))},moveDown(){this.tilePos=this.tilePos.add(B(0,1))}}}function Je(b,c){if(!c.tileWidth||!c.tileHeight)throw Error("Must provide tileWidth and tileHeight.");
let e=pc([nc(c.pos??B(0))]),f=b.length,g=0,q=null,u=null,t=null,v=null,l=h(y=>y.x+y.y*g,"tile2Hash"),w=h(y=>B(Math.floor(y%g),Math.floor(y/g)),"hash2Tile"),G=h(()=>{q=[];for(let y of e.children)H(y)},"createSpatialMap"),H=h(y=>{let K=l(y.tilePos);q[K]?q[K].push(y):q[K]=[y]},"insertIntoSpatialMap"),D=h(y=>{let K=l(y.tilePos);q[K]&&(y=q[K].indexOf(y),0<=y&&q[K].splice(y,1))},"removeFromSpatialMap"),O=h(()=>{let y=!1;for(let K of e.children){let L=e.pos2Tile(K.pos);K.tilePos.x==L.x&&K.tilePos.y==L.y||
(y=!0,D(K),K.tilePos.x=L.x,K.tilePos.y=L.y,H(K))}y&&e.trigger("spatial_map_changed")},"updateSpatialMap"),P=h(()=>{let y=e.getSpatialMap();var K=e.numRows()*e.numColumns();u?u.length=K:u=Array(K);u.fill(1,0,K);for(K=0;K<y.length;K++){let L=y[K];if(L){let S=0;for(let ba of L)if(ba.isObstacle){S=1/0;break}else S+=ba.cost;u[K]=S||1}}},"createCostMap"),xa=h(()=>{let y=e.getSpatialMap();var K=e.numRows()*e.numColumns();t?t.length=K:t=Array(K);t.fill(15,0,K);for(K=0;K<y.length;K++){let L=y[K];if(L){let S=
L.length,ba=15;for(let X=0;X<S;X++)ba|=L[X].edgeMask;t[K]=ba}}},"createEdgeMap"),fa=h(()=>{var y=e.numRows()*e.numColumns();let K=h((L,S)=>{let ba=[];for(ba.push(L);0<ba.length;)L=ba.pop(),Ke(L).forEach(X=>{0>v[X]&&(v[X]=S,ba.push(X))})},"traverse");v?v.length=y:v=Array(y);v.fill(-1,0,y);y=0;for(let L=0;L<u.length;L++)0<=v[L]||K(L,y),y++},"createConnectivityMap"),U=h((y,K)=>u[K],"getCost"),za=h((y,K)=>{y=w(y);K=w(K);return y.dist(K)},"getHeuristic"),Ke=h((y,K)=>{let L=[];var S=Math.floor(y%g);let ba=
0<S&&t[y]&1&&u[y-1]!==1/0,X=y>=g&&t[y]&2&&u[y-g]!==1/0;S=S<g-1&&t[y]&4&&u[y+1]!==1/0;let cb=y<g*f-g-1&&t[y]&8&&u[y+g]!==1/0;return K?(ba&&(X&&L.push(y-g-1),L.push(y-1),cb&&L.push(y+g-1)),X&&L.push(y-g),S&&(X&&L.push(y-g+1),L.push(y+1),cb&&L.push(y+g+1)),cb&&L.push(y+g)):(ba&&L.push(y-1),X&&L.push(y-g),S&&L.push(y+1),cb&&L.push(y+g)),L},"getNeighbours");return e.use({id:"level",tileWidth(){return c.tileWidth},tileHeight(){return c.tileHeight},spawn(y,...K){let L=B(...K),S=(()=>{if("string"==typeof y){if(c.tiles[y]){if("function"!=
typeof c.tiles[y])throw Error("Level symbol def must be a function returning a component list");return c.tiles[y](L)}if(c.wildcardTile)return c.wildcardTile(y,L)}else{if(Array.isArray(y))return y;throw Error("Expected a symbol or a component list");}})();if(!S)return null;let ba=K=!1;for(var X of S)"tile"===X.id&&(ba=!0),"pos"===X.id&&(K=!0);K||S.push(nc());ba||S.push(bd());X=e.add(S);return K&&(X.tilePosOffset=X.pos.clone()),X.tilePos=L,q&&(H(X),this.trigger("spatial_map_changed"),this.trigger("navigation_map_invalid")),
X},numColumns(){return g},numRows(){return f},levelWidth(){return g*this.tileWidth()},levelHeight(){return f*this.tileHeight()},tile2Pos(...y){return B(...y).scale(this.tileWidth(),this.tileHeight())},pos2Tile(...y){y=B(...y);return B(Math.floor(y.x/this.tileWidth()),Math.floor(y.y/this.tileHeight()))},getSpatialMap(){return q||G(),q},onSpatialMapChanged(y){return this.on("spatial_map_changed",y)},onNavigationMapInvalid(y){return this.on("navigation_map_invalid",y)},getAt(y){q||G();y=l(y);return q[y]||
[]},update(){q&&O()},invalidateNavigationMap(){v=t=u=null},onNavigationMapChanged(y){return this.on("navigation_map_changed",y)},getTilePath(y,K,L={}){if(u||P(),t||xa(),v||fa(),0>y.x||y.x>=g||0>y.y||y.y>=f||0>K.x||K.x>=g||0>K.y||K.y>=f)return null;y=l(y);var S=l(K);if(u[S]===1/0)return null;if(y===S)return[];if(-1!=v[y]&&v[y]!==v[S])return null;let ba=new Md((yb,yf)=>yb.cost<yf.cost);ba.insert({cost:0,node:y});K=new Map;K.set(y,y);let X=new Map;for(X.set(y,0);0!==ba.length;){let yb=ba.remove()?.node;
if(yb===S)break;var cb=Ke(yb,L.allowDiagonals);for(var Da of cb)cb=(X.get(yb)||0)+U(yb,Da)+za(Da,S),(!X.has(Da)||cb<X.get(Da))&&(X.set(Da,cb),ba.insert({cost:cb,node:Da}),K.set(Da,yb))}L=[];Da=S;S=w(Da);for(L.push(S);Da!==y;)Da=K.get(Da),S=w(Da),L.push(S);return L.reverse()},getPath(y,K,L={}){let S=this.tileWidth(),ba=this.tileHeight();return(L=this.getTilePath(this.pos2Tile(y),this.pos2Tile(K),L))?[y,...L.slice(1,-1).map(X=>X.scale(S,ba).add(S/2,ba/2)),K]:null}}),e.onNavigationMapInvalid(()=>{e.invalidateNavigationMap();
e.trigger("navigation_map_changed")}),b.forEach((y,K)=>{y=y.split("");g=Math.max(y.length,g);y.forEach((L,S)=>{e.spawn(L,B(S,K))})}),e}function Le(b={}){let c=null,e=null,f=null,g=null;return{id:"agent",require:["pos","tile"],agentSpeed:b.speed??100,allowDiagonals:b.allowDiagonals??!0,getDistanceToTarget(){return c?this.pos.dist(c):0},getNextLocation(){return e&&f?e[f]:null},getPath(){return e?e.slice():null},getTarget(){return c},isNavigationFinished(){return e?null===f:!0},isTargetReachable(){return null!==
e},isTargetReached(){return c?this.pos.eq(c):!0},setTarget(q){c=q;f=(e=this.getLevel().getPath(this.pos,c,{allowDiagonals:this.allowDiagonals}))?0:null;e?(g||(g=this.getLevel().onNavigationMapChanged(()=>{e&&null!==f&&(e=this.getLevel().getPath(this.pos,c,{allowDiagonals:this.allowDiagonals}),f=e?0:null,e?this.trigger("navigation-next",this,e[f]):this.trigger("navigation-ended",this))}),this.onDestroy(()=>g.cancel())),this.trigger("navigation-started",this),this.trigger("navigation-next",this,e[f])):
this.trigger("navigation-ended",this)},update(){if(e&&null!==f){if(2>this.pos.sdist(e[f])){if(f===e.length-1){this.pos=c.clone();f=null;this.trigger("navigation-ended",this);this.trigger("target-reached",this);return}f++;this.trigger("navigation-next",this,e[f])}this.moveTo(e[f],this.agentSpeed)}},onNavigationStarted(q){return this.on("navigation-started",q)},onNavigationNext(q){return this.on("navigation-next",q)},onNavigationEnded(q){return this.on("navigation-ended",q)},onTargetReached(q){return this.on("target-reached",
q)},inspect(){return JSON.stringify({target:JSON.stringify(c),path:JSON.stringify(e)})}}}function Me(b){let c=F.canvas.captureStream(b),e=ua.ctx.createMediaStreamDestination();ua.masterNode.connect(e);let f=new MediaRecorder(c),g=[];return f.ondataavailable=q=>{0<q.data.size&&g.push(q.data)},f.onerror=()=>{ua.masterNode.disconnect(e);c.getTracks().forEach(q=>q.stop())},f.start(),{resume(){f.resume()},pause(){f.pause()},stop(){return f.stop(),ua.masterNode.disconnect(e),c.getTracks().forEach(q=>q.stop()),
new Promise(q=>{f.onstop=()=>{q(new Blob(g,{type:"video/mp4"}))}})},download(q="kaboom.mp4"){this.stop().then(u=>Lc(q,u))}}}function Ne(){return document.activeElement===F.canvas}function Oe(b){b.destroy()}function cd(b=2,c=1){let e=0;return{require:["scale"],update(){let f=Math.sin(e*b)*c;0>f&&this.destroy();this.scale=B(f);e+=C()}}}function Pe(b,c={}){let e=pc([nc(b),Yc()]),f=5*(c.speed||1),g=c.scale||1;e.add([Ac(zf),oc(0),zc("center"),cd(f,g),...(c.comps??[])]);let q=e.add([Ac(Af),oc(0),zc("center"),
Cc(),...(c.comps??[])]);return q.wait(.4/f,()=>q.use(cd(f,g))),q.onDestroy(()=>e.destroy()),e}function dd(){E.root.update()}function Qe(){function b(q){if(g.push(f.clone()),q.pos&&f.translate(q.pos),q.scale&&f.scale(q.scale),q.angle&&f.rotate(q.angle),q.transform=f.clone(),q.c("area")&&!q.paused){var u=q.worldArea().bbox(),t=Math.floor(u.pos.x/e);let l=Math.floor(u.pos.y/e),w=Math.ceil((u.pos.x+u.width)/e);u=Math.ceil((u.pos.y+u.height)/e);let G=new Set;for(;t<=w;t++)for(let H=l;H<=u;H++)if(c[t])if(c[t][H]){let D=
c[t][H];a:for(let O of D)if(!O.paused&&O.exists()&&!G.has(O.id)){for(let P of q.collisionIgnore)if(O.is(P))continue a;for(let P of O.collisionIgnore)if(q.is(P))continue a;var v=qd(q.worldArea(),O.worldArea());if(v){v=new ed(q,O,v);q.trigger("collideUpdate",O,v);let P=v.reverse();P.resolved=v.resolved;O.trigger("collideUpdate",q,P)}G.add(O.id)}D.push(q)}else c[t][H]=[q];else c[t]={},c[t][H]=[q]}q.children.forEach(b);f=g.pop()}let c={},e=a.hashGridSize||64,f=new Xa,g=[];h(b,"checkObj");b(E.root)}function Re(){let b=
E.cam,c=z.fromAngle(Pb(0,360)).scale(b.shake);b.shake=eb(b.shake,0,5*C());b.transform=(new Xa).translate(kc()).scale(b.scale).rotate(b.angle).translate((b.pos??kc()).scale(-1).add(c));E.root.draw();Ja()}function Se(){let b=n();0<E.events.numListeners("loading")?E.events.trigger("loading",b):Pa(()=>{let c=ma()/2,e=B(ma()/2,na()/2).sub(B(c/2,12));sa({pos:B(0),width:ma(),height:na(),color:Y(0,0,0)});sa({pos:e,width:c,height:24,fill:!1,outline:{width:4}});sa({pos:e,width:c*b,height:24})})}function fd(b,
c){Pa(()=>{var e=B(8);ta();aa(b);let f=wa({text:c,font:"monospace",size:16,pos:e,color:Y(255,255,255),fixed:!0}),g=f.width+2*e.x;e=f.height+2*e.x;b.x+g>=ma()&&aa(B(-g,0));b.y+e>=na()&&aa(B(0,-e));sa({width:g,height:e,color:Y(0,0,0),radius:4,opacity:.8,fixed:!0});Qa(f);ra()})}function Te(){if(da.inspect){var b=null;for(var c of E.root.get("*",{recursive:!0}))if(c.c("area")&&c.isHovering()){b=c;break}if(E.root.drawInspect(),b){c=[];b=b.inspect();for(let e in b)b[e]?c.push(`${e}: ${b[e]}`):c.push(`${e}`);
fd(m(x()),c.join("\n"))}fd(B(8),`FPS: ${da.fps()}`)}da.paused&&Pa(()=>{ta();aa(ma(),0);aa(-8,8);sa({width:32,height:32,anchor:"topright",color:Y(0,0,0),opacity:.8,radius:4,fixed:!0});for(let e=1;2>=e;e++)sa({width:4,height:19.2,anchor:"center",pos:B(-32/3*e,16),color:Y(255,255,255),radius:2,fixed:!0});ra()});1!==da.timeScale&&Pa(()=>{ta();aa(ma(),na());aa(-8,-8);let e=wa({text:da.timeScale.toFixed(1),font:"monospace",size:16,color:Y(255,255,255),pos:B(-8),anchor:"botright",fixed:!0});sa({width:e.width+
16+32,height:e.height+16,anchor:"botright",color:Y(0,0,0),opacity:.8,radius:4,fixed:!0});for(let f=0;2>f;f++){let g=1>da.timeScale;Jb({p1:B(-e.width-8*(g?2:3.5),-8),p2:B(-e.width-8*(g?2:3.5),-8-e.height),p3:B(-e.width-8*(g?3.5:2),-8-e.height/2),pos:B(8*-f+(g?-4:0),0),color:Y(255,255,255),fixed:!0})}Qa(e);ra()});da.curRecording&&Pa(()=>{ta();aa(0,na());aa(24,-24);p({radius:12,color:Y(255,0,0),opacity:Ec(0,1,4*F.time()),fixed:!0});ra()});da.showLog&&0<E.logs.length&&Pa(()=>{ta();aa(0,na());aa(8,-8);
var e=[];for(let f of E.logs){let g="",q=f.msg instanceof Error?"error":"info";g+=`[time]${f.time.toFixed(2)}[/time]`;g+=" ";g+=`[${q}]${f.msg?.toString?f.msg.toString():f.msg}[/${q}]`;e.push(g)}E.logs=E.logs.filter(f=>F.time()-f.time<(a.logTime||4));e=wa({text:e.join("\n"),font:"monospace",pos:B(8,-8),anchor:"botleft",size:16,width:.6*ma(),lineSpacing:4,fixed:!0,styles:{time:{color:Y(127,127,127)},info:{color:Y(255,255,255)},error:{color:Y(255,0,127)}}});sa({width:e.width+16,height:e.height+16,anchor:"botleft",
color:Y(0,0,0),radius:4,opacity:.8,fixed:!0});Qa(e);ra()})}function Ue(b){E.events.on("loading",b)}function Ve(b){F.onResize(b)}function We(b){E.events.on("error",b)}function Xe(b){console.error(b);ua.ctx.suspend();F.run(()=>{tb();Pa(()=>{var c=ma();let e=na(),f={size:36,width:c-64,letterSpacing:4,lineSpacing:4,font:"monospace",fixed:!0};sa({width:c,height:e,color:Y(0,0,255),fixed:!0});c=wa({...f,text:"Error",pos:B(32),color:Y(255,128,0),fixed:!0});Qa(c);Lb({...f,text:b.message,pos:B(32,32+c.height+
16),fixed:!0});ra();E.events.trigger("error",b)});ub()})}function Ye(b){Ze.push(b)}function $e(){E.events.onOnce("frameEnd",()=>{F.quit();I.clear(I.COLOR_BUFFER_BIT|I.DEPTH_BUFFER_BIT|I.STENCIL_BUFFER_BIT);let b=I.getParameter(I.MAX_TEXTURE_IMAGE_UNITS);for(let c=0;c<b;c++)I.activeTexture(I.TEXTURE0+c),I.bindTexture(I.TEXTURE_2D,null),I.bindTexture(I.TEXTURE_CUBE_MAP,null);I.bindBuffer(I.ARRAY_BUFFER,null);I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,null);I.bindRenderbuffer(I.RENDERBUFFER,null);I.bindFramebuffer(I.FRAMEBUFFER,
null);La.destroy();Ze.forEach(c=>c())})}function gd(){var b=Ca;let c=I.drawingBufferWidth/b;b=I.drawingBufferHeight/b;if(a.letterbox){if(!a.width||!a.height)throw Error("Letterboxing requires width and height defined.");var e=a.width/a.height;c/b>e?(e*=b,A.viewport={x:(c-e)/2,y:0,width:e,height:b}):(e=c/e,A.viewport={x:0,y:(b-e)/2,width:c,height:e})}else{if(a.stretch&&(!a.width||!a.height))throw Error("Stretching requires width and height defined.");A.viewport={x:0,y:0,width:c,height:b}}}function Zc(){F.onHide(()=>
{a.backgroundAudio||ua.ctx.suspend()});F.onShow(()=>{a.backgroundAudio||da.paused||ua.ctx.resume()});F.onResize(()=>{if(!F.isFullscreen()){var b=a.width&&a.height;b&&!a.stretch&&!a.letterbox||(la.width=la.offsetWidth*Ca,la.height=la.offsetHeight*Ca,gd(),b||(A.frameBuffer.free(),A.frameBuffer=new hc(La,I.drawingBufferWidth,I.drawingBufferHeight),A.width=I.drawingBufferWidth/Ca,A.height=I.drawingBufferHeight/Ca))}});!1!==a.debug&&(F.onKeyPress("f1",()=>da.inspect=!da.inspect),F.onKeyPress("f2",()=>
da.clearLog()),F.onKeyPress("f8",()=>da.paused=!da.paused),F.onKeyPress("f7",()=>{da.timeScale=Nb(db(da.timeScale-.2,0,2),1)}),F.onKeyPress("f9",()=>{da.timeScale=Nb(db(da.timeScale+.2,0,2),1)}),F.onKeyPress("f10",()=>da.stepFrame()));a.burp&&F.onKeyPress("b",()=>Hb())}let af=a.root??document.body;af===document.body&&(document.body.style.width="100%",document.body.style.height="100%",document.body.style.margin="0px",document.documentElement.style.width="100%",document.documentElement.style.height=
"100%");let la=a.canvas??(()=>{let b=document.createElement("canvas");return af.appendChild(b),b})(),Ob=a.scale??1,bf=a.width&&a.height&&!a.stretch&&!a.letterbox;bf?(la.width=a.width*Ob,la.height=a.height*Ob):(la.width=la.parentElement.offsetWidth,la.height=la.parentElement.offsetHeight);let zb=["outline: none","cursor: default"];if(bf){let b=la.height;zb.push(`width: ${la.width}px`);zb.push(`height: ${b}px`)}else zb.push("width: 100%"),zb.push("height: 100%");a.crisp&&(zb.push("image-rendering: pixelated"),
zb.push("image-rendering: crisp-edges"));la.style.cssText=zb.join(";");let Ca=a.pixelDensity||window.devicePixelRatio;la.width*=Ca;la.height*=Ca;la.tabIndex=0;let jc=document.createElement("canvas");jc.width=256;jc.height=256;let xf=jc.getContext("2d",{willReadFrequently:!0}),F=sf({canvas:la,touchToMouse:a.touchToMouse,gamepads:a.gamepads,pixelDensity:a.pixelDensity,maxFPS:a.maxFPS}),Ze=[],I=F.canvas.getContext("webgl",{antialias:!0,depth:!0,stencil:!0,alpha:!0,preserveDrawingBuffer:!0}),La=Ed(I,
{texFilter:a.texFilter}),A=(()=>{let b=rb("\nvec4 vert(vec2 pos, vec2 uv, vec4 color) {\n\treturn def_vert();\n}\n","\nvec4 frag(vec2 pos, vec2 uv, vec4 color, sampler2D tex) {\n\treturn def_frag();\n}\n"),c=vb.fromImage(La,new ImageData(new Uint8ClampedArray([255,255,255,255]),1,1)),e=a.width&&a.height?new hc(La,a.width*Ca*Ob,a.height*Ca*Ob):new hc(La,I.drawingBufferWidth,I.drawingBufferHeight),f=null,g=1;a.background&&(f=Y(a.background),g=Array.isArray(a.background)?a.background[3]:1,I.clearColor(f.r/
255,f.g/255,f.b/255,g??1));I.enable(I.BLEND);I.blendFuncSeparate(I.SRC_ALPHA,I.ONE_MINUS_SRC_ALPHA,I.ONE,I.ONE_MINUS_SRC_ALPHA);let q=new Rd(La,Rc,uf,12288),u=vb.fromImage(La,new ImageData(new Uint8ClampedArray([128,128,128,255,190,190,190,255,190,190,190,255,128,128,128,255]),2,2),{wrap:"repeat",filter:"nearest"});return{lastDrawCalls:0,defShader:b,defTex:c,frameBuffer:e,postShader:null,postShaderUniform:null,renderer:q,transform:new Xa,transformStack:[],bgTex:u,bgColor:f,bgAlpha:g,width:a.width??
I.drawingBufferWidth/Ca/Ob,height:a.height??I.drawingBufferHeight/Ca/Ob,viewport:{x:0,y:0,width:I.drawingBufferWidth,height:I.drawingBufferHeight},fixed:!1}})();class Ba{static $jscomp$static$block$m600241313$37(){h(this,"SpriteData")}constructor(b,c,e={},f=null){this.frames=[new oa(0,0,1,1)];this.anims={};this.slice9=null;this.tex=b;c&&(this.frames=c);this.anims=e;this.slice9=f}get width(){return this.tex.width*this.frames[0].w}get height(){return this.tex.height*this.frames[0].h}static from(b,c=
{}){return"string"==typeof b?Ba.fromURL(b,c):Promise.resolve(Ba.fromImage(b,c))}static fromImage(b,c={}){let [e,f]=T.packer.add(b);b=c.frames?c.frames.map(g=>new oa(f.x+g.x*f.w,f.y+g.y*f.h,g.w*f.w,g.h*f.h)):V(c.sliceX||1,c.sliceY||1,f.x,f.y,f.w,f.h);return new Ba(e,b,c.anims,c.slice9)}static fromURL(b,c={}){return Sb(b).then(e=>Ba.fromImage(e,c))}}Ba.$jscomp$static$block$m600241313$37();class gb{static $jscomp$static$block$m600241313$38(){h(this,"SoundData")}constructor(b){this.buf=b}static fromArrayBuffer(b){return(new Promise((c,
e)=>ua.ctx.decodeAudioData(b,c,e))).then(c=>new gb(c))}static fromURL(b){return Ld(b)?gb.fromArrayBuffer(sd(b)):Gd(b).then(c=>gb.fromArrayBuffer(c))}}gb.$jscomp$static$block$m600241313$38();let ua=(()=>{let b=new (window.AudioContext||window.webkitAudioContext),c=b.createGain();c.connect(b.destination);let e=new gb(Id(b));return b.decodeAudioData(tf.buffer.slice(0)).then(f=>{e.buf=f}).catch(f=>{console.error("Failed to load burp: ",f)}),{ctx:b,masterNode:c,burpSnd:e}})(),T={urlPrefix:"",sprites:new wb,
fonts:new wb,bitmapFonts:new wb,sounds:new wb,shaders:new wb,custom:new wb,packer:new Ud(La,2048,2048),loaded:!1};h(d,"fixURL");let E={events:new Eb,objEvents:new Eb,root:yc([]),gravity:0,scenes:{},logs:[],cam:{pos:null,scale:new z(1),angle:0,shake:0,transform:new Xa}};E.root.use(Cc());h(k,"load");h(n,"loadProgress");h(r,"loadRoot");h(J,"loadJSON");class ic{static $jscomp$static$block$m600241313$39(){h(this,"FontData")}constructor(b,c={}){this.filter="linear";this.outline=null;this.size=64;if(this.fontface=
b,this.filter=c.filter??"linear",this.size=c.size??64,256<this.size)throw Error("Max font size: 256");c.outline&&(this.outline={width:1,color:Y(0,0,0)},"number"==typeof c.outline?this.outline.width=c.outline:"object"==typeof c.outline&&(c.outline.width&&(this.outline.width=c.outline.width),c.outline.color&&(this.outline.color=c.outline.color)))}}ic.$jscomp$static$block$m600241313$39();h(M,"loadFont");h(R,"loadBitmapFont");h(V,"slice");h(ha,"loadSpriteAtlas");h(pa,"createSpriteSheet");h(ia,"loadSprite");
h(Ea,"loadPedit");h(Ta,"loadAseprite");h(Ma,"loadShader");h(Ua,"loadShaderURL");h(Va,"loadSound");h(Na,"loadBean");h(Ga,"getSprite");h(Ha,"getSound");h(mb,"getFont");h(W,"getBitmapFont");h(Sa,"getShader");h(Fa,"getAsset");h(ya,"resolveSprite");h(lb,"resolveSound");h(Wb,"resolveShader");h(Fb,"resolveFont");h(Xb,"volume");h(Gb,"play");h(Hb,"burp");h(Yb,"makeCanvas");h(rb,"makeShader");h(Zb,"makeFont");h(sb,"drawRaw");h(Ja,"flush");h(tb,"frameStart");h($b,"usePostEffect");h(ub,"frameEnd");h(ac,"screen2ndc");
h(bc,"pushMatrix");h(aa,"pushTranslate");h(Ya,"pushScale");h(Za,"pushRotate");h(ta,"pushTransform");h(ra,"popTransform");h($a,"drawUVQuad");h(ob,"drawTexture");h(Ib,"drawSprite");h(fb,"getArcPts");h(sa,"drawRect");h(ab,"drawLine");h(Kb,"drawLines");h(Jb,"drawTriangle");h(p,"drawCircle");h(cc,"drawEllipse");h(Oa,"drawPolygon");h(dc,"drawStenciled");h(ec,"drawMasked");h(fc,"drawSubtracted");h(gc,"getViewportScale");h(Pa,"drawUnscaled");h(ja,"applyCharTransform");let Vd=/\[(?<style>\w+)\](?<text>.*?)\[\/k<style>\]/g;
h(nb,"compileStyledText");let Sc={};h(wa,"formatText");h(Lb,"drawText");h(Qa,"drawFormattedText");h(ma,"width");h(na,"height");h(Vb,"windowToContent");h(m,"contentToView");h(x,"mousePos");let cf=!1,da={inspect:!1,timeScale:1,showLog:!0,fps:()=>F.fps(),numFrames:()=>F.numFrames(),stepFrame:dd,drawCalls:()=>A.lastDrawCalls,clearLog:()=>E.logs=[],log:b=>{let c=a.logMax??8;E.logs.unshift({msg:b,time:F.time()});E.logs.length>c&&(E.logs=E.logs.slice(0,c))},error:b=>da.log(Error(b.toString?b.toString():
b)),curRecording:null,numObjects:()=>Wc("*",{recursive:!0}).length,get paused(){return cf},set paused(b){(cf=b)?ua.ctx.suspend():ua.ctx.resume()}};h(C,"dt");h(N,"camPos");h(ka,"camScale");h(qa,"camRot");h(bb,"shake");h(Tc,"toScreen");h(Uc,"toWorld");h(lc,"calcTransform");h(yc,"make");h(hb,"on");let Bf=Aa(b=>{let c=pc([{update:b}]);return{get paused(){return c.paused},set paused(e){c.paused=e},cancel:()=>c.destroy()}},(b,c)=>hb("update",b,c)),Cf=Aa(b=>{let c=pc([{draw:b}]);return{get paused(){return c.hidden},
set paused(e){c.hidden=e},cancel:()=>c.destroy()}},(b,c)=>hb("draw",b,c)),Vc=Aa(b=>E.events.on("add",b),(b,c)=>hb("add",b,c)),Wd=Aa(b=>E.events.on("destroy",b),(b,c)=>hb("destroy",b,c));h(Xd,"onCollide");h(Yd,"onCollideUpdate");h(Zd,"onCollideEnd");h(mc,"forAllCurrentAndFuture");let Df=Aa(b=>F.onMousePress(b),(b,c)=>{let e=[];return mc(b,f=>{if(!f.area)throw Error("onClick() requires the object to have area() component");e.push(f.onClick(()=>c(f)))}),Db.join(e)});h($d,"onHover");h(ae,"onHoverUpdate");
h(be,"onHoverEnd");h(ce,"setGravity");h(de,"getGravity");h(ee,"setBackground");h(fe,"getBackground");h(nc,"pos");h(oc,"scale");h(ge,"rotate");h(he,"color");h(Nb,"toFixed");h(ie,"opacity");h(zc,"anchor");h(je,"z");h(ke,"follow");h(le,"move");h(me,"offscreen");h(Mb,"isFixed");h(ne,"area");h(pb,"getRenderProps");h(Ac,"sprite");h(oe,"text");h(pe,"polygon");h(qe,"rect");h(re,"uvquad");h(se,"circle");h(te,"outline");h(Cc,"timer");h(ue,"body");h(ve,"doubleJump");h(we,"shader");h(xe,"fixed");h(Yc,"stay");
h(ye,"health");h(ze,"lifespan");h(Be,"state");h(Ce,"fadeIn");h(De,"mask");h(Ee,"drawon");h(Bc,"onLoad");h(Fe,"scene");h(Ge,"go");h(He,"onSceneLeave");h(Ie,"getData");h($c,"setData");h(ad,"plug");h(kc,"center");let df;(b=>(b[b.None=0]="None",b[b.Left=1]="Left",b[b.Top=2]="Top",b[b.LeftTop=3]="LeftTop",b[b.Right=4]="Right",b[b.Horizontal=5]="Horizontal",b[b.RightTop=6]="RightTop",b[b.HorizontalTop=7]="HorizontalTop",b[b.Bottom=8]="Bottom",b[b.LeftBottom=9]="LeftBottom",b[b.Vertical=10]="Vertical",b[b.LeftVertical=
11]="LeftVertical",b[b.RightBottom=12]="RightBottom",b[b.HorizontalBottom=13]="HorizontalBottom",b[b.RightVertical=14]="RightVertical",b[b.All=15]="All"))(df||(df={}));h(bd,"tile");h(Je,"addLevel");h(Le,"agent");h(Me,"record");h(Ne,"isFocused");h(Oe,"destroy");let pc=E.root.add.bind(E.root),Ef=E.root.readd.bind(E.root),Ff=E.root.removeAll.bind(E.root),Wc=E.root.get.bind(E.root),Ae=E.root.wait.bind(E.root),Gf=E.root.loop.bind(E.root),Xc=E.root.tween.bind(E.root);h(cd,"boom");let Af=ia(null,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOcAAACDCAYAAAB2kQxsAAAAAXNSR0IArs4c6QAABdRJREFUeJzt3d3N3TYMgGG16ADdoAhyl7UyV9bqXRB0g2zQXgRGDcOWSIoUaX3vAwQBknMk/4gWLcnHrQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACDEb9kb8FH99eeXf6Wf/efn35ynDyj1pEsb6G6NUxOYZ7sdB/QtPdnWRnn29gbKMYDUspPs0SgPb22cHANo/JG9AZF6wWBp3JLgeir36bvff3x9LOvzp2/dbSFA97bk5I4a9VMD7TXOUcP0uJ+d6emu5d6V1QvMs5nj8FZPx37X/b2TFpzShtnafeP0DipJMFnLnN3/w1OQ7tZgP+pA4VVKcHo0TG36KNULKGt5XsHZmi1APS5WM2Vqg0i7vbsG6YcIznN9vRTxXHavgdxtv6Tc3vc1pAHqdaG6ipwKYprpf1sFp6aH0gRTrxxLubPB2avHu+c/l3mICvqnsr//+Cq+qGrK1Xw/wzbBaRkNvSv3yew9cq+cu89L6nu6F/cMzCgzF1ftANlbe+Otp1IkDVxyVfbo6Z481f3507dhvXfbrk3HpdtjKTNqKuio8678c7mzF6ns6arfMyrVNoA75wMfNU2hKSeCx3Fq7dc+SPfDc39H9Vqn2CT//4bsYeT1PecOJyGSJdh6PZOlbElPZz2PHtlD1cUeS4LT4z5IOihwfNaD5ERm9qxH/dZ7Vmt9M999CtCZbdLUP/p3r2zFQ0paG8lr4Eb6+ZWBcSeq/qhyK6bXUfXOSgtO7/tOb9eT1NveqKttpYbiyXu/euV51JV16/T6e86zyF5TUp731V5Sp+Z7M71h9QvFNWWuvr0Sy4LzLfNvrel6zRX1e+hN2VzrnNlfaYD0xhCs++851lDh3vNV95xe6YvHgb8bwbNcuc+f09wbaUj2dzYgjz93//5kh94t0quCM8OKK6glKKuM0EYHfhUZWd8WwenZa0rLsp6s2YY66o0k9WUvS4NManBaGuo1eDIHgUZ1ePdkntsfFaCz5VZJdStsxyt7ziMNXHEAK5yk1mqmhrMPf1fcp57Vqe3SqZTMEduZhqAZyaywFne0DVHngHTZ11bznE88l/1lBZ9meP8851plWkBCO7drmQvWnL/sY/fKtFaqN3iy6iofsQxNktJnTMgfPXJUz3w3VaP5vOQ7Iyszvy2DczSi+aYFET2jINUEqFcAS4+rV480WlwRWXe07dLa0YGvfl9kmbTvPZJ1TXGvn4t4yuRp+2aMgk27wkm63DIztU3vOVfueC8wK4zKWtK0M+nvJXmOdlt65MgFFCva06qsKz044SvjIiN5TjLaaHxhtNyyouXBGZ1WSn66Ivt+M7pRZAWoZsDq+t2emeM1am/WtHxFG9runrO1/n1CxLK7CilxJM/H4bwuTJJBvWtgvm0gcNu01uvpd8la1soLE7xkpYDea4Ot6W3GOSzRc3o/qHw2M9qmXWA+uw+jbd0hyO9Yz0+vJ9QGcO/8ZV2YUqYVPN8dImXp3aJ/w1XTGGYfKZN+P7IXiXqO1uINLzFOm/Pz+BV4C03PNEqpZl//ELXP1ro8nhLyKLPHMyAiXyvh4cMFZ2uyAJXc62gzgJl1nhrSLMEzcLx+5qQnIhgqv6qhTHC2Zmus1tUuowCVDkRU6j0jgiJqhLPSSq2q7wMtMSBkdbcQWjNCq2nMlRrTnajAPP/t+c5Sj3K8VNueQ+pGzaa2MyOb2sZseW2dpL6ZnjMzfeQFt/Fe3XP2WIfGvRY6a569jCJ9TaIlcCS9KQE5p1TP2VrMbwLNDlZEvpE5AkGxh9f2nLO/QOetytIwAnMf6SfS2ns+jaZ6B4i2sWvSvF0HWOAj/aRGNFAaPXbw2rS2Rzr0T/ChshKNM3qd4135BCaqK9VAKy+lAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/4DBC0k0jFtF9wAAAAASUVORK5CYII\x3d"),
zf=ia(null,"data:image/png;base64,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\x3d");
h(Pe,"addKaboom");h(dd,"updateFrame");class ed{static $jscomp$static$block$m600241313$40(){h(this,"Collision")}constructor(b,c,e,f=!1){this.resolved=!1;this.source=b;this.target=c;this.displacement=e;this.resolved=f}reverse(){return new ed(this.target,this.source,this.displacement.scale(-1),this.resolved)}hasOverlap(){return!this.displacement.isZero()}isLeft(){return 0<this.displacement.x}isRight(){return 0>this.displacement.x}isTop(){return 0<this.displacement.y}isBottom(){return 0>this.displacement.y}preventResolution(){this.resolved=
!0}}ed.$jscomp$static$block$m600241313$40();h(Qe,"checkFrame");h(Re,"drawFrame");h(Se,"drawLoadScreen");h(fd,"drawInspectText");h(Te,"drawDebug");h(Ue,"onLoading");h(Ve,"onResize");h(We,"onError");h(Xe,"handleErr");h(Ye,"onCleanup");h($e,"quit");let Dc=!0;F.run(()=>{try{T.loaded||1===n()&&!Dc&&(T.loaded=!0,E.events.trigger("load")),!T.loaded&&!1!==a.loadingScreen||Dc?(tb(),Se(),ub()):(da.paused||dd(),Qe(),tb(),Re(),!1!==a.debug&&Te(),ub()),Dc&&(Dc=!1),E.events.trigger("frameEnd")}catch(b){Xe(b)}});
h(gd,"updateViewport");h(Zc,"initEvents");gd();Zc();let xb={VERSION:"3000.1.17",loadRoot:r,loadProgress:n,loadSprite:ia,loadSpriteAtlas:ha,loadSound:Va,loadBitmapFont:R,loadFont:M,loadShader:Ma,loadShaderURL:Ua,loadAseprite:Ta,loadPedit:Ea,loadBean:Na,loadJSON:J,load:k,getSprite:Ga,getSound:Ha,getFont:mb,getBitmapFont:W,getShader:Sa,getAsset:Fa,Asset:Ka,SpriteData:Ba,SoundData:gb,width:ma,height:na,center:kc,dt:C,time:F.time,screenshot:F.screenshot,record:Me,isFocused:Ne,setCursor:F.setCursor,getCursor:F.getCursor,
setCursorLocked:F.setCursorLocked,isCursorLocked:F.isCursorLocked,setFullscreen:F.setFullscreen,isFullscreen:F.isFullscreen,isTouchscreen:F.isTouchscreen,onLoad:Bc,onLoading:Ue,onResize:Ve,onGamepadConnect:F.onGamepadConnect,onGamepadDisconnect:F.onGamepadDisconnect,onError:We,onCleanup:Ye,camPos:N,camScale:ka,camRot:qa,shake:bb,toScreen:Tc,toWorld:Uc,setGravity:ce,getGravity:de,setBackground:ee,getBackground:fe,getGamepads:F.getGamepads,add:pc,make:yc,destroy:Oe,destroyAll:Ff,get:Wc,readd:Ef,pos:nc,
scale:oc,rotate:ge,color:he,opacity:ie,anchor:zc,area:ne,sprite:Ac,text:oe,polygon:pe,rect:qe,circle:se,uvquad:re,outline:te,body:ue,doubleJump:ve,shader:we,timer:Cc,fixed:xe,stay:Yc,health:ye,lifespan:ze,z:je,move:le,offscreen:me,follow:ke,state:Be,fadeIn:Ce,mask:De,drawon:Ee,tile:bd,agent:Le,on:hb,onUpdate:Bf,onDraw:Cf,onAdd:Vc,onDestroy:Wd,onClick:Df,onCollide:Xd,onCollideUpdate:Yd,onCollideEnd:Zd,onHover:$d,onHoverUpdate:ae,onHoverEnd:be,onKeyDown:F.onKeyDown,onKeyPress:F.onKeyPress,onKeyPressRepeat:F.onKeyPressRepeat,
onKeyRelease:F.onKeyRelease,onMouseDown:F.onMouseDown,onMousePress:F.onMousePress,onMouseRelease:F.onMouseRelease,onMouseMove:F.onMouseMove,onCharInput:F.onCharInput,onTouchStart:F.onTouchStart,onTouchMove:F.onTouchMove,onTouchEnd:F.onTouchEnd,onScroll:F.onScroll,onHide:F.onHide,onShow:F.onShow,onGamepadButtonDown:F.onGamepadButtonDown,onGamepadButtonPress:F.onGamepadButtonPress,onGamepadButtonRelease:F.onGamepadButtonRelease,onGamepadStick:F.onGamepadStick,mousePos:x,mouseDeltaPos:F.mouseDeltaPos,
isKeyDown:F.isKeyDown,isKeyPressed:F.isKeyPressed,isKeyPressedRepeat:F.isKeyPressedRepeat,isKeyReleased:F.isKeyReleased,isMouseDown:F.isMouseDown,isMousePressed:F.isMousePressed,isMouseReleased:F.isMouseReleased,isMouseMoved:F.isMouseMoved,isGamepadButtonPressed:F.isGamepadButtonPressed,isGamepadButtonDown:F.isGamepadButtonDown,isGamepadButtonReleased:F.isGamepadButtonReleased,getGamepadStick:F.getGamepadStick,charInputted:F.charInputted,loop:Gf,wait:Ae,play:Gb,volume:Xb,burp:Hb,audioCtx:ua.ctx,Line:Cb,
Rect:va,Circle:Kd,Polygon:Tb,Vec2:z,Color:Z,Mat4:Xa,Quad:oa,RNG:Nc,rand:Pb,randi:Gc,randSeed:id,vec2:B,rgb:Y,hsl2rgb:nf,quad:ea,choose:kd,chance:jd,lerp:eb,tween:Xc,easings:xc,map:ib,mapc:hd,wave:Ec,deg2rad:Ra,rad2deg:Ab,clamp:db,testLineLine:Bb,testRectRect:ld,testRectLine:nd,testRectPoint:Qb,testCirclePolygon:pd,testLinePoint:od,testLineCircle:Hc,drawSprite:Ib,drawText:Lb,formatText:wa,drawRect:sa,drawLine:ab,drawLines:Kb,drawTriangle:Jb,drawCircle:p,drawEllipse:cc,drawUVQuad:$a,drawPolygon:Oa,
drawFormattedText:Qa,drawMasked:ec,drawSubtracted:fc,pushTransform:ta,popTransform:ra,pushTranslate:aa,pushScale:Ya,pushRotate:Za,pushMatrix:bc,usePostEffect:$b,makeCanvas:Yb,debug:da,scene:Fe,go:Ge,onSceneLeave:He,addLevel:Je,getData:Ie,setData:$c,download:rc,downloadJSON:td,downloadText:Kc,downloadBlob:Lc,plug:ad,ASCII_CHARS:" !\"#$%\x26'()*+,-./0123456789:;\x3c\x3d\x3e?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",canvas:F.canvas,addKaboom:Pe,LEFT:z.LEFT,RIGHT:z.RIGHT,UP:z.UP,
DOWN:z.DOWN,RED:Z.RED,GREEN:Z.GREEN,BLUE:Z.BLUE,YELLOW:Z.YELLOW,MAGENTA:Z.MAGENTA,CYAN:Z.CYAN,WHITE:Z.WHITE,BLACK:Z.BLACK,quit:$e,Event:Ia,EventHandler:Eb,EventController:Db};if(a.plugins&&a.plugins.forEach(ad),!1!==a.global)for(let b in xb)window[b]=xb[b];return!1!==a.focus&&F.canvas.focus(),xb},"default")};
'use strict';var g;/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var aa=this||self;function t(a){var b=typeof a;return"object"!=b?b:a?Array.isArray(a)?"array":b:"null"}function ba(a){return Object.prototype.hasOwnProperty.call(a,ca)&&a[ca]||(a[ca]=++da)}var ca="closure_uid_"+(1E9*Math.random()>>>0),da=0;function ea(a){const b=[];let c=0;for(const d in a)b[c++]=d;return b};function fa(a,b){null!=a&&this.append.apply(this,arguments)}g=fa.prototype;g.Ga="";g.set=function(a){this.Ga=""+a};g.append=function(a,b,c){this.Ga+=String(a);if(null!=b)for(let d=1;d<arguments.length;d++)this.Ga+=arguments[d];return this};g.clear=function(){this.Ga=""};g.toString=function(){return this.Ga};var u={},ha=null;function ia(){return new v(null,5,[ja,!0,la,!0,ma,!1,na,!1,oa,null],null)}function w(a){return null!=a&&!1!==a}function pa(a){return a instanceof Array}function qa(a){return null==a?!0:!1===a?!0:!1}function y(a,b){return a[t(null==b?null:b)]?!0:a._?!0:!1}function A(a,b){var c=null==b?null:b.constructor;return Error(["No protocol method ",a," defined for type ",w(w(c)?c.ac:c)?c.yb:t(b),": ",b].join(""))}function ra(a){var b=a.yb;return w(b)?b:B.i(a)}
var sa="undefined"!==typeof Symbol&&"function"===t(Symbol)?Symbol.iterator:"@@iterator";function ta(a){for(var b=a.length,c=Array(b),d=0;;)if(d<b)c[d]=a[d],d+=1;else break;return c}function ua(){}function va(){}function wa(a){if(null!=a&&null!=a.Z)a=a.Z(a);else{var b=wa[t(null==a?null:a)];if(null!=b)a=b.i?b.i(a):b.call(null,a);else if(b=wa._,null!=b)a=b.i?b.i(a):b.call(null,a);else throw A("ICounted.-count",a);}return a}function xa(){}
function ya(a){if(null!=a&&null!=a.$)a=a.$(a);else{var b=ya[t(null==a?null:a)];if(null!=b)a=b.i?b.i(a):b.call(null,a);else if(b=ya._,null!=b)a=b.i?b.i(a):b.call(null,a);else throw A("IEmptyableCollection.-empty",a);}return a}function za(){}function Aa(a,b){if(null!=a&&null!=a.ba)a=a.ba(a,b);else{var c=Aa[t(null==a?null:a)];if(null!=c)a=c.j?c.j(a,b):c.call(null,a,b);else if(c=Aa._,null!=c)a=c.j?c.j(a,b):c.call(null,a,b);else throw A("ICollection.-conj",a);}return a}function Ba(){}
var Da=function(){function a(d,e,f){var h=Ca[t(null==d?null:d)];if(null!=h)return h.o?h.o(d,e,f):h.call(null,d,e,f);h=Ca._;if(null!=h)return h.o?h.o(d,e,f):h.call(null,d,e,f);throw A("IIndexed.-nth",d);}function b(d,e){var f=Ca[t(null==d?null:d)];if(null!=f)return f.j?f.j(d,e):f.call(null,d,e);f=Ca._;if(null!=f)return f.j?f.j(d,e):f.call(null,d,e);throw A("IIndexed.-nth",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.j=b;c.o=a;return c}(),Ca=function Ca(a){switch(arguments.length){case 2:return Ca.j(arguments[0],arguments[1]);case 3:return Ca.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.i(arguments.length)].join(""));}};Ca.j=function(a,b){return null!=a&&null!=a.O?a.O(a,b):Da(a,b)};Ca.o=function(a,b,c){return null!=a&&null!=a.oa?a.oa(a,b,c):Da(a,b,c)};Ca.Y=3;
function C(a){if(null!=a&&null!=a.da)a=a.da(a);else{var b=C[t(null==a?null:a)];if(null!=b)a=b.i?b.i(a):b.call(null,a);else if(b=C._,null!=b)a=b.i?b.i(a):b.call(null,a);else throw A("ISeq.-first",a);}return a}function Ea(a){if(null!=a&&null!=a.ha)a=a.ha(a);else{var b=Ea[t(null==a?null:a)];if(null!=b)a=b.i?b.i(a):b.call(null,a);else if(b=Ea._,null!=b)a=b.i?b.i(a):b.call(null,a);else throw A("ISeq.-rest",a);}return a}function Fa(){}function Ga(){}
var Ia=function(){function a(d,e,f){var h=Ha[t(null==d?null:d)];if(null!=h)return h.o?h.o(d,e,f):h.call(null,d,e,f);h=Ha._;if(null!=h)return h.o?h.o(d,e,f):h.call(null,d,e,f);throw A("ILookup.-lookup",d);}function b(d,e){var f=Ha[t(null==d?null:d)];if(null!=f)return f.j?f.j(d,e):f.call(null,d,e);f=Ha._;if(null!=f)return f.j?f.j(d,e):f.call(null,d,e);throw A("ILookup.-lookup",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.j=b;c.o=a;return c}(),Ha=function Ha(a){switch(arguments.length){case 2:return Ha.j(arguments[0],arguments[1]);case 3:return Ha.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.i(arguments.length)].join(""));}};Ha.j=function(a,b){return null!=a&&null!=a.qa?a.qa(a,b):Ia(a,b)};Ha.o=function(a,b,c){return null!=a&&null!=a.W?a.W(a,b,c):Ia(a,b,c)};Ha.Y=3;function Ka(){}
function La(a,b){if(null!=a&&null!=a.Ya)a=a.Ya(a,b);else{var c=La[t(null==a?null:a)];if(null!=c)a=c.j?c.j(a,b):c.call(null,a,b);else if(c=La._,null!=c)a=c.j?c.j(a,b):c.call(null,a,b);else throw A("IAssociative.-contains-key?",a);}return a}function Ma(a,b,c){if(null!=a&&null!=a.Ca)a=a.Ca(a,b,c);else{var d=Ma[t(null==a?null:a)];if(null!=d)a=d.o?d.o(a,b,c):d.call(null,a,b,c);else if(d=Ma._,null!=d)a=d.o?d.o(a,b,c):d.call(null,a,b,c);else throw A("IAssociative.-assoc",a);}return a}function Na(){}
function Oa(a,b){if(null!=a&&null!=a.wb)a=a.wb(a,b);else{var c=Oa[t(null==a?null:a)];if(null!=c)a=c.j?c.j(a,b):c.call(null,a,b);else if(c=Oa._,null!=c)a=c.j?c.j(a,b):c.call(null,a,b);else throw A("IMap.-dissoc",a);}return a}function Pa(a){if(null!=a&&null!=a.Qb)a=a.key;else{var b=Pa[t(null==a?null:a)];if(null!=b)a=b.i?b.i(a):b.call(null,a);else if(b=Pa._,null!=b)a=b.i?b.i(a):b.call(null,a);else throw A("IMapEntry.-key",a);}return a}
function Qa(a){if(null!=a&&null!=a.Rb)a=a.D;else{var b=Qa[t(null==a?null:a)];if(null!=b)a=b.i?b.i(a):b.call(null,a);else if(b=Qa._,null!=b)a=b.i?b.i(a):b.call(null,a);else throw A("IMapEntry.-val",a);}return a}function Ra(){}function D(a){if(null!=a&&null!=a.ub)a=a.ub(a);else{var b=D[t(null==a?null:a)];if(null!=b)a=b.i?b.i(a):b.call(null,a);else if(b=D._,null!=b)a=b.i?b.i(a):b.call(null,a);else throw A("IDeref.-deref",a);}return a}function Sa(){}
function Ta(a){if(null!=a&&null!=a.U)a=a.U(a);else{var b=Ta[t(null==a?null:a)];if(null!=b)a=b.i?b.i(a):b.call(null,a);else if(b=Ta._,null!=b)a=b.i?b.i(a):b.call(null,a);else throw A("IMeta.-meta",a);}return a}function Ua(a,b){if(null!=a&&null!=a.X)a=a.X(a,b);else{var c=Ua[t(null==a?null:a)];if(null!=c)a=c.j?c.j(a,b):c.call(null,a,b);else if(c=Ua._,null!=c)a=c.j?c.j(a,b):c.call(null,a,b);else throw A("IWithMeta.-with-meta",a);}return a}function Va(){}
var Xa=function(){function a(d,e,f){var h=Wa[t(null==d?null:d)];if(null!=h)return h.o?h.o(d,e,f):h.call(null,d,e,f);h=Wa._;if(null!=h)return h.o?h.o(d,e,f):h.call(null,d,e,f);throw A("IReduce.-reduce",d);}function b(d,e){var f=Wa[t(null==d?null:d)];if(null!=f)return f.j?f.j(d,e):f.call(null,d,e);f=Wa._;if(null!=f)return f.j?f.j(d,e):f.call(null,d,e);throw A("IReduce.-reduce",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.j=b;c.o=a;return c}(),Wa=function Wa(a){switch(arguments.length){case 2:return Wa.j(arguments[0],arguments[1]);case 3:return Wa.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.i(arguments.length)].join(""));}};Wa.j=function(a,b){return null!=a&&null!=a.ea?a.ea(a,b):Xa(a,b)};Wa.o=function(a,b,c){return null!=a&&null!=a.fa?a.fa(a,b,c):Xa(a,b,c)};Wa.Y=3;function Ya(){}
function Za(a,b){if(null!=a&&null!=a.ob)a=a.ob(a,b,!0);else{var c=Za[t(null==a?null:a)];if(null!=c)a=c.o?c.o(a,b,!0):c.call(null,a,b,!0);else if(c=Za._,null!=c)a=c.o?c.o(a,b,!0):c.call(null,a,b,!0);else throw A("IKVReduce.-kv-reduce",a);}return a}function $a(a,b){if(null!=a&&null!=a.R)a=a.R(a,b);else{var c=$a[t(null==a?null:a)];if(null!=c)a=c.j?c.j(a,b):c.call(null,a,b);else if(c=$a._,null!=c)a=c.j?c.j(a,b):c.call(null,a,b);else throw A("IEquiv.-equiv",a);}return a}
function bb(a){if(null!=a&&null!=a.T)a=a.T(a);else{var b=bb[t(null==a?null:a)];if(null!=b)a=b.i?b.i(a):b.call(null,a);else if(b=bb._,null!=b)a=b.i?b.i(a):b.call(null,a);else throw A("IHash.-hash",a);}return a}function cb(){}function db(a){if(null!=a&&null!=a.P)a=a.P(a);else{var b=db[t(null==a?null:a)];if(null!=b)a=b.i?b.i(a):b.call(null,a);else if(b=db._,null!=b)a=b.i?b.i(a):b.call(null,a);else throw A("ISeqable.-seq",a);}return a}function eb(){}function fb(){}function gb(){}
function E(a,b){if(null!=a&&null!=a.Db)a=a.Db(a,b);else{var c=E[t(null==a?null:a)];if(null!=c)a=c.j?c.j(a,b):c.call(null,a,b);else if(c=E._,null!=c)a=c.j?c.j(a,b):c.call(null,a,b);else throw A("IWriter.-write",a);}return a}function hb(){}function ib(a,b,c){if(null!=a&&null!=a.S)a=a.S(a,b,c);else{var d=ib[t(null==a?null:a)];if(null!=d)a=d.o?d.o(a,b,c):d.call(null,a,b,c);else if(d=ib._,null!=d)a=d.o?d.o(a,b,c):d.call(null,a,b,c);else throw A("IPrintWithWriter.-pr-writer",a);}return a}
function jb(a){if(null!=a&&null!=a.bb)a=a.bb(a);else{var b=jb[t(null==a?null:a)];if(null!=b)a=b.i?b.i(a):b.call(null,a);else if(b=jb._,null!=b)a=b.i?b.i(a):b.call(null,a);else throw A("IEditableCollection.-as-transient",a);}return a}function kb(a,b){if(null!=a&&null!=a.fb)a=a.fb(a,b);else{var c=kb[t(null==a?null:a)];if(null!=c)a=c.j?c.j(a,b):c.call(null,a,b);else if(c=kb._,null!=c)a=c.j?c.j(a,b):c.call(null,a,b);else throw A("ITransientCollection.-conj!",a);}return a}
function lb(a){if(null!=a&&null!=a.pb)a=a.pb(a);else{var b=lb[t(null==a?null:a)];if(null!=b)a=b.i?b.i(a):b.call(null,a);else if(b=lb._,null!=b)a=b.i?b.i(a):b.call(null,a);else throw A("ITransientCollection.-persistent!",a);}return a}function mb(a,b,c){if(null!=a&&null!=a.Za)a=a.Za(a,b,c);else{var d=mb[t(null==a?null:a)];if(null!=d)a=d.o?d.o(a,b,c):d.call(null,a,b,c);else if(d=mb._,null!=d)a=d.o?d.o(a,b,c):d.call(null,a,b,c);else throw A("ITransientAssociative.-assoc!",a);}return a}
function nb(a){if(null!=a&&null!=a.tb)a=a.tb(a);else{var b=nb[t(null==a?null:a)];if(null!=b)a=b.i?b.i(a):b.call(null,a);else if(b=nb._,null!=b)a=b.i?b.i(a):b.call(null,a);else throw A("IChunk.-drop-first",a);}return a}function ob(a){if(null!=a&&null!=a.ab)a=a.ab(a);else{var b=ob[t(null==a?null:a)];if(null!=b)a=b.i?b.i(a):b.call(null,a);else if(b=ob._,null!=b)a=b.i?b.i(a):b.call(null,a);else throw A("IChunkedSeq.-chunked-first",a);}return a}
function pb(a){if(null!=a&&null!=a.Da)a=a.Da(a);else{var b=pb[t(null==a?null:a)];if(null!=b)a=b.i?b.i(a):b.call(null,a);else if(b=pb._,null!=b)a=b.i?b.i(a):b.call(null,a);else throw A("IChunkedSeq.-chunked-rest",a);}return a}function qb(a,b){if(null!=a&&null!=a.Vb)a=a.Vb(a,b);else{var c=qb[t(null==a?null:a)];if(null!=c)a=c.j?c.j(a,b):c.call(null,a,b);else if(c=qb._,null!=c)a=c.j?c.j(a,b):c.call(null,a,b);else throw A("IReset.-reset!",a);}return a}
var sb=function(){function a(f,h,k,l,m){var n=rb[t(null==f?null:f)];if(null!=n)return n.ia?n.ia(f,h,k,l,m):n.call(null,f,h,k,l,m);n=rb._;if(null!=n)return n.ia?n.ia(f,h,k,l,m):n.call(null,f,h,k,l,m);throw A("ISwap.-swap!",f);}function b(f,h,k,l){var m=rb[t(null==f?null:f)];if(null!=m)return m.G?m.G(f,h,k,l):m.call(null,f,h,k,l);m=rb._;if(null!=m)return m.G?m.G(f,h,k,l):m.call(null,f,h,k,l);throw A("ISwap.-swap!",f);}function c(f,h,k){var l=rb[t(null==f?null:f)];if(null!=l)return l.o?l.o(f,h,k):l.call(null,
f,h,k);l=rb._;if(null!=l)return l.o?l.o(f,h,k):l.call(null,f,h,k);throw A("ISwap.-swap!",f);}function d(f,h){var k=rb[t(null==f?null:f)];if(null!=k)return k.j?k.j(f,h):k.call(null,f,h);k=rb._;if(null!=k)return k.j?k.j(f,h):k.call(null,f,h);throw A("ISwap.-swap!",f);}var e=null;e=function(f,h,k,l,m){switch(arguments.length){case 2:return d.call(this,f,h);case 3:return c.call(this,f,h,k);case 4:return b.call(this,f,h,k,l);case 5:return a.call(this,f,h,k,l,m)}throw Error("Invalid arity: "+arguments.length);
};e.j=d;e.o=c;e.G=b;e.ia=a;return e}(),rb=function rb(a){switch(arguments.length){case 2:return rb.j(arguments[0],arguments[1]);case 3:return rb.o(arguments[0],arguments[1],arguments[2]);case 4:return rb.G(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return rb.ia(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",B.i(arguments.length)].join(""));}};rb.j=function(a,b){return null!=a&&null!=a.Xb?a.Xb(a,b):sb(a,b)};
rb.o=function(a,b,c){return null!=a&&null!=a.Yb?a.Yb(a,b,c):sb(a,b,c)};rb.G=function(a,b,c,d){return null!=a&&null!=a.Zb?a.Zb(a,b,c,d):sb(a,b,c,d)};rb.ia=function(a,b,c,d,e){return null!=a&&null!=a.$b?a.$b(a,b,c,d,e):sb(a,b,c,d,e)};rb.Y=5;function tb(){}function ub(a){if(null!=a&&null!=a.ra)a=a.ra(a);else{var b=ub[t(null==a?null:a)];if(null!=b)a=b.i?b.i(a):b.call(null,a);else if(b=ub._,null!=b)a=b.i?b.i(a):b.call(null,a);else throw A("IIterable.-iterator",a);}return a}
function vb(a){this.dc=a;this.s=1073741824;this.F=0}vb.prototype.Db=function(a,b){return this.dc.append(b)};function wb(a){var b=new fa;a.S(null,new vb(b),ia());return B.i(b)}var xb="undefined"!==typeof Math&&"undefined"!==typeof Math.imul?function(a,b){return Math.imul(a,b)}:function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0};function yb(a){a=xb(a|0,-862048943);return xb(a<<15|a>>>-15,461845907)}
function zb(a,b){a=(a|0)^(b|0);return xb(a<<13|a>>>-13,5)+-430675100|0}function Ab(a,b){a=(a|0)^b;a=xb(a^a>>>16,-2048144789);a=xb(a^a>>>13,-1028477387);return a^a>>>16}function Bb(a){a:{var b=1;for(var c=0;;)if(b<a.length)c=zb(c,yb(a.charCodeAt(b-1)|a.charCodeAt(b)<<16)),b+=2;else{b=c;break a}}return Ab(1===(a.length&1)?b^yb(a.charCodeAt(a.length-1)):b,xb(2,a.length))}var Cb={},Db=0;
function Eb(a){255<Db&&(Cb={},Db=0);if(null==a)return 0;var b=Cb[a];if("number"===typeof b)a=b;else{a:if(null!=a)if(b=a.length,0<b)for(var c=0,d=0;;)if(c<b)d=xb(31,d)+a.charCodeAt(c),c+=1;else{b=d;break a}else b=0;else b=0;Cb[a]=b;Db+=1;a=b}return a}
function Fb(a){if(null!=a&&(a.s&4194304||u===a.lc))return a.T(null)^0;if("number"===typeof a){if(isFinite(a)){if(Number.isSafeInteger(a))a=Math.floor(a)%2147483647;else{var b=new Float64Array(1);b[0]=a;b=b.buffer;a=(new DataView(b,0,4)).getInt32();b=(new DataView(b,4,4)).getInt32();a^=b}return a}switch(a){case Infinity:return 2146435072;case -Infinity:return-1048576;default:return 2146959360}}else return!0===a?a=1231:!1===a?a=1237:"string"===typeof a?(a=Eb(a),a=0===a?a:Ab(zb(0,yb(a)),4)):a=a instanceof
Date?a.valueOf()^0:null==a?0:bb(a)^0,a}function Gb(a,b){return a^b+2654435769+(a<<6)+(a>>2)}function Hb(a,b,c,d,e){this.lb=a;this.name=b;this.Fa=c;this.Xa=d;this.xa=e;this.s=2154168321;this.F=4096}g=Hb.prototype;g.toString=function(){return this.Fa};g.R=function(a,b){return b instanceof Hb?this.Fa===b.Fa:!1};
g.call=function(a){switch(arguments.length-1){case 1:return this.i(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.i(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(ta(b)))};g.i=function(a){return F?F(a,this):Ib.call(null,a,this)};g.j=function(a,b){return Jb?Jb(a,this,b):Ib.call(null,a,this,b)};g.U=function(){return this.xa};g.X=function(a,b){return new Hb(this.lb,this.name,this.Fa,this.Xa,b)};
g.T=function(){var a=this.Xa;return null!=a?a:this.Xa=a=Gb(Bb(this.name),Eb(this.lb))};g.S=function(a,b){return E(b,this.Fa)};var Kb=function Kb(a){switch(arguments.length){case 1:return Kb.i(arguments[0]);case 2:return Kb.j(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",B.i(arguments.length)].join(""));}};
Kb.i=function(a){for(;;){if(a instanceof Hb)return a;if("string"===typeof a){var b=a.indexOf("/");return 1>b?Kb.j(null,a):Kb.j(a.substring(0,b),a.substring(b+1,a.length))}if(a instanceof G)a=a.Aa;else throw Error("no conversion to symbol");}};Kb.j=function(a,b){var c=null!=a?[B.i(a),"/",B.i(b)].join(""):b;return new Hb(a,b,c,null,null)};Kb.Y=2;function Lb(a){return null!=a?a.F&131072||u===a.mc?!0:a.F?!1:y(tb,a):y(tb,a)}
function H(a){if(null==a)return null;if(null!=a&&(a.s&8388608||u===a.Wb))return a.P(null);if(pa(a)||"string"===typeof a)return 0===a.length?null:new Mb(a,0,null);if(null!=a&&null!=a[sa])return a=(null!==a&&sa in a?a[sa]:void 0).call(a),Nb.i?Nb.i(a):Nb.call(null,a);if(y(cb,a))return db(a);throw Error([B.i(a)," is not ISeqable"].join(""));}function J(a){if(null==a)return null;if(null!=a&&(a.s&64||u===a.eb))return a.da(null);a=H(a);return null==a?null:C(a)}
function Ob(a){return null!=a?null!=a&&(a.s&64||u===a.eb)?a.ha(null):(a=H(a))?a.ha(null):K:K}function M(a){return null==a?null:null!=a&&(a.s&128||u===a.cb)?a.aa():H(Ob(a))}var Pb=function Pb(a){switch(arguments.length){case 1:return Pb.i(arguments[0]);case 2:return Pb.j(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Pb.I(arguments[0],arguments[1],2<c.length?new Mb(c.slice(2),0,null):null)}};Pb.i=function(){return!0};
Pb.j=function(a,b){return null==a?null==b:a===b||$a(a,b)};Pb.I=function(a,b,c){for(;;)if(Pb.j(a,b))if(M(c))a=b,b=J(c),c=M(c);else return Pb.j(b,J(c));else return!1};Pb.V=function(a){var b=J(a),c=M(a);a=J(c);c=M(c);return this.I(b,a,c)};Pb.Y=2;function Qb(a){this.J=a}Qb.prototype.next=function(){if(null!=this.J){var a=J(this.J);this.J=M(this.J);return{value:a,done:!1}}return{value:null,done:!0}};function Rb(a){return new Qb(H(a))}
function Sb(a,b){this.value=a;this.Gb=b;this.rb=null;this.s=8388672;this.F=0}Sb.prototype.P=function(){return this};Sb.prototype.da=function(){return this.value};Sb.prototype.ha=function(){null==this.rb&&(this.rb=Nb.i?Nb.i(this.Gb):Nb.call(null,this.Gb));return this.rb};function Nb(a){var b=a.next();return w(b.done)?null:new Sb(b.value,a)}function Ub(a){var b=0,c=1;for(a=H(a);;)if(null!=a)b+=1,c=xb(31,c)+Fb(J(a))|0,a=M(a);else return Ab(zb(0,yb(c)),b)}var Vb=Ab(zb(0,yb(1)),0);
function Wb(a){var b=0,c=0;for(a=H(a);;)if(null!=a)b+=1,c=c+Fb(J(a))|0,a=M(a);else return Ab(zb(0,yb(c)),b)}var Xb=Ab(zb(0,yb(0)),0);va["null"]=!0;wa["null"]=function(){return 0};Date.prototype.R=function(a,b){return b instanceof Date&&this.valueOf()===b.valueOf()};$a.number=function(a,b){return a===b};ua["function"]=!0;Sa["function"]=!0;Ta["function"]=function(){return null};bb._=function(a){return ba(a)};function Yb(a){return a+1}function Zb(){this.D=!1;this.s=32768;this.F=0}Zb.prototype.ub=function(){return this.D};
function $b(a){return a instanceof Zb}function ac(a){return D(a)}function bc(a,b){var c=a.Z(null);if(0===c)return b.N?b.N():b.call(null);for(var d=a.O(null,0),e=1;;)if(e<c){var f=a.O(null,e);d=b.j?b.j(d,f):b.call(null,d,f);if($b(d))return D(d);e+=1}else return d}function cc(a,b){var c=a.length;if(0===a.length)return b.N?b.N():b.call(null);for(var d=a[0],e=1;;)if(e<c){var f=a[e];d=b.j?b.j(d,f):b.call(null,d,f);if($b(d))return D(d);e+=1}else return d}
function dc(a,b,c){var d=a.length,e=c;for(c=0;;)if(c<d){var f=a[c];e=b.j?b.j(e,f):b.call(null,e,f);if($b(e))return D(e);c+=1}else return e}function ec(a,b,c,d){for(var e=a.length;;)if(d<e){var f=a[d];c=b.j?b.j(c,f):b.call(null,c,f);if($b(c))return D(c);d+=1}else return c}function fc(a){return null!=a?a.s&2||u===a.Ab?!0:a.s?!1:y(va,a):y(va,a)}function gc(a){return null!=a?a.s&16||u===a.Bb?!0:a.s?!1:y(Ba,a):y(Ba,a)}
function O(a,b,c){var d=Q.i?Q.i(a):Q.call(null,a);if(c>=d)return-1;!(0<c)&&0>c&&(c+=d,c=0>c?0:c);for(;;)if(c<d){if(Pb.j(hc?hc(a,c):ic.call(null,a,c),b))return c;c+=1}else return-1}function R(a,b,c){var d=Q.i?Q.i(a):Q.call(null,a);if(0===d)return-1;0<c?(--d,c=d<c?d:c):c=0>c?d+c:c;for(;;)if(0<=c){if(Pb.j(hc?hc(a,c):ic.call(null,a,c),b))return c;--c}else return-1}function jc(a,b){this.l=a;this.v=b}jc.prototype.na=function(){return this.v<this.l.length};
jc.prototype.next=function(){var a=this.l[this.v];this.v+=1;return a};function Mb(a,b,c){this.l=a;this.v=b;this.A=c;this.s=166592766;this.F=401408}g=Mb.prototype;g.toString=function(){return wb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return O(this,b,0);case 2:return O(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.i=function(b){return O(this,b,0)};a.j=function(b,c){return O(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return R(this,c,Q.i?Q.i(this):Q.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return R(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.i=a;b.j=function(c,d){return R(this,c,d)};return b}();g.O=function(a,b){a=b+this.v;if(0<=a&&a<this.l.length)return this.l[a];throw Error("Index out of bounds");};g.oa=function(a,b,c){a=b+this.v;return 0<=a&&a<this.l.length?this.l[a]:c};
g.ra=function(){return new jc(this.l,this.v)};g.U=function(){return this.A};g.aa=function(){return this.v+1<this.l.length?new Mb(this.l,this.v+1,null):null};g.Z=function(){var a=this.l.length-this.v;return 0>a?0:a};g.T=function(){return Ub(this)};g.R=function(a,b){return kc.j?kc.j(this,b):kc.call(null,this,b)};g.$=function(){return K};g.ea=function(a,b){return ec(this.l,b,this.l[this.v],this.v+1)};g.fa=function(a,b,c){return ec(this.l,b,c,this.v)};g.da=function(){return this.l[this.v]};
g.ha=function(){return this.v+1<this.l.length?new Mb(this.l,this.v+1,null):K};g.P=function(){return this.v<this.l.length?this:null};g.X=function(a,b){return b===this.A?this:new Mb(this.l,this.v,b)};g.ba=function(a,b){return S.j?S.j(b,this):S.call(null,b,this)};Mb.prototype[sa]=function(){return Rb(this)};function lc(a){return 0<a.length?new Mb(a,0,null):null}$a._=function(a,b){return a===b};
var mc=function mc(a){switch(arguments.length){case 0:return mc.N();case 1:return mc.i(arguments[0]);case 2:return mc.j(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return mc.I(arguments[0],arguments[1],2<c.length?new Mb(c.slice(2),0,null):null)}};mc.N=function(){return nc};mc.i=function(a){return a};mc.j=function(a,b){return null!=a?Aa(a,b):new oc(null,b,null,1,null)};
mc.I=function(a,b,c){for(;;)if(w(c))a=mc.j(a,b),b=J(c),c=M(c);else return mc.j(a,b)};mc.V=function(a){var b=J(a),c=M(a);a=J(c);c=M(c);return this.I(b,a,c)};mc.Y=2;function Q(a){if(null!=a)if(null!=a&&(a.s&2||u===a.Ab))a=a.Z(null);else if(pa(a))a=a.length;else if("string"===typeof a)a=a.length;else if(null!=a&&(a.s&8388608||u===a.Wb))a:{a=H(a);for(var b=0;;){if(fc(a)){a=b+wa(a);break a}a=M(a);b+=1}}else a=wa(a);else a=0;return a}
function pc(a,b,c){for(;;){if(null==a)return c;if(0===b)return H(a)?J(a):c;if(gc(a))return Ca(a,b,c);if(H(a))a=M(a),--b;else return c}}function ic(a){switch(arguments.length){case 2:return hc(arguments[0],arguments[1]);case 3:return T(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.i(arguments.length)].join(""));}}
function hc(a,b){if("number"!==typeof b)throw Error("Index argument to nth must be a number");if(null==a)return a;if(null!=a&&(a.s&16||u===a.Bb))return a.O(null,b);if(pa(a)){if(-1<b&&b<a.length)return a[b|0];throw Error("Index out of bounds");}if("string"===typeof a){if(-1<b&&b<a.length)return a.charAt(b|0);throw Error("Index out of bounds");}if(null!=a&&(a.s&64||u===a.eb)||null!=a&&(a.s&16777216||u===a.Cb)){if(0>b)throw Error("Index out of bounds");a:for(;;){if(null==a)throw Error("Index out of bounds");
if(0===b){if(H(a)){a=J(a);break a}throw Error("Index out of bounds");}if(gc(a)){a=Ca(a,b);break a}if(H(a))a=M(a),--b;else throw Error("Index out of bounds");}return a}if(y(Ba,a))return Ca(a,b);throw Error(["nth not supported on this type ",B.i(ra(null==a?null:a.constructor))].join(""));}
function T(a,b,c){if("number"!==typeof b)throw Error("Index argument to nth must be a number.");if(null==a)return c;if(null!=a&&(a.s&16||u===a.Bb))return a.oa(null,b,c);if(pa(a))return-1<b&&b<a.length?a[b|0]:c;if("string"===typeof a)return-1<b&&b<a.length?a.charAt(b|0):c;if(null!=a&&(a.s&64||u===a.eb)||null!=a&&(a.s&16777216||u===a.Cb))return 0>b?c:pc(a,b,c);if(y(Ba,a))return Ca(a,b,c);throw Error(["nth not supported on this type ",B.i(ra(null==a?null:a.constructor))].join(""));}
function Ib(a){switch(arguments.length){case 2:return F(arguments[0],arguments[1]);case 3:return Jb(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.i(arguments.length)].join(""));}}function F(a,b){return null==a?null:null!=a&&(a.s&256||u===a.Pb)?a.qa(null,b):pa(a)?null!=b&&b<a.length?a[b|0]:null:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):null:y(Ga,a)?Ha(a,b):null}
function Jb(a,b,c){return null!=a?null!=a&&(a.s&256||u===a.Pb)?a.W(null,b,c):pa(a)?null!=b&&-1<b&&b<a.length?a[b|0]:c:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):c:y(Ga,a)?Ha(a,b,c):c:c}var qc=function qc(a){switch(arguments.length){case 3:return qc.o(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return qc.I(arguments[0],arguments[1],arguments[2],3<c.length?new Mb(c.slice(3),0,null):null)}};
qc.o=function(a,b,c){return null!=a&&(a.s&512||u===a.Kb)?a.Ca(null,b,c):null!=a?Ma(a,b,c):rc([b,c])};qc.I=function(a,b,c,d){for(;;)if(a=qc.o(a,b,c),w(d))b=J(d),c=J(M(d)),d=M(M(d));else return a};qc.V=function(a){var b=J(a),c=M(a);a=J(c);var d=M(c);c=J(d);d=M(d);return this.I(b,a,c,d)};qc.Y=3;
var sc=function sc(a){switch(arguments.length){case 1:return sc.i(arguments[0]);case 2:return sc.j(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return sc.I(arguments[0],arguments[1],2<c.length?new Mb(c.slice(2),0,null):null)}};sc.i=function(a){return a};sc.j=function(a,b){return null==a?null:Oa(a,b)};sc.I=function(a,b,c){for(;;){if(null==a)return null;a=sc.j(a,b);if(w(c))b=J(c),c=M(c);else return a}};
sc.V=function(a){var b=J(a),c=M(a);a=J(c);c=M(c);return this.I(b,a,c)};sc.Y=2;function tc(a){var b="function"===typeof a;return b?b:null!=a?u===a.Jb?!0:a.Eb?!1:y(ua,a):y(ua,a)}function uc(a,b){this.B=a;this.A=b;this.s=393217;this.F=0}g=uc.prototype;g.U=function(){return this.A};g.X=function(a,b){return new uc(this.B,b)};g.Jb=u;
g.call=function(a){switch(arguments.length-1){case 0:return this.N();case 1:return this.i(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);case 3:return this.o(arguments[1],arguments[2],arguments[3]);case 4:return this.G(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.ia(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.ya(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Sa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.Ta(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.Ua(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.Ha(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.Ia(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.Ja(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.Ka(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.La(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.Ma(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.Na(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.Oa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.Pa(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.Qa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.Ra(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.vb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],
arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",B.i(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(ta(b)))};g.N=function(){return this.B.N?this.B.N():this.B.call(null)};g.i=function(a){return this.B.i?this.B.i(a):this.B.call(null,a)};g.j=function(a,b){return this.B.j?this.B.j(a,b):this.B.call(null,a,b)};g.o=function(a,b,c){return this.B.o?this.B.o(a,b,c):this.B.call(null,a,b,c)};
g.G=function(a,b,c,d){return this.B.G?this.B.G(a,b,c,d):this.B.call(null,a,b,c,d)};g.ia=function(a,b,c,d,e){return this.B.ia?this.B.ia(a,b,c,d,e):this.B.call(null,a,b,c,d,e)};g.ya=function(a,b,c,d,e,f){return this.B.ya?this.B.ya(a,b,c,d,e,f):this.B.call(null,a,b,c,d,e,f)};g.Sa=function(a,b,c,d,e,f,h){return this.B.Sa?this.B.Sa(a,b,c,d,e,f,h):this.B.call(null,a,b,c,d,e,f,h)};g.Ta=function(a,b,c,d,e,f,h,k){return this.B.Ta?this.B.Ta(a,b,c,d,e,f,h,k):this.B.call(null,a,b,c,d,e,f,h,k)};
g.Ua=function(a,b,c,d,e,f,h,k,l){return this.B.Ua?this.B.Ua(a,b,c,d,e,f,h,k,l):this.B.call(null,a,b,c,d,e,f,h,k,l)};g.Ha=function(a,b,c,d,e,f,h,k,l,m){return this.B.Ha?this.B.Ha(a,b,c,d,e,f,h,k,l,m):this.B.call(null,a,b,c,d,e,f,h,k,l,m)};g.Ia=function(a,b,c,d,e,f,h,k,l,m,n){return this.B.Ia?this.B.Ia(a,b,c,d,e,f,h,k,l,m,n):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n)};g.Ja=function(a,b,c,d,e,f,h,k,l,m,n,p){return this.B.Ja?this.B.Ja(a,b,c,d,e,f,h,k,l,m,n,p):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p)};
g.Ka=function(a,b,c,d,e,f,h,k,l,m,n,p,q){return this.B.Ka?this.B.Ka(a,b,c,d,e,f,h,k,l,m,n,p,q):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q)};g.La=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r){return this.B.La?this.B.La(a,b,c,d,e,f,h,k,l,m,n,p,q,r):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r)};g.Ma=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x){return this.B.Ma?this.B.Ma(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x)};
g.Na=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,z){return this.B.Na?this.B.Na(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,z):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,z)};g.Oa=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I){return this.B.Oa?this.B.Oa(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I)};g.Pa=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N){return this.B.Pa?this.B.Pa(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N)};
g.Qa=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N,P){return this.B.Qa?this.B.Qa(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N,P):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N,P)};g.Ra=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N,P,V){return this.B.Ra?this.B.Ra(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N,P,V):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N,P,V)};
g.vb=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N,P,V,X){return vc.vb?vc.vb(this.B,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N,P,new Mb([V,X],0,null)):vc.call(null,this.B,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N,P,V,X)};function wc(a,b){return"function"===typeof a?new uc(a,b):null==a?null:Ua(a,b)}function xc(a){var b=null!=a;return(b?null!=a?a.s&131072||u===a.Sb||(a.s?0:y(Sa,a)):y(Sa,a):b)?Ta(a):null}function yc(a){return null!=a?a.s&16777216||u===a.Cb?!0:a.s?!1:y(eb,a):y(eb,a)}
function zc(a){return null==a?!1:null!=a?a.s&1024||u===a.oc?!0:a.s?!1:y(Na,a):y(Na,a)}function Ac(a){return null!=a?a.s&67108864||u===a.qc?!0:a.s?!1:y(gb,a):y(gb,a)}function Bc(a){return null!=a?a.s&16384||u===a.rc?!0:a.s?!1:y(Ra,a):y(Ra,a)}function Cc(a){return null!=a?a.F&512||u===a.ic?!0:!1:!1}function Dc(a,b,c,d,e){for(;;){if(0===e)return c;c[d]=a[b];d+=1;--e;b+=1}}var Ec={};function Fc(a){return null==a?!1:!1===a?!1:!0}
function Gc(a){return"number"===typeof a&&!isNaN(a)&&Infinity!==a&&parseFloat(a)===parseInt(a,10)}function Hc(a,b){return null!=a&&(a.s&512||u===a.Kb)?a.Ya(null,b):y(Ka,a)?La(a,b):Jb(a,b,Ec)===Ec?!1:!0}function Ic(a,b){var c=H(b);return c?(b=J(c),c=M(c),Jc?Jc(a,b,c):Kc.call(null,a,b,c)):a.N?a.N():a.call(null)}function Lc(a,b,c){for(c=H(c);;)if(c){var d=J(c);b=a.j?a.j(b,d):a.call(null,b,d);if($b(b))return D(b);c=M(c)}else return b}
function Mc(a,b){a=ub(a);if(w(a.na()))for(var c=a.next();;)if(a.na()){var d=a.next();c=b.j?b.j(c,d):b.call(null,c,d);if($b(c))return D(c)}else return c;else return b.N?b.N():b.call(null)}function Nc(a,b,c){for(a=ub(a);;)if(a.na()){var d=a.next();c=b.j?b.j(c,d):b.call(null,c,d);if($b(c))return D(c)}else return c}
function Kc(a){switch(arguments.length){case 2:var b=arguments[0],c=arguments[1];return null!=c&&(c.s&524288||u===c.Ub)?c.ea(null,b):pa(c)?cc(c,b):"string"===typeof c?cc(c,b):y(Va,c)?Wa(c,b):Lb(c)?Mc(c,b):Ic(b,c);case 3:return Jc(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.i(arguments.length)].join(""));}}
function Jc(a,b,c){return null!=c&&(c.s&524288||u===c.Ub)?c.fa(null,a,b):pa(c)?dc(c,a,b):"string"===typeof c?dc(c,a,b):y(Va,c)?Wa(c,a,b):Lb(c)?Nc(c,a,b):Lc(a,b,c)}function Oc(a,b){return(null!=b?b.s&1048576||u===b.Ob||(b.s?0:y(Ya,b)):y(Ya,b))?Za(b,a):Jc(function(c,d){var e=Pa(d);d=Qa(d);return a.o?a.o(c,e,d):a.call(null,c,e,d)},!0,b)}function Pc(a){return a}function Qc(a,b){a=(a-a%b)/b;return 0<=a?Math.floor(a):Math.ceil(a)}
function Sc(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24}var B=function B(a){switch(arguments.length){case 0:return B.N();case 1:return B.i(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return B.I(arguments[0],1<c.length?new Mb(c.slice(1),0,null):null)}};B.N=function(){return""};B.i=function(a){return null==a?"":[a].join("")};
B.I=function(a,b){for(a=new fa(B.i(a));;)if(w(b))a=a.append(B.i(J(b))),b=M(b);else return a.toString()};B.V=function(a){var b=J(a);a=M(a);return this.I(b,a)};B.Y=1;function kc(a,b){if(yc(b))if(fc(a)&&fc(b)&&Q(a)!==Q(b))a=!1;else a:for(a=H(a),b=H(b);;){if(null==a){a=null==b;break a}if(null!=b&&Pb.j(J(a),J(b)))a=M(a),b=M(b);else{a=!1;break a}}else a=null;return Fc(a)}function oc(a,b,c,d,e){this.A=a;this.first=b;this.Ba=c;this.count=d;this.C=e;this.s=65937646;this.F=8192}g=oc.prototype;g.toString=function(){return wb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return O(this,b,0);case 2:return O(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.i=function(b){return O(this,b,0)};a.j=function(b,c){return O(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return R(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return R(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.i=a;b.j=function(c,d){return R(this,c,d)};return b}();g.U=function(){return this.A};g.aa=function(){return 1===this.count?null:this.Ba};g.Z=function(){return this.count};g.T=function(){var a=this.C;return null!=a?a:this.C=a=Ub(this)};g.R=function(a,b){return kc(this,b)};
g.$=function(){return Ua(K,this.A)};g.ea=function(a,b){return Ic(b,this)};g.fa=function(a,b,c){return Lc(b,c,this)};g.da=function(){return this.first};g.ha=function(){return 1===this.count?K:this.Ba};g.P=function(){return this};g.X=function(a,b){return b===this.A?this:new oc(b,this.first,this.Ba,this.count,this.C)};g.ba=function(a,b){return new oc(this.A,b,this,this.count+1,null)};oc.prototype[sa]=function(){return Rb(this)};function Tc(a){this.A=a;this.s=65937614;this.F=8192}g=Tc.prototype;
g.toString=function(){return wb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return O(this,b,0);case 2:return O(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.i=function(b){return O(this,b,0)};a.j=function(b,c){return O(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return R(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return R(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.i=a;b.j=function(c,d){return R(this,c,d)};return b}();g.U=function(){return this.A};g.aa=function(){return null};g.Z=function(){return 0};g.T=function(){return Vb};g.R=function(a,b){return(null!=b?b.s&33554432||u===b.nc||(b.s?0:y(fb,b)):y(fb,b))||yc(b)?null==H(b):!1};g.$=function(){return this};
g.ea=function(a,b){return Ic(b,this)};g.fa=function(a,b,c){return Lc(b,c,this)};g.da=function(){return null};g.ha=function(){return K};g.P=function(){return null};g.X=function(a,b){return b===this.A?this:new Tc(b)};g.ba=function(a,b){return new oc(this.A,b,null,1,null)};var K=new Tc(null);Tc.prototype[sa]=function(){return Rb(this)};function Uc(a,b,c,d){this.A=a;this.first=b;this.Ba=c;this.C=d;this.s=65929452;this.F=8192}g=Uc.prototype;g.toString=function(){return wb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return O(this,b,0);case 2:return O(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.i=function(b){return O(this,b,0)};a.j=function(b,c){return O(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return R(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return R(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.i=a;b.j=function(c,d){return R(this,c,d)};return b}();g.U=function(){return this.A};g.aa=function(){return null==this.Ba?null:H(this.Ba)};g.T=function(){var a=this.C;return null!=a?a:this.C=a=Ub(this)};g.R=function(a,b){return kc(this,b)};g.$=function(){return K};
g.ea=function(a,b){return Ic(b,this)};g.fa=function(a,b,c){return Lc(b,c,this)};g.da=function(){return this.first};g.ha=function(){return null==this.Ba?K:this.Ba};g.P=function(){return this};g.X=function(a,b){return b===this.A?this:new Uc(b,this.first,this.Ba,this.C)};g.ba=function(a,b){return new Uc(null,b,this,null)};Uc.prototype[sa]=function(){return Rb(this)};function S(a,b){return null==b?new oc(null,a,null,1,null):null!=b&&(b.s&64||u===b.eb)?new Uc(null,a,b,null):new Uc(null,a,H(b),null)}
function G(a,b,c,d){this.lb=a;this.name=b;this.Aa=c;this.Xa=d;this.s=2153775105;this.F=4096}g=G.prototype;g.toString=function(){return[":",B.i(this.Aa)].join("")};g.R=function(a,b){return b instanceof G?this.Aa===b.Aa:!1};g.call=function(a){switch(arguments.length-1){case 1:return this.i(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.i(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(ta(b)))};
g.i=function(a){return F(a,this)};g.j=function(a,b){return Jb(a,this,b)};g.T=function(){var a=this.Xa;return null!=a?a:this.Xa=a=Gb(Bb(this.name),Eb(this.lb))+2654435769|0};g.S=function(a,b){return E(b,[":",B.i(this.Aa)].join(""))};function Vc(a){if(null!=a&&(a.F&4096||u===a.Tb))return a.lb;throw Error(["Doesn't support namespace: ",B.i(a)].join(""));}
var Wc=function Wc(a){switch(arguments.length){case 1:return Wc.i(arguments[0]);case 2:return Wc.j(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",B.i(arguments.length)].join(""));}};Wc.i=function(a){if(a instanceof G)return a;if(a instanceof Hb)return new G(Vc(a),Xc.i?Xc.i(a):Xc.call(null,a),a.Fa,null);if(Pb.j("/",a))return new G(null,a,a,null);if("string"===typeof a){var b=a.split("/");return 2===b.length?new G(b[0],b[1],a,null):new G(null,b[0],a,null)}return null};
Wc.j=function(a,b){a=a instanceof G?Xc.i?Xc.i(a):Xc.call(null,a):a instanceof Hb?Xc.i?Xc.i(a):Xc.call(null,a):a;b=b instanceof G?Xc.i?Xc.i(b):Xc.call(null,b):b instanceof Hb?Xc.i?Xc.i(b):Xc.call(null,b):b;return new G(a,b,[w(a)?[B.i(a),"/"].join(""):null,B.i(b)].join(""),null)};Wc.Y=2;function Yc(a,b,c){this.A=a;this.gb=b;this.J=null;this.C=c;this.s=32374988;this.F=1}g=Yc.prototype;g.toString=function(){return wb(this)};
function Zc(a){null!=a.gb&&(a.J=a.gb.N?a.gb.N():a.gb.call(null),a.gb=null);return a.J}g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return O(this,b,0);case 2:return O(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.i=function(b){return O(this,b,0)};a.j=function(b,c){return O(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return R(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return R(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.i=a;b.j=function(c,d){return R(this,c,d)};return b}();g.U=function(){return this.A};g.aa=function(){this.P(null);return null==this.J?null:M(this.J)};g.T=function(){var a=this.C;return null!=a?a:this.C=a=Ub(this)};g.R=function(a,b){return kc(this,b)};g.$=function(){return Ua(K,this.A)};
g.ea=function(a,b){return Ic(b,this)};g.fa=function(a,b,c){return Lc(b,c,this)};g.da=function(){this.P(null);return null==this.J?null:J(this.J)};g.ha=function(){this.P(null);return null!=this.J?Ob(this.J):K};g.P=function(){Zc(this);if(null==this.J)return null;for(var a=this.J;;)if(a instanceof Yc)a=Zc(a);else return this.J=a,H(this.J)};g.X=function(a,b){var c=this;return b===this.A?c:new Yc(b,function(){return c.P(null)},this.C)};g.ba=function(a,b){return S(b,this)};Yc.prototype[sa]=function(){return Rb(this)};
function $c(a){this.buf=a;this.end=0;this.s=2;this.F=0}$c.prototype.add=function(a){this.buf[this.end]=a;return this.end+=1};$c.prototype.la=function(){var a=new ad(this.buf,0,this.end);this.buf=null;return a};$c.prototype.Z=function(){return this.end};function ad(a,b,c){this.l=a;this.ga=b;this.end=c;this.s=524306;this.F=0}g=ad.prototype;g.Z=function(){return this.end-this.ga};g.O=function(a,b){return this.l[this.ga+b]};g.oa=function(a,b,c){return 0<=b&&b<this.end-this.ga?this.l[this.ga+b]:c};
g.tb=function(){if(this.ga===this.end)throw Error("-drop-first of empty chunk");return new ad(this.l,this.ga+1,this.end)};g.ea=function(a,b){return ec(this.l,b,this.l[this.ga],this.ga+1)};g.fa=function(a,b,c){return ec(this.l,b,c,this.ga)};function bd(a,b,c,d){this.la=a;this.ua=b;this.A=c;this.C=d;this.s=31850732;this.F=1536}g=bd.prototype;g.toString=function(){return wb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return O(this,b,0);case 2:return O(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.i=function(b){return O(this,b,0)};a.j=function(b,c){return O(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return R(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return R(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.i=a;b.j=function(c,d){return R(this,c,d)};return b}();g.U=function(){return this.A};g.aa=function(){return 1<wa(this.la)?new bd(nb(this.la),this.ua,null,null):null==this.ua?null:db(this.ua)};g.T=function(){var a=this.C;return null!=a?a:this.C=a=Ub(this)};
g.R=function(a,b){return kc(this,b)};g.$=function(){return K};g.da=function(){return Ca(this.la,0)};g.ha=function(){return 1<wa(this.la)?new bd(nb(this.la),this.ua,null,null):null==this.ua?K:this.ua};g.P=function(){return this};g.ab=function(){return this.la};g.Da=function(){return null==this.ua?K:this.ua};g.X=function(a,b){return b===this.A?this:new bd(this.la,this.ua,b,this.C)};g.ba=function(a,b){return S(b,this)};g.nb=function(){return null==this.ua?null:this.ua};bd.prototype[sa]=function(){return Rb(this)};
function cd(a,b){return 0===wa(a)?b:new bd(a,b,null,null)}function dd(a,b){a.add(b)}function ed(a,b){if(fc(b))return Q(b);var c=0;for(b=H(b);;)if(null!=b&&c<a)c+=1,b=M(b);else return c}var fd=function fd(a){if(null==a)return null;var c=M(a);return null==c?H(J(a)):S(J(a),fd.i?fd.i(c):fd.call(null,c))};
function gd(a,b,c){var d=H(c);if(0===b)return a.N?a.N():a.call(null);c=C(d);var e=Ea(d);if(1===b)return a.i?a.i(c):a.call(null,c);d=C(e);var f=Ea(e);if(2===b)return a.j?a.j(c,d):a.call(null,c,d);e=C(f);var h=Ea(f);if(3===b)return a.o?a.o(c,d,e):a.call(null,c,d,e);f=C(h);var k=Ea(h);if(4===b)return a.G?a.G(c,d,e,f):a.call(null,c,d,e,f);h=C(k);var l=Ea(k);if(5===b)return a.ia?a.ia(c,d,e,f,h):a.call(null,c,d,e,f,h);k=C(l);var m=Ea(l);if(6===b)return a.ya?a.ya(c,d,e,f,h,k):a.call(null,c,d,e,f,h,k);l=
C(m);var n=Ea(m);if(7===b)return a.Sa?a.Sa(c,d,e,f,h,k,l):a.call(null,c,d,e,f,h,k,l);m=C(n);var p=Ea(n);if(8===b)return a.Ta?a.Ta(c,d,e,f,h,k,l,m):a.call(null,c,d,e,f,h,k,l,m);n=C(p);var q=Ea(p);if(9===b)return a.Ua?a.Ua(c,d,e,f,h,k,l,m,n):a.call(null,c,d,e,f,h,k,l,m,n);p=C(q);var r=Ea(q);if(10===b)return a.Ha?a.Ha(c,d,e,f,h,k,l,m,n,p):a.call(null,c,d,e,f,h,k,l,m,n,p);q=C(r);var x=Ea(r);if(11===b)return a.Ia?a.Ia(c,d,e,f,h,k,l,m,n,p,q):a.call(null,c,d,e,f,h,k,l,m,n,p,q);r=C(x);var z=Ea(x);if(12===
b)return a.Ja?a.Ja(c,d,e,f,h,k,l,m,n,p,q,r):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r);x=C(z);var I=Ea(z);if(13===b)return a.Ka?a.Ka(c,d,e,f,h,k,l,m,n,p,q,r,x):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,x);z=C(I);var N=Ea(I);if(14===b)return a.La?a.La(c,d,e,f,h,k,l,m,n,p,q,r,x,z):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,x,z);I=C(N);var P=Ea(N);if(15===b)return a.Ma?a.Ma(c,d,e,f,h,k,l,m,n,p,q,r,x,z,I):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I);N=C(P);var V=Ea(P);if(16===b)return a.Na?a.Na(c,d,e,f,h,k,l,m,n,p,q,r,x,
z,I,N):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N);P=C(V);var X=Ea(V);if(17===b)return a.Oa?a.Oa(c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N,P):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N,P);V=C(X);var ka=Ea(X);if(18===b)return a.Pa?a.Pa(c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N,P,V):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N,P,V);X=C(ka);ka=Ea(ka);if(19===b)return a.Qa?a.Qa(c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N,P,V,X):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N,P,V,X);var Ja=C(ka);Ea(ka);if(20===b)return a.Ra?a.Ra(c,d,e,
f,h,k,l,m,n,p,q,r,x,z,I,N,P,V,X,Ja):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,x,z,I,N,P,V,X,Ja);throw Error("Only up to 20 arguments supported on functions");}function hd(a){return null!=a&&(a.s&128||u===a.cb)?a.aa():H(Ob(a))}function id(a,b,c){return null==c?a.i?a.i(b):a.call(a,b):jd(a,b,C(c),hd(c))}function jd(a,b,c,d){return null==d?a.j?a.j(b,c):a.call(a,b,c):kd(a,b,c,C(d),hd(d))}function kd(a,b,c,d,e){return null==e?a.o?a.o(b,c,d):a.call(a,b,c,d):ld(a,b,c,d,C(e),hd(e))}
function ld(a,b,c,d,e,f){if(null==f)return a.G?a.G(b,c,d,e):a.call(a,b,c,d,e);var h=C(f),k=M(f);if(null==k)return a.ia?a.ia(b,c,d,e,h):a.call(a,b,c,d,e,h);f=C(k);var l=M(k);if(null==l)return a.ya?a.ya(b,c,d,e,h,f):a.call(a,b,c,d,e,h,f);k=C(l);var m=M(l);if(null==m)return a.Sa?a.Sa(b,c,d,e,h,f,k):a.call(a,b,c,d,e,h,f,k);l=C(m);var n=M(m);if(null==n)return a.Ta?a.Ta(b,c,d,e,h,f,k,l):a.call(a,b,c,d,e,h,f,k,l);m=C(n);var p=M(n);if(null==p)return a.Ua?a.Ua(b,c,d,e,h,f,k,l,m):a.call(a,b,c,d,e,h,f,k,l,m);
n=C(p);var q=M(p);if(null==q)return a.Ha?a.Ha(b,c,d,e,h,f,k,l,m,n):a.call(a,b,c,d,e,h,f,k,l,m,n);p=C(q);var r=M(q);if(null==r)return a.Ia?a.Ia(b,c,d,e,h,f,k,l,m,n,p):a.call(a,b,c,d,e,h,f,k,l,m,n,p);q=C(r);var x=M(r);if(null==x)return a.Ja?a.Ja(b,c,d,e,h,f,k,l,m,n,p,q):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q);r=C(x);var z=M(x);if(null==z)return a.Ka?a.Ka(b,c,d,e,h,f,k,l,m,n,p,q,r):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r);x=C(z);var I=M(z);if(null==I)return a.La?a.La(b,c,d,e,h,f,k,l,m,n,p,q,r,x):a.call(a,b,c,d,
e,h,f,k,l,m,n,p,q,r,x);z=C(I);var N=M(I);if(null==N)return a.Ma?a.Ma(b,c,d,e,h,f,k,l,m,n,p,q,r,x,z):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,x,z);I=C(N);var P=M(N);if(null==P)return a.Na?a.Na(b,c,d,e,h,f,k,l,m,n,p,q,r,x,z,I):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,x,z,I);N=C(P);var V=M(P);if(null==V)return a.Oa?a.Oa(b,c,d,e,h,f,k,l,m,n,p,q,r,x,z,I,N):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,x,z,I,N);P=C(V);var X=M(V);if(null==X)return a.Pa?a.Pa(b,c,d,e,h,f,k,l,m,n,p,q,r,x,z,I,N,P):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,
r,x,z,I,N,P);V=C(X);var ka=M(X);if(null==ka)return a.Qa?a.Qa(b,c,d,e,h,f,k,l,m,n,p,q,r,x,z,I,N,P,V):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,x,z,I,N,P,V);X=C(ka);ka=M(ka);if(null==ka)return a.Ra?a.Ra(b,c,d,e,h,f,k,l,m,n,p,q,r,x,z,I,N,P,V,X):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,x,z,I,N,P,V,X);b=[b,c,d,e,h,f,k,l,m,n,p,q,r,x,z,I,N,P,V,X];for(c=ka;;)if(c)b.push(C(c)),c=M(c);else break;return a.apply(a,b)}
function vc(a){switch(arguments.length){case 2:return md(arguments[0],arguments[1]);case 3:return nd(arguments[0],arguments[1],arguments[2]);case 4:var b=arguments[0];var c=arguments[1],d=arguments[2],e=arguments[3];b.V?(c=S(c,S(d,e)),d=b.Y,e=2+ed(d-1,e),b=e<=d?gd(b,e,c):b.V(c)):b=jd(b,c,d,H(e));return b;case 5:return od(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:b=[];e=arguments.length;for(c=0;;)if(c<e)b.push(arguments[c]),c+=1;else break;return pd(arguments[0],arguments[1],
arguments[2],arguments[3],arguments[4],5<b.length?new Mb(b.slice(5),0,null):null)}}function md(a,b){if(a.V){var c=a.Y,d=ed(c+1,b);return d<=c?gd(a,d,b):a.V(b)}b=H(b);return null==b?a.N?a.N():a.call(a):id(a,C(b),hd(b))}function nd(a,b,c){if(a.V){b=S(b,c);var d=a.Y;c=ed(d,c)+1;return c<=d?gd(a,c,b):a.V(b)}return id(a,b,H(c))}function od(a,b,c,d,e){return a.V?(b=S(b,S(c,S(d,e))),c=a.Y,e=3+ed(c-2,e),e<=c?gd(a,e,b):a.V(b)):kd(a,b,c,d,H(e))}
function pd(a,b,c,d,e,f){return a.V?(f=fd(f),b=S(b,S(c,S(d,S(e,f)))),c=a.Y,f=4+ed(c-3,f),f<=c?gd(a,f,b):a.V(b)):ld(a,b,c,d,e,fd(f))}function qd(a){if(null!=a&&(a.s&64||u===a.eb))if(M(a)){a:{var b=[];for(a=H(a);;)if(null!=a)b.push(J(a)),a=M(a);else break a}b=rc(b)}else b=H(a)?J(a):rd;else b=a;return b}function sd(a){this.cc=a;this.s=393216;this.F=0}g=sd.prototype;g.X=function(a,b){return new sd(b)};g.U=function(){return this.cc};g.na=function(){return!1};g.next=function(){return Error("No such element")};
g.remove=function(){return Error("Unsupported operation")};function td(a,b){for(;;){if(null==H(b))return!0;var c=J(b);c=a.i?a.i(c):a.call(null,c);if(w(c))b=M(b);else return!1}}
function ud(a){var b=D(U);return function(){function c(l,m,n){return a.G?a.G(b,l,m,n):a.call(null,b,l,m,n)}function d(l,m){return a.o?a.o(b,l,m):a.call(null,b,l,m)}function e(l){return a.j?a.j(b,l):a.call(null,b,l)}function f(){return a.i?a.i(b):a.call(null,b)}var h=null,k=function(){function l(n,p,q,r){var x=null;if(3<arguments.length){x=0;for(var z=Array(arguments.length-3);x<z.length;)z[x]=arguments[x+3],++x;x=new Mb(z,0,null)}return m.call(this,n,p,q,x)}function m(n,p,q,r){return pd(a,b,n,p,q,
lc([r]))}l.Y=3;l.V=function(n){var p=J(n);n=M(n);var q=J(n);n=M(n);var r=J(n);n=Ob(n);return m(p,q,r,n)};l.I=m;return l}();h=function(l,m,n,p){switch(arguments.length){case 0:return f.call(this);case 1:return e.call(this,l);case 2:return d.call(this,l,m);case 3:return c.call(this,l,m,n);default:var q=null;if(3<arguments.length){q=0;for(var r=Array(arguments.length-3);q<r.length;)r[q]=arguments[q+3],++q;q=new Mb(r,0,null)}return k.I(l,m,n,q)}throw Error("Invalid arity: "+arguments.length);};h.Y=3;
h.V=k.V;h.N=f;h.i=e;h.j=d;h.o=c;h.I=k.I;return h}()}function vd(a){this.state=a;this.Ib=this.fc=this.A=null;this.F=16386;this.s=6455296}vd.prototype.R=function(a,b){return this===b};vd.prototype.ub=function(){return this.state};vd.prototype.U=function(){return this.A};vd.prototype.T=function(){return ba(this)};
function wd(a,b){if(a instanceof vd){var c=a.fc;if(null!=c&&!w(c.i?c.i(b):c.call(null,b)))throw Error("Validator rejected reference state");c=a.state;a.state=b;if(null!=a.Ib)a:for(var d=H(a.Ib),e=null,f=0,h=0;;)if(h<f){var k=e.O(null,h),l=T(k,0,null);k=T(k,1,null);k.G?k.G(l,a,c,b):k.call(null,l,a,c,b);h+=1}else if(d=H(d))Cc(d)?(e=ob(d),d=pb(d),l=e,f=Q(e),e=l):(e=J(d),l=T(e,0,null),k=T(e,1,null),k.G?k.G(l,a,c,b):k.call(null,l,a,c,b),d=M(d),e=null,f=0),h=0;else break a;return b}return qb(a,b)}
var xd=function xd(a){switch(arguments.length){case 2:return xd.j(arguments[0],arguments[1]);case 3:return xd.o(arguments[0],arguments[1],arguments[2]);case 4:return xd.G(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return xd.I(arguments[0],arguments[1],arguments[2],arguments[3],4<c.length?new Mb(c.slice(4),0,null):null)}};
xd.j=function(a,b){if(a instanceof vd){var c=a.state;b=b.i?b.i(c):b.call(null,c);a=wd(a,b)}else a=rb(a,b);return a};xd.o=function(a,b,c){if(a instanceof vd){var d=a.state;b=b.j?b.j(d,c):b.call(null,d,c);a=wd(a,b)}else a=rb(a,b,c);return a};xd.G=function(a,b,c,d){if(a instanceof vd){var e=a.state;b=b.o?b.o(e,c,d):b.call(null,e,c,d);a=wd(a,b)}else a=rb(a,b,c,d);return a};xd.I=function(a,b,c,d,e){return a instanceof vd?wd(a,od(b,a.state,c,d,e)):rb(a,b,c,d,e)};
xd.V=function(a){var b=J(a),c=M(a);a=J(c);var d=M(c);c=J(d);var e=M(d);d=J(e);e=M(e);return this.I(b,a,c,d,e)};xd.Y=4;
var yd=function yd(a){switch(arguments.length){case 1:return yd.i(arguments[0]);case 2:return yd.j(arguments[0],arguments[1]);case 3:return yd.o(arguments[0],arguments[1],arguments[2]);case 4:return yd.G(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return yd.I(arguments[0],arguments[1],arguments[2],arguments[3],4<c.length?new Mb(c.slice(4),0,null):null)}};
yd.i=function(a){return function(b){return function(){function c(k,l){l=a.i?a.i(l):a.call(null,l);return b.j?b.j(k,l):b.call(null,k,l)}function d(k){return b.i?b.i(k):b.call(null,k)}function e(){return b.N?b.N():b.call(null)}var f=null,h=function(){function k(m,n,p){var q=null;if(2<arguments.length){q=0;for(var r=Array(arguments.length-2);q<r.length;)r[q]=arguments[q+2],++q;q=new Mb(r,0,null)}return l.call(this,m,n,q)}function l(m,n,p){n=nd(a,n,p);return b.j?b.j(m,n):b.call(null,m,n)}k.Y=2;k.V=function(m){var n=
J(m);m=M(m);var p=J(m);m=Ob(m);return l(n,p,m)};k.I=l;return k}();f=function(k,l,m){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,k);case 2:return c.call(this,k,l);default:var n=null;if(2<arguments.length){n=0;for(var p=Array(arguments.length-2);n<p.length;)p[n]=arguments[n+2],++n;n=new Mb(p,0,null)}return h.I(k,l,n)}throw Error("Invalid arity: "+arguments.length);};f.Y=2;f.V=h.V;f.N=e;f.i=d;f.j=c;f.I=h.I;return f}()}};
yd.j=function(a,b){return new Yc(null,function(){var c=H(b);if(c){if(Cc(c)){for(var d=ob(c),e=Q(d),f=new $c(Array(e)),h=0;;)if(h<e)dd(f,function(){var k=Ca(d,h);return a.i?a.i(k):a.call(null,k)}()),h+=1;else break;return cd(f.la(),yd.j(a,pb(c)))}return S(function(){var k=J(c);return a.i?a.i(k):a.call(null,k)}(),yd.j(a,Ob(c)))}return null},null)};
yd.o=function(a,b,c){return new Yc(null,function(){var d=H(b),e=H(c);if(d&&e){var f=J(d);var h=J(e);f=a.j?a.j(f,h):a.call(null,f,h);d=S(f,yd.o(a,Ob(d),Ob(e)))}else d=null;return d},null)};yd.G=function(a,b,c,d){return new Yc(null,function(){var e=H(b),f=H(c),h=H(d);if(e&&f&&h){var k=J(e);var l=J(f),m=J(h);k=a.o?a.o(k,l,m):a.call(null,k,l,m);e=S(k,yd.G(a,Ob(e),Ob(f),Ob(h)))}else e=null;return e},null)};
yd.I=function(a,b,c,d,e){return yd.j(function(f){return md(a,f)},function k(h){return new Yc(null,function(){var l=yd.j(H,h);return td(Pc,l)?S(yd.j(J,l),k(yd.j(Ob,l))):null},null)}(mc.I(e,d,lc([c,b]))))};yd.V=function(a){var b=J(a),c=M(a);a=J(c);var d=M(c);c=J(d);var e=M(d);d=J(e);e=M(e);return this.I(b,a,c,d,e)};yd.Y=4;function zd(a,b,c,d){this.A=a;this.count=b;this.D=c;this.next=d;this.C=null;this.s=32374988;this.F=262145}g=zd.prototype;g.toString=function(){return wb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return O(this,b,0);case 2:return O(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.i=function(b){return O(this,b,0)};a.j=function(b,c){return O(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return R(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return R(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.i=a;b.j=function(c,d){return R(this,c,d)};return b}();g.U=function(){return this.A};g.aa=function(){return null==this.next?1<this.count?this.next=new zd(null,this.count-1,this.D,null):-1===this.count?this:null:this.next};
g.T=function(){var a=this.C;return null!=a?a:this.C=a=Ub(this)};g.R=function(a,b){return kc(this,b)};g.$=function(){return K};g.ea=function(a,b){if(-1===this.count)for(var c=b.j?b.j(this.D,this.D):b.call(null,this.D,this.D);;){if($b(c))return D(c);c=b.j?b.j(c,this.D):b.call(null,c,this.D)}else for(a=1,c=this.D;;)if(a<this.count){c=b.j?b.j(c,this.D):b.call(null,c,this.D);if($b(c))return D(c);a+=1}else return c};
g.fa=function(a,b,c){if(-1===this.count)for(c=b.j?b.j(c,this.D):b.call(null,c,this.D);;){if($b(c))return D(c);c=b.j?b.j(c,this.D):b.call(null,c,this.D)}else for(a=0;;)if(a<this.count){c=b.j?b.j(c,this.D):b.call(null,c,this.D);if($b(c))return D(c);a+=1}else return c};g.da=function(){return this.D};g.ha=function(){return null==this.next?1<this.count?this.next=new zd(null,this.count-1,this.D,null):-1===this.count?this:K:this.next};g.P=function(){return this};
g.X=function(a,b){return b===this.A?this:new zd(b,this.count,this.D,this.next)};g.ba=function(a,b){return S(b,this)};function Ad(a,b){return new Yc(null,function(){var c=H(b);if(c){if(Cc(c)){for(var d=ob(c),e=Q(d),f=new $c(Array(e)),h=0;;)if(h<e){var k=Ca(d,h);k=a.i?a.i(k):a.call(null,k);if(w(k)){k=f;var l=Ca(d,h);k.add(l)}h+=1}else break;return cd(f.la(),Ad(a,pb(c)))}d=J(c);c=Ob(c);return w(a.i?a.i(d):a.call(null,d))?S(d,Ad(a,c)):Ad(a,c)}return null},null)}
function Bd(a,b){return null!=a?null!=a&&(a.F&4||u===a.kc)?Ua(lb(Jc(kb,jb(a),b)),xc(a)):Jc(Aa,a,b):Jc(mc,a,b)}
var Cd=function Cd(a,b,c){var e=H(b);b=J(e);var f=M(e);if(f){e=qc.o;var h=F(a,b);c=Cd.o?Cd.o(h,f,c):Cd.call(null,h,f,c);a=e.call(qc,a,b,c)}else a=qc.o(a,b,c);return a},Dd=function Dd(a){switch(arguments.length){case 3:return Dd.o(arguments[0],arguments[1],arguments[2]);case 4:return Dd.G(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Dd.ia(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return Dd.ya(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],
arguments[5]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Dd.I(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],6<c.length?new Mb(c.slice(6),0,null):null)}};Dd.o=function(a,b,c){var d=qc.o,e=F(a,b);c=c.i?c.i(e):c.call(null,e);return d.call(qc,a,b,c)};Dd.G=function(a,b,c,d){var e=qc.o,f=F(a,b);c=c.j?c.j(f,d):c.call(null,f,d);return e.call(qc,a,b,c)};
Dd.ia=function(a,b,c,d,e){var f=qc.o,h=F(a,b);c=c.o?c.o(h,d,e):c.call(null,h,d,e);return f.call(qc,a,b,c)};Dd.ya=function(a,b,c,d,e,f){var h=qc.o,k=F(a,b);c=c.G?c.G(k,d,e,f):c.call(null,k,d,e,f);return h.call(qc,a,b,c)};Dd.I=function(a,b,c,d,e,f,h){return qc.o(a,b,pd(c,F(a,b),d,e,f,lc([h])))};Dd.V=function(a){var b=J(a),c=M(a);a=J(c);var d=M(c);c=J(d);var e=M(d);d=J(e);var f=M(e);e=J(f);var h=M(f);f=J(h);h=M(h);return this.I(b,a,c,d,e,f,h)};Dd.Y=6;function Ed(a,b){this.K=a;this.l=b}
function Fd(a){return new Ed(a,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])}function Gd(a){a=a.u;return 32>a?0:a-1>>>5<<5}function Hd(a,b,c){for(;;){if(0===b)return c;var d=Fd(a);d.l[0]=c;c=d;b-=5}}var Id=function Id(a,b,c,d){var f=new Ed(c.K,ta(c.l)),h=a.u-1>>>b&31;5===b?f.l[h]=d:(c=c.l[h],null!=c?(b-=5,a=Id.G?Id.G(a,b,c,d):Id.call(null,a,b,c,d)):a=Hd(null,b-5,d),f.l[h]=a);return f};
function Jd(a,b){if(b>=Gd(a))return a.ma;var c=a.root;for(a=a.shift;;)if(0<a){var d=a-5;c=c.l[b>>>a&31];a=d}else return c.l}function Kd(a,b){if(0<=b&&b<a.u)b=Jd(a,b);else throw a=a.u,Error(["No item ",B.i(b)," in vector of length ",B.i(a)].join(""));return b}var Ld=function Ld(a,b,c,d,e){var h=new Ed(c.K,ta(c.l));if(0===b)h.l[d&31]=e;else{var k=d>>>b&31;b-=5;c=c.l[k];a=Ld.ia?Ld.ia(a,b,c,d,e):Ld.call(null,a,b,c,d,e);h.l[k]=a}return h};
function Md(a,b,c){this.sb=this.v=0;this.l=a;this.ec=b;this.start=0;this.end=c}Md.prototype.na=function(){return this.v<this.end};Md.prototype.next=function(){32===this.v-this.sb&&(this.l=Jd(this.ec,this.v),this.sb+=32);var a=this.l[this.v&31];this.v+=1;return a};function Nd(a,b,c,d){return c<d?Od(a,b,hc(a,c),c+1,d):b.N?b.N():b.call(null)}
function Od(a,b,c,d,e){var f=c;c=d;for(d=Jd(a,d);;)if(c<e){var h=c&31;d=0===h?Jd(a,c):d;h=d[h];f=b.j?b.j(f,h):b.call(null,f,h);if($b(f))return D(f);c+=1}else return f}function W(a,b,c,d,e,f){this.A=a;this.u=b;this.shift=c;this.root=d;this.ma=e;this.C=f;this.s=167666463;this.F=401412}g=W.prototype;g.toString=function(){return wb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return O(this,b,0);case 2:return O(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.i=function(b){return O(this,b,0)};a.j=function(b,c){return O(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return R(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return R(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.i=a;b.j=function(c,d){return R(this,c,d)};return b}();g.qa=function(a,b){return this.W(null,b,null)};g.W=function(a,b,c){return"number"===typeof b?this.oa(null,b,c):c};
g.ob=function(a,b,c){a=0;for(var d=c;;)if(a<this.u){var e=Jd(this,a);c=e.length;a:for(var f=0;;)if(f<c){var h=f+a,k=e[f];d=b.o?b.o(d,h,k):b.call(null,d,h,k);if($b(d)){e=d;break a}f+=1}else{e=d;break a}if($b(e))return D(e);a+=c;d=e}else return d};g.O=function(a,b){return Kd(this,b)[b&31]};g.oa=function(a,b,c){return 0<=b&&b<this.u?Jd(this,b)[b&31]:c};
g.xb=function(a,b){if(0<=a&&a<this.u){if(Gd(this)<=a){var c=ta(this.ma);c[a&31]=b;return new W(this.A,this.u,this.shift,this.root,c,null)}return new W(this.A,this.u,this.shift,Ld(this,this.shift,this.root,a,b),this.ma,null)}if(a===this.u)return this.ba(null,b);throw Error(["Index ",B.i(a)," out of bounds  [0,",B.i(this.u),"]"].join(""));};g.ra=function(){var a=this.u;return new Md(0<Q(this)?Jd(this,0):null,this,a)};g.U=function(){return this.A};g.Z=function(){return this.u};
g.T=function(){var a=this.C;return null!=a?a:this.C=a=Ub(this)};g.R=function(a,b){if(b instanceof W)if(this.u===Q(b))for(a=this.ra(null),b=b.ra(null);;)if(a.na()){var c=a.next(),d=b.next();if(!Pb.j(c,d))return!1}else return!0;else return!1;else return kc(this,b)};g.bb=function(){return new Pd(this.u,this.shift,Qd.i?Qd.i(this.root):Qd.call(null,this.root),Rd.i?Rd.i(this.ma):Rd.call(null,this.ma))};g.$=function(){return Ua(nc,this.A)};g.ea=function(a,b){return Nd(this,b,0,this.u)};
g.fa=function(a,b,c){a=0;for(var d=c;;)if(a<this.u){var e=Jd(this,a);c=e.length;a:for(var f=0;;)if(f<c){var h=e[f];d=b.j?b.j(d,h):b.call(null,d,h);if($b(d)){e=d;break a}f+=1}else{e=d;break a}if($b(e))return D(e);a+=c;d=e}else return d};g.Ca=function(a,b,c){if("number"===typeof b)return this.xb(b,c);throw Error("Vector's key for assoc must be a number.");};g.Ya=function(a,b){return Gc(b)?0<=b&&b<this.u:!1};
g.P=function(){if(0===this.u)return null;if(32>=this.u)return new Mb(this.ma,0,null);a:{var a=this.root;for(var b=this.shift;;)if(0<b)b-=5,a=a.l[0];else{a=a.l;break a}}return Sd?Sd(this,a,0,0):Td.call(null,this,a,0,0)};g.X=function(a,b){return b===this.A?this:new W(b,this.u,this.shift,this.root,this.ma,this.C)};
g.ba=function(a,b){if(32>this.u-Gd(this)){a=this.ma.length;for(var c=Array(a+1),d=0;;)if(d<a)c[d]=this.ma[d],d+=1;else break;c[a]=b;return new W(this.A,this.u+1,this.shift,this.root,c,null)}a=(c=this.u>>>5>1<<this.shift)?this.shift+5:this.shift;c?(c=Fd(null),c.l[0]=this.root,d=Hd(null,this.shift,new Ed(null,this.ma)),c.l[1]=d):c=Id(this,this.shift,this.root,new Ed(null,this.ma));return new W(this.A,this.u+1,a,c,[b],null)};
g.call=function(a){switch(arguments.length-1){case 1:return this.i(arguments[1]);default:throw Error(["Invalid arity: ",B.i(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(ta(b)))};g.i=function(a){if("number"===typeof a)return this.O(null,a);throw Error("Key must be integer");};
var Y=new Ed(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),nc=new W(null,0,5,Y,[],Vb);W.prototype[sa]=function(){return Rb(this)};
function Ud(a){if(w(Vd.i?Vd.i(a):Vd.call(null,a)))a=new W(null,2,5,Y,[Wd.i?Wd.i(a):Wd.call(null,a),Xd.i?Xd.i(a):Xd.call(null,a)],null);else if(Bc(a))a=wc(a,null);else if(pa(a))a:{var b=a.length;if(32>b)a=new W(null,b,5,Y,a,null);else for(var c=32,d=(new W(null,32,5,Y,a.slice(0,32),null)).bb(null);;)if(c<b){var e=c+1;d=kb(d,a[c]);c=e}else{a=lb(d);break a}}else a=lb(Jc(kb,jb(nc),a));return a}
function Yd(a,b,c,d,e){this.pa=a;this.node=b;this.v=c;this.ga=d;this.A=e;this.C=null;this.s=32375020;this.F=263680}g=Yd.prototype;g.toString=function(){return wb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return O(this,b,0);case 2:return O(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.i=function(b){return O(this,b,0)};a.j=function(b,c){return O(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return R(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return R(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.i=a;b.j=function(c,d){return R(this,c,d)};return b}();g.U=function(){return this.A};g.aa=function(){if(this.ga+1<this.node.length){var a=this.pa;var b=this.node,c=this.v,d=this.ga+1;a=Sd?Sd(a,b,c,d):Td.call(null,a,b,c,d);return null==a?null:a}return this.nb()};
g.T=function(){var a=this.C;return null!=a?a:this.C=a=Ub(this)};g.R=function(a,b){return kc(this,b)};g.$=function(){return K};g.ea=function(a,b){return Nd(this.pa,b,this.v+this.ga,Q(this.pa))};g.fa=function(a,b,c){return Od(this.pa,b,c,this.v+this.ga,Q(this.pa))};g.da=function(){return this.node[this.ga]};g.ha=function(){if(this.ga+1<this.node.length){var a=this.pa;var b=this.node,c=this.v,d=this.ga+1;a=Sd?Sd(a,b,c,d):Td.call(null,a,b,c,d);return null==a?K:a}return this.Da(null)};g.P=function(){return this};
g.ab=function(){var a=this.node;return new ad(a,this.ga,a.length)};g.Da=function(){var a=this.v+this.node.length;if(a<wa(this.pa)){var b=this.pa,c=Jd(this.pa,a);return Sd?Sd(b,c,a,0):Td.call(null,b,c,a,0)}return K};g.X=function(a,b){return b===this.A?this:Zd?Zd(this.pa,this.node,this.v,this.ga,b):Td.call(null,this.pa,this.node,this.v,this.ga,b)};g.ba=function(a,b){return S(b,this)};
g.nb=function(){var a=this.v+this.node.length;if(a<wa(this.pa)){var b=this.pa,c=Jd(this.pa,a);return Sd?Sd(b,c,a,0):Td.call(null,b,c,a,0)}return null};Yd.prototype[sa]=function(){return Rb(this)};
function Td(a){switch(arguments.length){case 3:var b=arguments[0],c=arguments[1],d=arguments[2];return new Yd(b,Kd(b,c),c,d,null);case 4:return Sd(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Zd(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",B.i(arguments.length)].join(""));}}function Sd(a,b,c,d){return new Yd(a,b,c,d,null)}function Zd(a,b,c,d,e){return new Yd(a,b,c,d,e)}
function $d(a,b){return a===b.K?b:new Ed(a,ta(b.l))}function Qd(a){return new Ed({},ta(a.l))}function Rd(a){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];Dc(a,0,b,0,a.length);return b}var ae=function ae(a,b,c,d){c=$d(a.root.K,c);var f=a.u-1>>>b&31;if(5===b)a=d;else{var h=c.l[f];null!=h?(b-=5,a=ae.G?ae.G(a,b,h,d):ae.call(null,a,b,h,d)):a=Hd(a.root.K,b-5,d)}c.l[f]=a;return c};
function Pd(a,b,c,d){this.u=a;this.shift=b;this.root=c;this.ma=d;this.F=88;this.s=275}g=Pd.prototype;
g.fb=function(a,b){if(this.root.K){if(32>this.u-Gd(this))this.ma[this.u&31]=b;else{a=new Ed(this.root.K,this.ma);var c=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];c[0]=b;this.ma=c;this.u>>>5>1<<this.shift?(b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],c=this.shift+
5,b[0]=this.root,b[1]=Hd(this.root.K,this.shift,a),this.root=new Ed(this.root.K,b),this.shift=c):this.root=ae(this,this.shift,this.root,a)}this.u+=1;return this}throw Error("conj! after persistent!");};g.pb=function(){if(this.root.K){this.root.K=null;var a=this.u-Gd(this),b=Array(a);Dc(this.ma,0,b,0,a);return new W(null,this.u,this.shift,this.root,b,null)}throw Error("persistent! called twice");};
g.Za=function(a,b,c){if("number"===typeof b)return be(this,b,c);throw Error("TransientVector's key for assoc! must be a number.");};
function be(a,b,c){if(a.root.K){if(0<=b&&b<a.u){if(Gd(a)<=b)a.ma[b&31]=c;else{var d=function k(f,h){h=$d(a.root.K,h);if(0===f)h.l[b&31]=c;else{var l=b>>>f&31;f=k(f-5,h.l[l]);h.l[l]=f}return h}(a.shift,a.root);a.root=d}return a}if(b===a.u)return a.fb(null,c);throw Error(["Index ",B.i(b)," out of bounds for TransientVector of length",B.i(a.u)].join(""));}throw Error("assoc! after persistent!");}g.Z=function(){if(this.root.K)return this.u;throw Error("count after persistent!");};
g.O=function(a,b){if(this.root.K)return Kd(this,b)[b&31];throw Error("nth after persistent!");};g.oa=function(a,b,c){return 0<=b&&b<this.u?this.O(null,b):c};g.qa=function(a,b){return this.W(null,b,null)};g.W=function(a,b,c){if(this.root.K)return"number"===typeof b?this.oa(null,b,c):c;throw Error("lookup after persistent!");};
g.call=function(a){switch(arguments.length-1){case 1:return this.i(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.i(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(ta(b)))};g.i=function(a){return this.qa(null,a)};g.j=function(a,b){return this.W(null,a,b)};function ce(){this.s=2097152;this.F=0}ce.prototype.R=function(){return!1};var de=new ce;
function ee(a,b){return Fc(zc(b)&&!Ac(b)?Q(a)===Q(b)?(null!=a?a.s&1048576||u===a.Ob||(a.s?0:y(Ya,a)):y(Ya,a))?Oc(function(c,d,e){return Pb.j(Jb(b,d,de),e)?!0:new Zb},a):td(function(c){return Pb.j(Jb(b,J(c),de),J(M(c)))},a):null:null)}function fe(a){this.J=a}fe.prototype.next=function(){if(null!=this.J){var a=J(this.J),b=T(a,0,null);a=T(a,1,null);this.J=M(this.J);return{value:[b,a],done:!1}}return{value:null,done:!0}};
function ge(a,b){if(b instanceof G)a:{var c=a.length;b=b.Aa;for(var d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof G&&b===a[d].Aa){a=d;break a}d+=2}}else if("string"===typeof b||"number"===typeof b)a:for(c=a.length,d=0;;){if(c<=d){a=-1;break a}if(b===a[d]){a=d;break a}d+=2}else if(b instanceof Hb)a:for(c=a.length,b=b.Fa,d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof Hb&&b===a[d].Fa){a=d;break a}d+=2}else if(null==b)a:for(b=a.length,c=0;;){if(b<=c){a=-1;break a}if(null==a[c]){a=c;break a}c+=2}else a:for(c=
a.length,d=0;;){if(c<=d){a=-1;break a}if(Pb.j(b,a[d])){a=d;break a}d+=2}return a}function he(a,b){this.key=a;this.D=b;this.C=null;this.s=166619935;this.F=0}g=he.prototype;g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return O(this,b,0);case 2:return O(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.i=function(b){return O(this,b,0)};a.j=function(b,c){return O(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return R(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return R(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.i=a;b.j=function(c,d){return R(this,c,d)};return b}();g.qa=function(a,b){return this.oa(null,b,null)};g.W=function(a,b,c){return this.oa(null,b,c)};g.O=function(a,b){if(0===b)return this.key;if(1===b)return this.D;throw Error("Index out of bounds");};
g.oa=function(a,b,c){return 0===b?this.key:1===b?this.D:c};g.xb=function(a,b){return(new W(null,2,5,Y,[this.key,this.D],null)).xb(a,b)};g.U=function(){return null};g.Z=function(){return 2};g.Qb=function(){return this.key};g.Rb=function(){return this.D};g.T=function(){var a=this.C;return null!=a?a:this.C=a=Ub(this)};g.R=function(a,b){return kc(this,b)};g.$=function(){return null};g.ea=function(a,b){return bc(this,b)};
g.fa=function(a,b,c){a:{a=this.Z(null);var d=c;for(c=0;;)if(c<a){var e=this.O(null,c);d=b.j?b.j(d,e):b.call(null,d,e);if($b(d)){b=D(d);break a}c+=1}else{b=d;break a}}return b};g.Ca=function(a,b,c){return qc.o(new W(null,2,5,Y,[this.key,this.D],null),b,c)};g.Ya=function(a,b){return 0===b||1===b};g.P=function(){return new Mb([this.key,this.D],0,null)};g.X=function(a,b){return wc(new W(null,2,5,Y,[this.key,this.D],null),b)};g.ba=function(a,b){return new W(null,3,5,Y,[this.key,this.D,b],null)};
g.call=function(a){switch(arguments.length-1){case 1:return this.i(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.i(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(ta(b)))};g.i=function(a){return this.O(null,a)};g.j=function(a,b){return this.oa(null,a,b)};function Vd(a){return null!=a?a.s&2048||u===a.pc?!0:!1:!1}function ie(a,b,c){this.l=a;this.v=b;this.xa=c;this.s=32374990;this.F=262144}g=ie.prototype;
g.toString=function(){return wb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return O(this,b,0);case 2:return O(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.i=function(b){return O(this,b,0)};a.j=function(b,c){return O(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return R(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return R(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.i=a;b.j=function(c,d){return R(this,c,d)};return b}();g.U=function(){return this.xa};g.aa=function(){return this.v<this.l.length-2?new ie(this.l,this.v+2,null):null};g.Z=function(){return(this.l.length-this.v)/2};g.T=function(){return Ub(this)};
g.R=function(a,b){return kc(this,b)};g.$=function(){return K};g.ea=function(a,b){return Ic(b,this)};g.fa=function(a,b,c){return Lc(b,c,this)};g.da=function(){return new he(this.l[this.v],this.l[this.v+1])};g.ha=function(){return this.v<this.l.length-2?new ie(this.l,this.v+2,null):K};g.P=function(){return this};g.X=function(a,b){return b===this.xa?this:new ie(this.l,this.v,b)};g.ba=function(a,b){return S(b,this)};ie.prototype[sa]=function(){return Rb(this)};
function je(a,b){this.l=a;this.v=0;this.u=b}je.prototype.na=function(){return this.v<this.u};je.prototype.next=function(){var a=new he(this.l[this.v],this.l[this.v+1]);this.v+=2;return a};function v(a,b,c,d){this.A=a;this.u=b;this.l=c;this.C=d;this.s=16647951;this.F=401412}g=v.prototype;g.toString=function(){return wb(this)};g.keys=function(){return Rb(ke.i?ke.i(this):ke.call(null,this))};g.entries=function(){return new fe(H(H(this)))};g.values=function(){return Rb(le.i?le.i(this):le.call(null,this))};
g.has=function(a){return Hc(this,a)};g.get=function(a,b){return this.W(null,a,b)};g.forEach=function(a){for(var b=H(this),c=null,d=0,e=0;;)if(e<d){var f=c.O(null,e),h=T(f,0,null);f=T(f,1,null);a.j?a.j(f,h):a.call(null,f,h);e+=1}else if(b=H(b))Cc(b)?(c=ob(b),b=pb(b),h=c,d=Q(c),c=h):(c=J(b),h=T(c,0,null),f=T(c,1,null),a.j?a.j(f,h):a.call(null,f,h),b=M(b),c=null,d=0),e=0;else return null};g.qa=function(a,b){return this.W(null,b,null)};g.W=function(a,b,c){a=ge(this.l,b);return-1===a?c:this.l[a+1]};
g.ob=function(a,b,c){a=this.l.length;for(var d=0;;)if(d<a){var e=this.l[d],f=this.l[d+1];c=b.o?b.o(c,e,f):b.call(null,c,e,f);if($b(c))return D(c);d+=2}else return c};g.ra=function(){return new je(this.l,2*this.u)};g.U=function(){return this.A};g.Z=function(){return this.u};g.T=function(){var a=this.C;return null!=a?a:this.C=a=Wb(this)};
g.R=function(a,b){if(zc(b)&&!Ac(b))if(a=this.l.length,this.u===b.Z(null))for(var c=0;;)if(c<a){var d=b.W(null,this.l[c],Ec);if(d!==Ec)if(Pb.j(this.l[c+1],d))c+=2;else return!1;else return!1}else return!0;else return!1;else return!1};g.bb=function(){return new me(this.l.length,ta(this.l))};g.$=function(){return Ua(rd,this.A)};g.ea=function(a,b){return Mc(this,b)};g.fa=function(a,b,c){return Nc(this,b,c)};
g.wb=function(a,b){if(0<=ge(this.l,b)){a=this.l.length;var c=a-2;if(0===c)return this.$(null);c=Array(c);for(var d=0,e=0;;){if(d>=a)return new v(this.A,this.u-1,c,null);Pb.j(b,this.l[d])?d+=2:(c[e]=this.l[d],c[e+1]=this.l[d+1],e+=2,d+=2)}}else return this};
g.Ca=function(a,b,c){a=ge(this.l,b);if(-1===a){if(this.u<ne){a=this.l;for(var d=a.length,e=Array(d+2),f=0;;)if(f<d)e[f]=a[f],f+=1;else break;e[d]=b;e[d+1]=c;return new v(this.A,this.u+1,e,null)}return Ua(Ma(Bd(oe,this),b,c),this.A)}if(c===this.l[a+1])return this;b=ta(this.l);b[a+1]=c;return new v(this.A,this.u,b,null)};g.Ya=function(a,b){return-1!==ge(this.l,b)};g.P=function(){var a=this.l;return 0<=a.length-2?new ie(a,0,null):null};g.X=function(a,b){return b===this.A?this:new v(b,this.u,this.l,this.C)};
g.ba=function(a,b){if(Bc(b))return this.Ca(null,Ca(b,0),Ca(b,1));a=this;for(b=H(b);;){if(null==b)return a;var c=J(b);if(Bc(c))a=Ma(a,Ca(c,0),Ca(c,1)),b=M(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};g.call=function(a){switch(arguments.length-1){case 1:return this.i(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.i(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(ta(b)))};
g.i=function(a){return this.qa(null,a)};g.j=function(a,b){return this.W(null,a,b)};var rd=new v(null,0,[],Xb),ne=8;function pe(a,b){return a===b?!0:a===b||a instanceof G&&b instanceof G&&a.Aa===b.Aa?!0:Pb.j(a,b)}function te(a){for(var b=0,c=0;;)if(b<a.length){var d;a:for(d=0;;)if(d<b){var e=pe(a[b],a[d]);if(e){d=e;break a}d=2+d}else{d=!1;break a}c=d?c:c+2;b=2+b}else return c}
function ue(a,b){var c=a.length-1,d=H(b);b=Array(c+2*Q(d));a=Dc(a,0,b,0,c);for(b=c;;)if(d){var e=J(d);a[b]=Pa(e);a[b+1]=Qa(e);b=2+c;d=M(d)}else return a}function rc(a){var b=a.length,c=1===(b&1),d;if(!(d=c))a:for(d=0;;)if(d<a.length){var e;b:for(e=0;;)if(e<d){var f=pe(a[d],a[e]);if(f){e=f;break b}e=2+e}else{e=!1;break b}if(e){d=e;break a}d=2+d}else{d=!1;break a}return d?ve(a,c):new v(null,b/2,a,null)}
function ve(a,b){var c=b?ue(a,Bd(rd,a[a.length-1])):a;a=te(c);var d=c.length;if(a<d){a=Array(a);for(var e=0,f=0;;)if(e<d)(function(){for(var h=0;;)if(h<f){var k=pe(c[e],c[h]);if(k)return k;h=2+h}else return!1})()?(b=f,e=2+e,f=b):(b=function(){for(var h=d-2;;)if(h>=e){if(pe(c[e],c[h]))return h;h-=2}else return h}(),a[f]=c[e],a[f+1]=c[b+1],b=2+f,e=2+e,f=b);else break;return new v(null,a.length/2,a,null)}return new v(null,c.length/2,c,null)}v.prototype[sa]=function(){return Rb(this)};
function me(a,b){this.$a={};this.Wa=a;this.l=b;this.s=259;this.F=56}g=me.prototype;g.Z=function(){if(this.$a)return Qc(this.Wa,2);throw Error("count after persistent!");};g.qa=function(a,b){return this.W(null,b,null)};g.W=function(a,b,c){if(this.$a)return a=ge(this.l,b),-1===a?c:this.l[a+1];throw Error("lookup after persistent!");};
g.fb=function(a,b){if(this.$a){if(Vd(b))return this.Za(null,Wd.i?Wd.i(b):Wd.call(null,b),Xd.i?Xd.i(b):Xd.call(null,b));if(Bc(b))return this.Za(null,b.i?b.i(0):b.call(null,0),b.i?b.i(1):b.call(null,1));a=H(b);for(b=this;;){var c=J(a);if(w(c))a=M(a),b=mb(b,Wd.i?Wd.i(c):Wd.call(null,c),Xd.i?Xd.i(c):Xd.call(null,c));else return b}}else throw Error("conj! after persistent!");};g.pb=function(){if(this.$a)return this.$a=!1,new v(null,Qc(this.Wa,2),this.l,null);throw Error("persistent! called twice");};
g.Za=function(a,b,c){if(this.$a){a=ge(this.l,b);if(-1===a){if(this.Wa+2<=2*ne)return this.Wa+=2,this.l.push(b),this.l.push(c),this;a=we.j?we.j(this.Wa,this.l):we.call(null,this.Wa,this.l);return mb(a,b,c)}c!==this.l[a+1]&&(this.l[a+1]=c);return this}throw Error("assoc! after persistent!");};g.call=function(a){switch(arguments.length-1){case 1:return this.i(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.i(arguments.length-1)].join(""));}};
g.apply=function(a,b){return this.call.apply(this,[this].concat(ta(b)))};g.i=function(a){return this.W(null,a,null)};g.j=function(a,b){return this.W(null,a,b)};function we(a,b){for(var c=jb(oe),d=0;;)if(d<a)c=mb(c,b[d],b[d+1]),d+=2;else return c}function xe(){this.D=!1}function ye(a,b,c){a=ta(a);a[b]=c;return a}function ze(a,b){var c=Array(a.length-2);Dc(a,0,c,0,2*b);Dc(a,2*(b+1),c,2*b,c.length-2*b);return c}function Ae(a,b,c,d){a=a.Va(b);a.l[c]=d;return a}
function Be(a,b,c){for(var d=a.length,e=0,f=c;;)if(e<d){c=a[e];if(null!=c){var h=a[e+1];c=b.o?b.o(f,c,h):b.call(null,f,c,h)}else c=a[e+1],c=null!=c?c.jb(b,f):f;if($b(c))return c;e+=2;f=c}else return f}function Ce(a){this.l=a;this.v=0;this.va=this.kb=null}Ce.prototype.advance=function(){for(var a=this.l.length;;)if(this.v<a){var b=this.l[this.v],c=this.l[this.v+1];null!=b?b=this.kb=new he(b,c):null!=c?(b=ub(c),b=b.na()?this.va=b:!1):b=!1;this.v+=2;if(b)return!0}else return!1};
Ce.prototype.na=function(){var a=null!=this.kb;return a?a:(a=null!=this.va)?a:this.advance()};Ce.prototype.next=function(){if(null!=this.kb){var a=this.kb;this.kb=null;return a}if(null!=this.va)return a=this.va.next(),this.va.na()||(this.va=null),a;if(this.advance())return this.next();throw Error("No such element");};Ce.prototype.remove=function(){return Error("Unsupported operation")};function De(a,b,c){this.K=a;this.M=b;this.l=c;this.F=131072;this.s=0}g=De.prototype;
g.Va=function(a){if(a===this.K)return this;var b=Sc(this.M),c=Array(0>b?4:2*(b+1));Dc(this.l,0,c,0,2*b);return new De(a,this.M,c)};g.hb=function(){return Ee?Ee(this.l):Fe.call(null,this.l)};g.jb=function(a,b){return Be(this.l,a,b)};g.Ea=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.M&e))return d;var f=Sc(this.M&e-1);e=this.l[2*f];f=this.l[2*f+1];return null==e?f.Ea(a+5,b,c,d):pe(c,e)?f:d};
g.ta=function(a,b,c,d,e,f){var h=1<<(c>>>b&31),k=Sc(this.M&h-1);if(0===(this.M&h)){var l=Sc(this.M);if(2*l<this.l.length){a=this.Va(a);b=a.l;f.D=!0;c=2*(l-k);f=2*k+(c-1);for(l=2*(k+1)+(c-1);0!==c;)b[l]=b[f],--l,--c,--f;b[2*k]=d;b[2*k+1]=e;a.M|=h;return a}if(16<=l){k=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];k[c>>>b&31]=Ge.ta(a,b+5,c,d,e,f);for(e=d=0;;)if(32>d)0===(this.M>>>d&1)?
d+=1:(k[d]=null!=this.l[e]?Ge.ta(a,b+5,Fb(this.l[e]),this.l[e],this.l[e+1],f):this.l[e+1],e+=2,d+=1);else break;return new He(a,l+1,k)}b=Array(2*(l+4));Dc(this.l,0,b,0,2*k);b[2*k]=d;b[2*k+1]=e;Dc(this.l,2*k,b,2*(k+1),2*(l-k));f.D=!0;a=this.Va(a);a.l=b;a.M|=h;return a}l=this.l[2*k];h=this.l[2*k+1];if(null==l)return l=h.ta(a,b+5,c,d,e,f),l===h?this:Ae(this,a,2*k+1,l);if(pe(d,l))return e===h?this:Ae(this,a,2*k+1,e);f.D=!0;f=b+5;d=Ie?Ie(a,f,l,h,c,d,e):Je.call(null,a,f,l,h,c,d,e);e=2*k;k=2*k+1;a=this.Va(a);
a.l[e]=null;a.l[k]=d;return a};
g.sa=function(a,b,c,d,e){var f=1<<(b>>>a&31),h=Sc(this.M&f-1);if(0===(this.M&f)){var k=Sc(this.M);if(16<=k){h=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];h[b>>>a&31]=Ge.sa(a+5,b,c,d,e);for(d=c=0;;)if(32>c)0===(this.M>>>c&1)?c+=1:(h[c]=null!=this.l[d]?Ge.sa(a+5,Fb(this.l[d]),this.l[d],this.l[d+1],e):this.l[d+1],d+=2,c+=1);else break;return new He(null,k+1,h)}a=Array(2*(k+1));Dc(this.l,
0,a,0,2*h);a[2*h]=c;a[2*h+1]=d;Dc(this.l,2*h,a,2*(h+1),2*(k-h));e.D=!0;return new De(null,this.M|f,a)}var l=this.l[2*h];f=this.l[2*h+1];if(null==l)return k=f.sa(a+5,b,c,d,e),k===f?this:new De(null,this.M,ye(this.l,2*h+1,k));if(pe(c,l))return d===f?this:new De(null,this.M,ye(this.l,2*h+1,d));e.D=!0;e=this.M;k=this.l;a+=5;a=Ke?Ke(a,l,f,b,c,d):Je.call(null,a,l,f,b,c,d);c=2*h;h=2*h+1;d=ta(k);d[c]=null;d[h]=a;return new De(null,e,d)};
g.ib=function(a,b,c){var d=1<<(b>>>a&31);if(0===(this.M&d))return this;var e=Sc(this.M&d-1),f=this.l[2*e],h=this.l[2*e+1];return null==f?(a=h.ib(a+5,b,c),a===h?this:null!=a?new De(null,this.M,ye(this.l,2*e+1,a)):this.M===d?null:new De(null,this.M^d,ze(this.l,e))):pe(c,f)?this.M===d?null:new De(null,this.M^d,ze(this.l,e)):this};g.ra=function(){return new Ce(this.l)};var Ge=new De(null,0,[]);function Le(a){this.l=a;this.v=0;this.va=null}
Le.prototype.na=function(){for(var a=this.l.length;;){if(null!=this.va&&this.va.na())return!0;if(this.v<a){var b=this.l[this.v];this.v+=1;null!=b&&(this.va=ub(b))}else return!1}};Le.prototype.next=function(){if(this.na())return this.va.next();throw Error("No such element");};Le.prototype.remove=function(){return Error("Unsupported operation")};function He(a,b,c){this.K=a;this.u=b;this.l=c;this.F=131072;this.s=0}g=He.prototype;g.Va=function(a){return a===this.K?this:new He(a,this.u,ta(this.l))};
g.hb=function(){return Me?Me(this.l):Ne.call(null,this.l)};g.jb=function(a,b){for(var c=this.l.length,d=0;;)if(d<c){var e=this.l[d];if(null!=e){b=e.jb(a,b);if($b(b))return b;d+=1}else d+=1}else return b};g.Ea=function(a,b,c,d){var e=this.l[b>>>a&31];return null!=e?e.Ea(a+5,b,c,d):d};g.ta=function(a,b,c,d,e,f){var h=c>>>b&31,k=this.l[h];if(null==k)return a=Ae(this,a,h,Ge.ta(a,b+5,c,d,e,f)),a.u+=1,a;b=k.ta(a,b+5,c,d,e,f);return b===k?this:Ae(this,a,h,b)};
g.sa=function(a,b,c,d,e){var f=b>>>a&31,h=this.l[f];if(null==h)return new He(null,this.u+1,ye(this.l,f,Ge.sa(a+5,b,c,d,e)));a=h.sa(a+5,b,c,d,e);return a===h?this:new He(null,this.u,ye(this.l,f,a))};
g.ib=function(a,b,c){var d=b>>>a&31,e=this.l[d];if(null!=e){a=e.ib(a+5,b,c);if(a===e)d=this;else if(null==a)if(8>=this.u)a:{e=this.l;a=e.length;b=Array(2*(this.u-1));c=0;for(var f=1,h=0;;)if(c<a)c!==d&&null!=e[c]?(b[f]=e[c],f+=2,h|=1<<c,c+=1):c+=1;else{d=new De(null,h,b);break a}}else d=new He(null,this.u-1,ye(this.l,d,a));else d=new He(null,this.u,ye(this.l,d,a));return d}return this};g.ra=function(){return new Le(this.l)};
function Oe(a,b,c){b*=2;for(var d=0;;)if(d<b){if(pe(c,a[d]))return d;d+=2}else return-1}function Pe(a,b,c,d){this.K=a;this.za=b;this.u=c;this.l=d;this.F=131072;this.s=0}g=Pe.prototype;g.Va=function(a){if(a===this.K)return this;var b=Array(2*(this.u+1));Dc(this.l,0,b,0,2*this.u);return new Pe(a,this.za,this.u,b)};g.hb=function(){return Ee?Ee(this.l):Fe.call(null,this.l)};g.jb=function(a,b){return Be(this.l,a,b)};
g.Ea=function(a,b,c,d){a=Oe(this.l,this.u,c);return 0>a?d:pe(c,this.l[a])?this.l[a+1]:d};
g.ta=function(a,b,c,d,e,f){if(c===this.za){b=Oe(this.l,this.u,d);if(-1===b){if(this.l.length>2*this.u)return b=2*this.u,c=2*this.u+1,a=this.Va(a),a.l[b]=d,a.l[c]=e,f.D=!0,a.u+=1,a;c=this.l.length;b=Array(c+2);Dc(this.l,0,b,0,c);b[c]=d;b[c+1]=e;f.D=!0;d=this.u+1;a===this.K?(this.l=b,this.u=d,a=this):a=new Pe(this.K,this.za,d,b);return a}return this.l[b+1]===e?this:Ae(this,a,b+1,e)}return(new De(a,1<<(this.za>>>b&31),[null,this,null,null])).ta(a,b,c,d,e,f)};
g.sa=function(a,b,c,d,e){return b===this.za?(a=Oe(this.l,this.u,c),-1===a?(a=2*this.u,b=Array(a+2),Dc(this.l,0,b,0,a),b[a]=c,b[a+1]=d,e.D=!0,new Pe(null,this.za,this.u+1,b)):Pb.j(this.l[a+1],d)?this:new Pe(null,this.za,this.u,ye(this.l,a+1,d))):(new De(null,1<<(this.za>>>a&31),[null,this])).sa(a,b,c,d,e)};g.ib=function(a,b,c){a=Oe(this.l,this.u,c);return-1===a?this:1===this.u?null:new Pe(null,this.za,this.u-1,ze(this.l,Qc(a,2)))};g.ra=function(){return new Ce(this.l)};
function Je(a){switch(arguments.length){case 6:return Ke(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 7:return Ie(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);default:throw Error(["Invalid arity: ",B.i(arguments.length)].join(""));}}function Ke(a,b,c,d,e,f){var h=Fb(b);if(h===d)return new Pe(null,h,2,[b,c,e,f]);var k=new xe;return Ge.sa(a,h,b,c,k).sa(a,d,e,f,k)}
function Ie(a,b,c,d,e,f,h){var k=Fb(c);if(k===e)return new Pe(null,k,2,[c,d,f,h]);var l=new xe;return Ge.ta(a,b,k,c,d,l).ta(a,b,e,f,h,l)}function Qe(a,b,c,d,e){this.A=a;this.wa=b;this.v=c;this.J=d;this.C=e;this.s=32374988;this.F=0}g=Qe.prototype;g.toString=function(){return wb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return O(this,b,0);case 2:return O(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.i=function(b){return O(this,b,0)};a.j=function(b,c){return O(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return R(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return R(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.i=a;b.j=function(c,d){return R(this,c,d)};return b}();g.U=function(){return this.A};g.aa=function(){if(null==this.J){var a=this.wa,b=this.v+2;return Re?Re(a,b,null):Fe.call(null,a,b,null)}a=this.wa;b=this.v;var c=M(this.J);return Re?Re(a,b,c):Fe.call(null,a,b,c)};
g.T=function(){var a=this.C;return null!=a?a:this.C=a=Ub(this)};g.R=function(a,b){return kc(this,b)};g.$=function(){return K};g.ea=function(a,b){return Ic(b,this)};g.fa=function(a,b,c){return Lc(b,c,this)};g.da=function(){return null==this.J?new he(this.wa[this.v],this.wa[this.v+1]):J(this.J)};
g.ha=function(){var a=this,b=null==a.J?function(){var c=a.wa,d=a.v+2;return Re?Re(c,d,null):Fe.call(null,c,d,null)}():function(){var c=a.wa,d=a.v,e=M(a.J);return Re?Re(c,d,e):Fe.call(null,c,d,e)}();return null!=b?b:K};g.P=function(){return this};g.X=function(a,b){return b===this.A?this:new Qe(b,this.wa,this.v,this.J,this.C)};g.ba=function(a,b){return S(b,this)};Qe.prototype[sa]=function(){return Rb(this)};
function Fe(a){switch(arguments.length){case 1:return Ee(arguments[0]);case 3:return Re(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.i(arguments.length)].join(""));}}function Ee(a){return Re(a,0,null)}function Re(a,b,c){if(null==c)for(c=a.length;;)if(b<c){if(null!=a[b])return new Qe(null,a,b,null,null);var d=a[b+1];if(w(d)&&(d=d.hb(),w(d)))return new Qe(null,a,b+2,d,null);b+=2}else return null;else return new Qe(null,a,b,c,null)}
function Se(a,b,c,d,e){this.A=a;this.wa=b;this.v=c;this.J=d;this.C=e;this.s=32374988;this.F=0}g=Se.prototype;g.toString=function(){return wb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return O(this,b,0);case 2:return O(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.i=function(b){return O(this,b,0)};a.j=function(b,c){return O(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return R(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return R(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.i=a;b.j=function(c,d){return R(this,c,d)};return b}();g.U=function(){return this.A};g.aa=function(){var a=this.wa,b=this.v,c=M(this.J);return Te?Te(a,b,c):Ne.call(null,a,b,c)};g.T=function(){var a=this.C;return null!=a?a:this.C=a=Ub(this)};g.R=function(a,b){return kc(this,b)};
g.$=function(){return K};g.ea=function(a,b){return Ic(b,this)};g.fa=function(a,b,c){return Lc(b,c,this)};g.da=function(){return J(this.J)};g.ha=function(){var a=this.wa;var b=this.v,c=M(this.J);a=Te?Te(a,b,c):Ne.call(null,a,b,c);return null!=a?a:K};g.P=function(){return this};g.X=function(a,b){return b===this.A?this:new Se(b,this.wa,this.v,this.J,this.C)};g.ba=function(a,b){return S(b,this)};Se.prototype[sa]=function(){return Rb(this)};
function Ne(a){switch(arguments.length){case 1:return Me(arguments[0]);case 3:return Te(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.i(arguments.length)].join(""));}}function Me(a){return Te(a,0,null)}function Te(a,b,c){if(null==c)for(c=a.length;;)if(b<c){var d=a[b];if(w(d)&&(d=d.hb(),w(d)))return new Se(null,a,b+1,d,null);b+=1}else return null;else return new Se(null,a,b,c,null)}function Ue(a,b){this.ka=a;this.Hb=b;this.zb=!1}
Ue.prototype.na=function(){return!this.zb||this.Hb.na()};Ue.prototype.next=function(){if(this.zb)return this.Hb.next();this.zb=!0;return new he(null,this.ka)};Ue.prototype.remove=function(){return Error("Unsupported operation")};function Ve(a,b,c,d,e,f){this.A=a;this.u=b;this.root=c;this.ja=d;this.ka=e;this.C=f;this.s=16123663;this.F=139268}g=Ve.prototype;g.toString=function(){return wb(this)};g.keys=function(){return Rb(ke.i?ke.i(this):ke.call(null,this))};g.entries=function(){return new fe(H(H(this)))};
g.values=function(){return Rb(le.i?le.i(this):le.call(null,this))};g.has=function(a){return Hc(this,a)};g.get=function(a,b){return this.W(null,a,b)};g.forEach=function(a){for(var b=H(this),c=null,d=0,e=0;;)if(e<d){var f=c.O(null,e),h=T(f,0,null);f=T(f,1,null);a.j?a.j(f,h):a.call(null,f,h);e+=1}else if(b=H(b))Cc(b)?(c=ob(b),b=pb(b),h=c,d=Q(c),c=h):(c=J(b),h=T(c,0,null),f=T(c,1,null),a.j?a.j(f,h):a.call(null,f,h),b=M(b),c=null,d=0),e=0;else return null};g.qa=function(a,b){return this.W(null,b,null)};
g.W=function(a,b,c){return null==b?this.ja?this.ka:c:null==this.root?c:this.root.Ea(0,Fb(b),b,c)};g.ob=function(a,b,c){a=this.ja?b.o?b.o(c,null,this.ka):b.call(null,c,null,this.ka):c;$b(a)?b=D(a):null!=this.root?(b=this.root.jb(b,a),b=$b(b)?ac.i?ac.i(b):ac.call(null,b):b):b=a;return b};g.ra=function(){var a=this.root?ub(this.root):new sd(rd);return this.ja?new Ue(this.ka,a):a};g.U=function(){return this.A};g.Z=function(){return this.u};g.T=function(){var a=this.C;return null!=a?a:this.C=a=Wb(this)};
g.R=function(a,b){return ee(this,b)};g.bb=function(){return new We(this.root,this.u,this.ja,this.ka)};g.$=function(){return Ua(oe,this.A)};g.wb=function(a,b){if(null==b)return this.ja?new Ve(this.A,this.u-1,this.root,!1,null,null):this;if(null==this.root)return this;a=this.root.ib(0,Fb(b),b);return a===this.root?this:new Ve(this.A,this.u-1,a,this.ja,this.ka,null)};
g.Ca=function(a,b,c){if(null==b)return this.ja&&c===this.ka?this:new Ve(this.A,this.ja?this.u:this.u+1,this.root,!0,c,null);a=new xe;b=(null==this.root?Ge:this.root).sa(0,Fb(b),b,c,a);return b===this.root?this:new Ve(this.A,a.D?this.u+1:this.u,b,this.ja,this.ka,null)};g.Ya=function(a,b){return null==b?this.ja:null==this.root?!1:this.root.Ea(0,Fb(b),b,Ec)!==Ec};g.P=function(){if(0<this.u){var a=null!=this.root?this.root.hb():null;return this.ja?S(new he(null,this.ka),a):a}return null};
g.X=function(a,b){return b===this.A?this:new Ve(b,this.u,this.root,this.ja,this.ka,this.C)};g.ba=function(a,b){if(Bc(b))return this.Ca(null,Ca(b,0),Ca(b,1));a=this;for(b=H(b);;){if(null==b)return a;var c=J(b);if(Bc(c))a=Ma(a,Ca(c,0),Ca(c,1)),b=M(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
g.call=function(a){switch(arguments.length-1){case 1:return this.i(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.i(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(ta(b)))};g.i=function(a){return this.qa(null,a)};g.j=function(a,b){return this.W(null,a,b)};var oe=new Ve(null,0,null,!1,null,Xb);
function Xe(a,b){for(var c=a.length,d=0,e=jb(oe);;)if(d<c){if(b.length<=d)throw Error(["No value supplied for key: ",B.i(a[d])].join(""));var f=d+1;e=mb(e,a[d],b[d]);d=f}else return lb(e)}Ve.prototype[sa]=function(){return Rb(this)};function We(a,b,c,d){this.K={};this.root=a;this.count=b;this.ja=c;this.ka=d;this.s=259;this.F=56}
function Ye(a,b,c){if(a.K){if(null==b)a.ka!==c&&(a.ka=c),a.ja||(a.count+=1,a.ja=!0);else{var d=new xe;b=(null==a.root?Ge:a.root).ta(a.K,0,Fb(b),b,c,d);b!==a.root&&(a.root=b);d.D&&(a.count+=1)}return a}throw Error("assoc! after persistent!");}g=We.prototype;g.Z=function(){if(this.K)return this.count;throw Error("count after persistent!");};g.qa=function(a,b){return null==b?this.ja?this.ka:null:null==this.root?null:this.root.Ea(0,Fb(b),b)};
g.W=function(a,b,c){return null==b?this.ja?this.ka:c:null==this.root?c:this.root.Ea(0,Fb(b),b,c)};g.fb=function(a,b){a:if(this.K)if(Vd(b))a=Ye(this,Wd.i?Wd.i(b):Wd.call(null,b),Xd.i?Xd.i(b):Xd.call(null,b));else if(Bc(b))a=Ye(this,b.i?b.i(0):b.call(null,0),b.i?b.i(1):b.call(null,1));else for(a=H(b),b=this;;){var c=J(a);if(w(c))a=M(a),b=Ye(b,Wd.i?Wd.i(c):Wd.call(null,c),Xd.i?Xd.i(c):Xd.call(null,c));else{a=b;break a}}else throw Error("conj! after persistent");return a};
g.pb=function(){if(this.K){this.K=null;var a=new Ve(null,this.count,this.root,this.ja,this.ka,null)}else throw Error("persistent! called twice");return a};g.Za=function(a,b,c){return Ye(this,b,c)};g.call=function(a){switch(arguments.length-1){case 1:return this.i(arguments[1]);case 2:return this.j(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.i(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(ta(b)))};
g.i=function(a){return this.qa(null,a)};g.j=function(a,b){return this.W(null,a,b)};function Ze(a,b){this.H=a;this.xa=b;this.s=32374988;this.F=0}g=Ze.prototype;g.toString=function(){return wb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return O(this,b,0);case 2:return O(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.i=function(b){return O(this,b,0)};a.j=function(b,c){return O(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return R(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return R(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.i=a;b.j=function(c,d){return R(this,c,d)};return b}();g.U=function(){return this.xa};g.aa=function(){var a=(null!=this.H?this.H.s&128||u===this.H.cb||(this.H.s?0:y(Fa,this.H)):y(Fa,this.H))?this.H.aa():M(this.H);return null==a?null:new Ze(a,null)};g.T=function(){return Ub(this)};
g.R=function(a,b){return kc(this,b)};g.$=function(){return K};g.ea=function(a,b){return Ic(b,this)};g.fa=function(a,b,c){return Lc(b,c,this)};g.da=function(){return this.H.da(null).key};g.ha=function(){var a=(null!=this.H?this.H.s&128||u===this.H.cb||(this.H.s?0:y(Fa,this.H)):y(Fa,this.H))?this.H.aa():M(this.H);return null!=a?new Ze(a,null):K};g.P=function(){return this};g.X=function(a,b){return b===this.xa?this:new Ze(this.H,b)};g.ba=function(a,b){return S(b,this)};Ze.prototype[sa]=function(){return Rb(this)};
function ke(a){return(a=H(a))?new Ze(a,null):null}function Wd(a){return Pa(a)}function $e(a,b){this.H=a;this.xa=b;this.s=32374988;this.F=0}g=$e.prototype;g.toString=function(){return wb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return O(this,b,0);case 2:return O(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.i=function(b){return O(this,b,0)};a.j=function(b,c){return O(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return R(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return R(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.i=a;b.j=function(c,d){return R(this,c,d)};return b}();g.U=function(){return this.xa};g.aa=function(){var a=(null!=this.H?this.H.s&128||u===this.H.cb||(this.H.s?0:y(Fa,this.H)):y(Fa,this.H))?this.H.aa():M(this.H);return null==a?null:new $e(a,null)};g.T=function(){return Ub(this)};
g.R=function(a,b){return kc(this,b)};g.$=function(){return K};g.ea=function(a,b){return Ic(b,this)};g.fa=function(a,b,c){return Lc(b,c,this)};g.da=function(){return this.H.da(null).D};g.ha=function(){var a=(null!=this.H?this.H.s&128||u===this.H.cb||(this.H.s?0:y(Fa,this.H)):y(Fa,this.H))?this.H.aa():M(this.H);return null!=a?new $e(a,null):K};g.P=function(){return this};g.X=function(a,b){return b===this.xa?this:new $e(this.H,b)};g.ba=function(a,b){return S(b,this)};$e.prototype[sa]=function(){return Rb(this)};
function le(a){return(a=H(a))?new $e(a,null):null}function Xd(a){return Qa(a)}function Xc(a){if(null!=a&&(a.F&4096||u===a.Tb))return a.name;if("string"===typeof a)return a;throw Error(["Doesn't support name: ",B.i(a)].join(""));}function af(a,b,c){this.start=a;this.step=b;this.count=c;this.s=82;this.F=0}g=af.prototype;g.Z=function(){return this.count};g.da=function(){return this.start};g.O=function(a,b){return this.start+b*this.step};
g.oa=function(a,b,c){return 0<=b&&b<this.count?this.start+b*this.step:c};g.tb=function(){if(1>=this.count)throw Error("-drop-first of empty chunk");return new af(this.start+this.step,this.step,this.count-1)};function bf(a,b,c){this.v=a;this.end=b;this.step=c}bf.prototype.na=function(){return 0<this.step?this.v<this.end:this.v>this.end};bf.prototype.next=function(){var a=this.v;this.v+=this.step;return a};
function cf(a,b,c,d,e,f){this.A=a;this.start=b;this.end=c;this.step=d;this.u=e;this.C=f;this.s=32375006;this.F=402944}g=cf.prototype;g.toString=function(){return wb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return O(this,b,0);case 2:return O(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.i=function(b){return O(this,b,0)};a.j=function(b,c){return O(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return R(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return R(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.i=a;b.j=function(c,d){return R(this,c,d)};return b}();g.O=function(a,b){if(0<=b&&b<this.Z(null))return this.start+b*this.step;if(0<=b&&this.start>this.end&&0===this.step)return this.start;throw Error("Index out of bounds");};
g.oa=function(a,b,c){return 0<=b&&b<this.Z(null)?this.start+b*this.step:0<=b&&this.start>this.end&&0===this.step?this.start:c};g.ra=function(){return new bf(this.start,this.end,this.step)};g.U=function(){return this.A};
g.aa=function(){return 0<this.step?this.start+this.step<this.end?new cf(null,this.start+this.step,this.end,this.step,Math.ceil((this.end-(this.start+this.step))/this.step),null):null:this.start+this.step>this.end?new cf(null,this.start+this.step,this.end,this.step,Math.ceil((this.end-(this.start+this.step))/this.step),null):null};g.Z=function(){return this.u};g.T=function(){var a=this.C;return null!=a?a:this.C=a=Ub(this)};g.R=function(a,b){return kc(this,b)};g.$=function(){return K};
g.ea=function(a,b){return bc(this,b)};g.fa=function(a,b,c){for(a=this.start;;)if(0<this.step?a<this.end:a>this.end){c=b.j?b.j(c,a):b.call(null,c,a);if($b(c))return D(c);a+=this.step}else return c};g.da=function(){return this.start};g.ha=function(){var a=this.aa();return null==a?K:a};g.P=function(){return this};g.ab=function(){var a=this.u;return new af(this.start,this.step,32>a?a:32)};
g.Da=function(){if(32>=this.u)return K;var a=this.start+32*this.step;return 0<this.step?this.end<=a?K:new cf(null,a,this.end,this.step,Math.ceil((this.end-a)/this.step),null):0>this.step?this.end>=a?K:new cf(null,a,this.end,this.step,Math.ceil((this.end-a)/this.step),null):this.end===a?K:new zd(null,-1,a,null)};g.X=function(a,b){return b===this.A?this:new cf(b,this.start,this.end,this.step,this.u,this.C)};g.ba=function(a,b){return S(b,this)};g.nb=function(){return H(this.Da(null))};
cf.prototype[sa]=function(){return Rb(this)};function df(a,b,c,d,e,f,h){this.A=a;this.start=b;this.end=c;this.step=d;this.la=e;this.mb=f;this.C=h;this.F=140800;this.s=32374988}g=df.prototype;g.toString=function(){return wb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return O(this,b,0);case 2:return O(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.i=function(b){return O(this,b,0)};a.j=function(b,c){return O(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return R(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return R(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.i=a;b.j=function(c,d){return R(this,c,d)};return b}();
function ef(a){if(null==a.la){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];a:{var c=0;for(var d=a.start;;)if(32>c){if(b[c]=d,c+=1,d+=a.step,!(0<a.step?d<a.end:d>a.end)){c=a.la=new ad(b,0,c);break a}}else{c=d;break a}}null==a.la&&(a.la=new ad(b,0,32),(0<a.step?c<a.end:c>a.end)&&(a.mb=new df(null,c,a.end,a.step,null,null,null)))}}
g.ra=function(){return new bf(this.start,this.end,this.step)};g.U=function(){return this.A};g.aa=function(){return 0<this.step?this.start+this.step<this.end?new df(null,this.start+this.step,this.end,this.step,null,null,null):null:this.start+this.step>this.end?new df(null,this.start+this.step,this.end,this.step,null,null,null):null};g.T=function(){var a=this.C;return null!=a?a:this.C=a=Ub(this)};g.R=function(a,b){return kc(this,b)};g.$=function(){return K};g.ea=function(a,b){return Ic(b,this)};
g.fa=function(a,b,c){for(a=this.start;;)if(0<this.step?a<this.end:a>this.end){c=b.j?b.j(c,a):b.call(null,c,a);if($b(c))return D(c);a+=this.step}else return c};g.da=function(){return this.start};g.ha=function(){var a=this.aa();return null==a?K:a};g.P=function(){return this};g.ab=function(){ef(this);return this.la};g.Da=function(){ef(this);return null==this.mb?K:this.mb};g.X=function(a,b){return b===this.A?this:new df(b,this.start,this.end,this.step,this.la,this.mb,this.C)};
g.ba=function(a,b){return S(b,this)};g.nb=function(){return H(this.Da(null))};df.prototype[sa]=function(){return Rb(this)};function ff(){var a=Qc(D(U).width(),94)+5;return 0>=a?K:Gc(0)&&Gc(a)&&Gc(1)?new cf(null,0,a,1,Math.ceil(a-0),null):new df(null,0,a,1,null,null,null)}
function gf(a,b,c,d,e,f,h){var k=ha;ha=null==ha?null:ha-1;try{if(null!=ha&&0>ha)return E(a,"#");E(a,c);if(0===oa.i(f))H(h)&&E(a,function(){var r=hf.i(f);return w(r)?r:"..."}());else{if(H(h)){var l=J(h);b.o?b.o(l,a,f):b.call(null,l,a,f)}for(var m=M(h),n=oa.i(f)-1;;)if(!m||null!=n&&0===n){H(m)&&0===n&&(E(a,d),E(a,function(){var r=hf.i(f);return w(r)?r:"..."}()));break}else{E(a,d);var p=J(m);c=a;h=f;b.o?b.o(p,c,h):b.call(null,p,c,h);var q=M(m);c=n-1;m=q;n=c}}return E(a,e)}finally{ha=k}}
function jf(a,b){b=H(b);for(var c=null,d=0,e=0;;)if(e<d){var f=c.O(null,e);E(a,f);e+=1}else if(b=H(b))c=b,Cc(c)?(b=ob(c),d=pb(c),c=b,f=Q(b),b=d,d=f):(f=J(c),E(a,f),b=M(c),c=null,d=0),e=0;else return null}var kf={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function lf(a){return['"',B.i(a.replace(RegExp('[\\\\"\b\f\n\r\t]',"g"),function(b){return kf[b]})),'"'].join("")}
function mf(a,b){return(a=Fc(F(a,ma)))?(a=null!=b?b.s&131072||u===b.Sb?!0:!1:!1)?null!=xc(b):a:a}
function nf(a,b,c){if(null==a)return E(b,"nil");if(mf(c,a)){E(b,"^");var d=xc(a);Z.o?Z.o(d,b,c):Z.call(null,d,b,c);E(b," ")}if(a.ac)return a.sc(a,b,c);if(null!=a?a.s&2147483648||u===a.ca||(a.s?0:y(hb,a)):y(hb,a))return ib(a,b,c);if(!0===a||!1===a)return E(b,B.i(a));if("number"===typeof a)return E(b,isNaN(a)?"##NaN":a===Number.POSITIVE_INFINITY?"##Inf":a===Number.NEGATIVE_INFINITY?"##-Inf":B.i(a));if(null!=a&&a.constructor===Object)return E(b,"#js "),d=yd.j(function(f){var h=/[A-Za-z_\*\+\?!\-'][\w\*\+\?!\-']*/;
if("string"===typeof f)h=h.exec(f),h=null!=h&&Pb.j(h[0],f)?1===h.length?h[0]:Ud(h):null;else throw new TypeError("re-matches must match against a string.");return new he(null!=h?Wc.i(f):f,a[f])},ea(a)),of.G?of.G(d,Z,b,c):of.call(null,d,Z,b,c);if(pa(a))return gf(b,Z,"#js ["," ","]",c,a);if("string"===typeof a)return w(la.i(c))?E(b,lf(a)):E(b,a);if("function"===typeof a){var e=a.name;c=w(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?"Function":e;return jf(b,lc(["#object[",c,w(!1)?[' "',
B.i(a),'"'].join(""):"","]"]))}if(a instanceof Date)return c=function(f,h){for(f=B.i(f);;)if(f.length<h)f=["0",f].join("");else return f},jf(b,lc(['#inst "',c(a.getUTCFullYear(),4),"-",c(a.getUTCMonth()+1,2),"-",c(a.getUTCDate(),2),"T",c(a.getUTCHours(),2),":",c(a.getUTCMinutes(),2),":",c(a.getUTCSeconds(),2),".",c(a.getUTCMilliseconds(),3),"-",'00:00"']));if(a instanceof RegExp)return jf(b,lc(['#"',a.source,'"']));if("symbol"===t(a)||"undefined"!==typeof Symbol&&a instanceof Symbol)return jf(b,lc(["#object[",
a.toString(),"]"]));if(w(function(){var f=null==a?null:a.constructor;return null==f?null:f.yb}()))return jf(b,lc(["#object[",a.constructor.yb.replace(RegExp("/","g"),"."),"]"]));e=function(){var f=null==a?null:a.constructor;return null==f?null:f.name}();c=w(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?"Object":e;return null==a.constructor?jf(b,lc(["#object[",c,"]"])):jf(b,lc(["#object[",c," ",B.i(a),"]"]))}
function Z(a,b,c){var d=pf.i(c);return w(d)?(c=qc.o(c,qf,nf),d.o?d.o(a,b,c):d.call(null,a,b,c)):nf(a,b,c)}
function rf(a){var b=ia();if(null==a||((null!=a?a.s&2||u===a.Ab||(a.s?0:y(va,a)):y(va,a))?0===wa(a):qa(H(a))))b="";else{var c=B,d=c.i,e=new fa,f=new vb(e);Z(J(a),f,b);a=H(M(a));for(var h=null,k=0,l=0;;)if(l<k){var m=h.O(null,l);E(f," ");Z(m,f,b);l+=1}else if(a=H(a))h=a,Cc(h)?(a=ob(h),k=pb(h),h=a,m=Q(a),a=k,k=m):(m=J(h),E(f," "),Z(m,f,b),a=M(h),h=null,k=0),l=0;else break;b=d.call(c,e)}return b}function sf(a){return a instanceof Hb?Kb.j(null,Xc(a)):Wc.j(null,Xc(a))}
function tf(a){if(w(!1)){var b=H(a),c=H(b),d=J(c);M(c);T(d,0,null);T(d,1,null);c=null==a?null:null!=a&&(a.s&4||u===a.Lb)?a.$(null):(null!=a?a.s&4||u===a.Lb||(a.s?0:y(xa,a)):y(xa,a))?ya(a):null;for(a=null;;){d=a;b=H(b);a=J(b);var e=M(b),f=a;a=T(f,0,null);b=T(f,1,null);if(w(f))if(a instanceof G||a instanceof Hb)if(w(d))if(Pb.j(d,Vc(a)))c=qc.o(c,sf(a),b),a=d,b=e;else return null;else if(d=Vc(a),w(d))c=qc.o(c,sf(a),b),a=d,b=e;else return null;else return null;else return new W(null,2,5,Y,[d,c],null)}}else return null}
function uf(a,b,c,d,e){return gf(d,function(f,h,k){var l=Pa(f);c.o?c.o(l,h,k):c.call(null,l,h,k);E(h," ");f=Qa(f);return c.o?c.o(f,h,k):c.call(null,f,h,k)},[B.i(a),"{"].join(""),", ","}",e,H(b))}function of(a,b,c,d){var e=zc(a)?tf(a):null,f=T(e,0,null);e=T(e,1,null);return w(f)?uf(["#:",B.i(f)].join(""),e,b,c,d):uf(null,a,b,c,d)}Mb.prototype.ca=u;Mb.prototype.S=function(a,b,c){return gf(b,Z,"("," ",")",c,this)};Yc.prototype.ca=u;Yc.prototype.S=function(a,b,c){return gf(b,Z,"("," ",")",c,this)};
he.prototype.ca=u;he.prototype.S=function(a,b,c){return gf(b,Z,"["," ","]",c,this)};Qe.prototype.ca=u;Qe.prototype.S=function(a,b,c){return gf(b,Z,"("," ",")",c,this)};ie.prototype.ca=u;ie.prototype.S=function(a,b,c){return gf(b,Z,"("," ",")",c,this)};Sb.prototype.ca=u;Sb.prototype.S=function(a,b,c){return gf(b,Z,"("," ",")",c,this)};Yd.prototype.ca=u;Yd.prototype.S=function(a,b,c){return gf(b,Z,"("," ",")",c,this)};Uc.prototype.ca=u;Uc.prototype.S=function(a,b,c){return gf(b,Z,"("," ",")",c,this)};
cf.prototype.ca=u;cf.prototype.S=function(a,b,c){return gf(b,Z,"("," ",")",c,this)};Ve.prototype.ca=u;Ve.prototype.S=function(a,b,c){return of(this,Z,b,c)};Se.prototype.ca=u;Se.prototype.S=function(a,b,c){return gf(b,Z,"("," ",")",c,this)};bd.prototype.ca=u;bd.prototype.S=function(a,b,c){return gf(b,Z,"("," ",")",c,this)};vd.prototype.ca=u;vd.prototype.S=function(a,b,c){E(b,"#object[cljs.core.Atom ");Z(new v(null,1,[vf,this.state],null),b,c);return E(b,"]")};$e.prototype.ca=u;
$e.prototype.S=function(a,b,c){return gf(b,Z,"("," ",")",c,this)};zd.prototype.ca=u;zd.prototype.S=function(a,b,c){return gf(b,Z,"("," ",")",c,this)};W.prototype.ca=u;W.prototype.S=function(a,b,c){return gf(b,Z,"["," ","]",c,this)};Tc.prototype.ca=u;Tc.prototype.S=function(a,b){return E(b,"()")};v.prototype.ca=u;v.prototype.S=function(a,b,c){return of(this,Z,b,c)};df.prototype.ca=u;df.prototype.S=function(a,b,c){return gf(b,Z,"("," ",")",c,this)};Ze.prototype.ca=u;
Ze.prototype.S=function(a,b,c){return gf(b,Z,"("," ",")",c,this)};oc.prototype.ca=u;oc.prototype.S=function(a,b,c){return gf(b,Z,"("," ",")",c,this)};function wf(){}function xf(a){if(null!=a&&null!=a.Nb)a=a.Nb(a);else{var b=xf[t(null==a?null:a)];if(null!=b)a=b.i?b.i(a):b.call(null,a);else if(b=xf._,null!=b)a=b.i?b.i(a):b.call(null,a);else throw A("IEncodeJS.-clj-\x3ejs",a);}return a}
function yf(a,b){return(null!=a?u===a.Mb||(a.Eb?0:y(wf,a)):y(wf,a))?xf(a):"string"===typeof a||"number"===typeof a||a instanceof G||a instanceof Hb?b.i?b.i(a):b.call(null,a):rf(lc([a]))}var zf=function zf(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return zf.I(arguments[0],1<c.length?new Mb(c.slice(1),0,null):null)};
zf.I=function(a,b){b=qd(b);var c=Jb(b,Af,Xc),d=function h(f){if(null==f)return null;if(null!=f?u===f.Mb||(f.Eb?0:y(wf,f)):y(wf,f))return xf(f);if(f instanceof G)return c.i?c.i(f):c.call(null,f);if(f instanceof Hb)return B.i(f);if(zc(f)){var k={};f=H(f);for(var l=null,m=0,n=0;;)if(n<m){var p=l.O(null,n),q=T(p,0,null),r=T(p,1,null);p=k;q=yf(q,d);r=h(r);p[q]=r;n+=1}else if(f=H(f))Cc(f)?(m=ob(f),f=pb(f),l=m,m=Q(m)):(l=J(f),m=T(l,0,null),n=T(l,1,null),l=k,m=yf(m,d),n=h(n),l[m]=n,f=M(f),l=null,m=0),n=0;
else break;return k}if(null==f?0:null!=f?f.s&8||u===f.jc||(f.s?0:y(za,f)):y(za,f)){k=[];f=H(yd.j(h,f));l=null;for(n=m=0;;)if(n<m)p=l.O(null,n),k.push(p),n+=1;else if(f=H(f))l=f,Cc(l)?(f=ob(l),n=pb(l),l=f,m=Q(f),f=n):(f=J(l),k.push(f),f=M(l),l=null,m=0),n=0;else break;return k}return f};return d(a)};zf.Y=1;zf.V=function(a){var b=J(a);a=M(a);return this.I(b,a)};function Bf(){var a=new W(null,2,5,Y,[!0,!1],null);return hc(a,Math.floor(Math.random()*Q(a)))};var ma=new G(null,"meta","meta",1499536964),oa=new G(null,"print-length","print-length",1931866356),Cf=new G(null,"size","size",1098693007),Df=new G(null,"rect","rect",-108902628),Ef=new G(null,"t-rex","t-rex",886306640),na=new G(null,"dup","dup",556298533),Ff=new G(null,"win","win",-1624642689),la=new G(null,"readably","readably",1129599760),Gf=new G(null,"main","main",-2117802661),Hf=new G(null,"body","body",-2049205669),If=new G(null,"width","width",-384071477),Jf=new G(null,"layer","layer",-1601820589),
qf=new G(null,"fallback-impl","fallback-impl",-1501286995),Kf=new G(null,"player","player",-97687400),Lf=new G(null,"area","area",472007256),Mf=new G(null,"tag","tag",-1290361223),Nf=new G(null,"normal-color","normal-color",1084002117),Af=new G(null,"keyword-fn","keyword-fn",-64566675),Of=new G(null,"hover-color","hover-color",663962326),Pf=new G(null,"speed","speed",1257663751),Qf=new G(null,"init-fn","init-fn",777257971),Rf=new G(null,"start-button","start-button",-922527827),Sf=new G(null,"params",
"params",710516235),Tf=new G(null,"score","score",-1963588780),Uf=new G(null,"color","color",1011675173),Vf=new G(null,"apple","apple",-2146789868),Wf=new G(null,"start","start",-355208981),vf=new G(null,"val","val",128701612),Xf=new G(null,"sprite","sprite",172516848),Yf=new G(null,"scene-init","scene-init",-1463319945),ja=new G(null,"flush-on-newline","flush-on-newline",-151457939),Zf=new G(null,"plugins","plugins",1900073717),$f=new G(null,"clearColor","clearColor",213884569),ag=new G(null,"cam-ignore",
"cam-ignore",-1380783237),bg=new G(null,"objects","objects",2099713734),cg=new G(null,"height","height",1025178622),dg=new G(null,"start-text","start-text",-1619511931),eg=new G(null,"global","global",93595047),fg=new G(null,"solid?","solid?",-976264752),gg=new G(null,"gravity","gravity",-1815198225),hg=new G(null,"sprites","sprites",-1835833922),ig=new G(null,"obj-id","obj-id",1871733713),jg=new G(null,"scale","scale",-230427353),kg=new G(null,"scenes","scenes",-425219404),lg=new G(null,"fullscreen",
"fullscreen",-4371054),hf=new G(null,"more-marker","more-marker",-14717935),mg=new G(null,"debug","debug",-1608172596),ng=new G(null,"pos","pos",-864607220),og=new G(null,"id","id",-1388402092),pg=new G(null,"layers","layers",1944875032),pf=new G(null,"alt-impl","alt-impl",670969595),qg=new G(null,"play","play",-580418022),rg=new G(null,"text","text",-1790561697),sg=new G(null,"game-over","game-over",-607322695),tg=new G(null,"jumpForce","jumpForce",1496881882),ug=new G(null,"origin","origin",1037372088);var vg={},wg={},xg=[];function yg(a,b){var c=wg[a];if(void 0!==c)return c;try{xg.push(a);var d=vg[a],e=shadow$provide[a];if(void 0===d){if(void 0===e)throw"Module not provided: "+a;d={exports:{}};vg[a]=d}if(e){delete shadow$provide[a];try{e.call(d,aa,yg,d,d.exports)}catch(h){throw console.warn("shadow-cljs - failed to load",a),console.error(h),h;}if(b){var f=b.globals;if(f)for(a=0;a<f.length;a++)window[f[a]]=d.exports}}}finally{xg.pop()}return d.exports}yg.cache={};yg.resolve=function(a){return a};
yg.exportCopy=function(a,b){let c={};a=a.exports;for(let d in b)"default"==d||d in a||d in c||(c[d]={enumerable:!0,get:function(){return b[d]}});Object.defineProperties(a,c)};yg.esmDefault=function(a){return a&&a.__esModule?a:{"default":a}};yg.dynamic=function(a){return Promise.resolve().then(function(){return yg(a)})};yg(0,{});var zg=Error();var U=new vd(null),Ag=new vd(rd);function Bg(a){w(a)&&D(U).loadRoot(a)}function Cg(a,b,c){D(U).loadAseprite(a,b,c)}function Dg(a,b){D(U).loadSprite(a,b)}
var Eg=function Eg(a){if(Bc(a)){var c=T(a,0,null);a=T(a,1,null);return D(U).scale(c,a)}return tc(a)?(c=D(U),a=a.i?a.i(c):a.call(null,c),Eg.i?Eg.i(a):Eg.call(null,a)):D(U).scale(a)},Fg=function Fg(a){if(tc(a)){var c=D(U);a=a.i?a.i(c):a.call(null,c);return Fg.i?Fg.i(a):Fg.call(null,a)}c=T(a,0,null);a=T(a,1,null);return D(U).pos(c,a)},Gg=function Gg(a){if(tc(a)){var c=D(U);a=a.i?a.i(c):a.call(null,c);return Gg.i?Gg.i(a):Gg.call(null,a)}c=T(a,0,null);a=T(a,1,null);return D(U).rect(c,a)};
function Hg(a,b){return D(U).vec2(a,b)}function Ig(a,b){D(U).uc(Bc(a)?zf(a):a,b)}function Jg(a){return D(U).destroy(a)}function Kg(a,b){w(a)?D(U).action(a,ud(b)):D(U).action(ud(b))}function Lg(a){return D(U).go(Xc(a))}
function Mg(a){if(w(a)){var b=D(U).color(function(){try{if(Bc(a)&&4===Q(a)){var c=hc(a,0),d=hc(a,1),e=hc(a,2),f=hc(a,3);return D(U).yc(c,d,e,f)}throw zg;}catch(h){if(h instanceof Error)if(f=h,f===zg)try{if(Bc(a)&&3===Q(a))return c=hc(a,0),d=hc(a,1),e=hc(a,2),D(U).rgb(c,d,e);throw zg;}catch(k){if(k instanceof Error){c=k;if(c===zg)return zf(a);throw c;}throw k;}else throw f;else throw h;}}());console.log(b);return b}return null}
function Ng(a){var b=qd(a);a=F(b,Mf);var c=F(b,qg),d=F(b,Hf),e=F(b,Df),f=F(b,rg),h=F(b,Uf),k=F(b,jg),l=F(b,Sf),m=F(b,ng),n=F(b,fg),p=F(b,Xf),q=F(b,Jf),r=F(b,Lf),x=F(b,ug);b=Ad;p=w(p)?zc(p)?D(U).sprite(og.i(p),zf(sc.j(p,og))):D(U).sprite(Xc(p)):null;if(w(f)){var z=qd(f);f=F(z,rg);z=F(z,Cf);f=D(U).text(f,z)}else f=null;k=w(k)?Eg(k):null;q=w(q)?D(U).wc(Xc(q)):null;x=w(x)?D(U).origin(Bc(x)?Hg(F(x,0),F(x,1)):Xc(x)):null;m=w(m)?Fg(m):null;d=w(d)?D(U).body(zf(d)):null;e=w(e)?Gg(e):null;w(r)?(z=T(r,0,null),
r=T(r,1,null),r=D(U).area(Hg(J(z),J(M(z))),Hg(J(r),J(M(r))))):r=null;return zf(Ud(b(Pc,new W(null,14,5,Y,[p,f,k,q,x,m,d,e,r,w(n)?D(U).zc():null,Mg(h),w(l)?zf(l):null,w(c)?D(U).play(Xc(c)):null,a],null))))}function Og(a){return D(U).add(Ng(a))}
function Pg(){var a=new W(null,7,5,Y," B                                             a  t              ;0                                              \x3d              ;                                                              ;                    a    a      a             a                   ;                                                                                       a          aaaaaaa    aaaa      aa  a a a a aa  ;              t         B    a    t   a      B               a                    t      t               t   t                 t         t ;\x3d     \x3d    \x3d    \x3d    \x3d     \x3d      \x3d     \x3d        \x3d     \x3d    \x3d         \x3d          \x3d      \x3d     \x3d      \x3d        \x3d       \x3d     \x3d     \x3d    \x3d   \x3d".split(";"),null),
b=new v(null,6,[If,11,cg,11,ng,Hg(0,0),"t",new v(null,3,[Jf,"game",ug,new W(null,2,5,Y,[0,.75],null),Xf,"tree"],null),"\x3d",new v(null,4,[Jf,"game",Xf,"ground1",ug,"topleft",fg,!0],null),"0",new v(null,4,[Jf,"game",Xf,"ground1",ug,"topleft",fg,!0],null)],null);return D(U).addLevel(zf(a),zf(Bd(rd,yd.j(function(c){var d=T(c,0,null);c=T(c,1,null);return"string"===typeof d&&zc(c)?new W(null,2,5,Y,[d,Ng(c)],null):new W(null,2,5,Y,[d,c],null)},b))))}
function Qg(a,b){var c=qd(b),d=F(c,pg),e=F(c,ag),f=F(c,bg),h=F(c,gg);b=F(c,Qf);c=F(c,Yf);if(w(d)){var k=T(d,0,null);d=T(d,1,null);D(U).xc(zf(k),d)}w(e)&&D(U).hc(zf(e));w(h)&&D(U).gravity(h);w(c)&&(e=D(U),c.i?c.i(e):c.call(null,e));f=H(f);e=null;for(c=h=0;;)if(c<h)d=e.O(null,c),d=k=qd(d),k=F(k,ig),d=Og(d),w(a)&&xd.G(Ag,Cd,new W(null,2,5,Y,[a,k],null),d),c+=1;else if(f=H(f))Cc(f)?(h=ob(f),f=pb(f),e=h,h=Q(h)):(e=J(f),e=h=qd(e),h=F(h,ig),e=Og(e),w(a)&&xd.G(Ag,Cd,new W(null,2,5,Y,[a,h],null),e),f=M(f),
e=null,h=0),c=0;else break;return w(b)?(f=D(U),a=F(D(Ag),a),b.j?b.j(f,a):b.call(null,f,a)):null};var Rg=new v(null,6,[pg,new W(null,2,5,Y,[new W(null,3,5,Y,["bg","game","ui"],null),"game"],null),ag,new W(null,2,5,Y,["ui","bg"],null),gg,1E3,bg,new W(null,5,5,Y,[new v(null,4,[Xf,"bg",jg,function(a){return new W(null,2,5,Y,[a.width()/512,a.height()/303],null)},Jf,"bg",ug,"topleft"],null),new v(null,4,[Jf,"ui",ng,new W(null,2,5,Y,[8,6],null),Xf,"apple",jg,.8],null),new v(null,4,[ig,Tf,rg,new v(null,2,[rg,"0",Cf,12],null),Jf,"ui",ng,new W(null,2,5,Y,[25,9],null)],null),new v(null,4,[Df,function(a){return new W(null,
2,5,Y,[a.width(),20],null)},fg,!0,Uf,new W(null,3,5,Y,[68,74,1],null),ng,function(a){return new W(null,2,5,Y,[0,80*a.height()/100],null)}],null),Xe([jg,Sf,ng,Xf,ig,Jf,Lf,ug,Mf,Hf],[.3,new v(null,1,[Pf,150],null),new W(null,2,5,Y,[100,100],null),"pony",Kf,"game",new W(null,2,5,Y,[new W(null,2,5,Y,[-17,-39],null),new W(null,2,5,Y,[40,44],null)],null),"center","pony",new v(null,1,[tg,330],null)])],null),Yf,function(){function a(f,h){return w(h)?(h.move(-150,0),h.pos.x<-1*f.width()/2?f.destroy(h):null):
null}Kg("barrel",a);Kg("tree",a);Kg("grass",a);Kg("apple",a);for(var b=H(ff()),c=null,d=0,e=0;;)if(e<d)c.O(null,e),e+=1;else if(b=H(b))c=b,Cc(c)?(b=ob(c),e=pb(c),c=b,d=Q(b),b=e):(J(c),b=M(c),c=null,d=0),e=0;else break;return D(U).loop(1,function(){w(Bf())&&Og(new v(null,6,[ng,function(f){return new W(null,2,5,Y,[D(U).width(),80*f.height()/100],null)},Xf,"barrel",fg,!0,Jf,"game",Mf,"barrel",ug,"bot"],null));w(Bf())&&Og(new v(null,5,[ng,function(f){return new W(null,2,5,Y,[D(U).width()+100,81*f.height()/
100],null)},Xf,"tree",Jf,"bg",Mf,"tree",ug,"bot"],null));return Og(new v(null,5,[ng,function(f){return new W(null,2,5,Y,[D(U).width()+50,74*f.height()/100],null)},Xf,Vf,Jf,"game",jg,.6,Mf,"apple"],null))})},Qf,function(a,b){Kg(null,function(d){return d.camPos(Hg(d.width()/2,d.height()/2))});var c=Kf.i(b);return w(c)?(c.play("move"),c.Fb("apple",function(d){if(w(d)){var e=Tf.i(b);w(e)&&(e.text=Tf.i(xd.G(Ag,Dd,Tf,Yb)));return Jg(d)}return null}),c.Fb("barrel",function(d){return w(d)?Lg("game-over"):
null}),a.qb(["up","space"],function(){return w(c.grounded())?(c.jump(c.jumpForce),c.play("jump")):null}),c.on("grounded",function(){return c.play("move")}),c.action(function(){return a.camPos(c.pos)})):null}],null);var Sg=new v(null,6,[pg,new W(null,2,5,Y,[new W(null,3,5,Y,["bg","game","ui"],null),"game"],null),ag,new W(null,2,5,Y,["ui","bg"],null),gg,1200,bg,new W(null,4,5,Y,[new v(null,4,[Xf,"bg",jg,function(a){return[a.width()/512,a.height()/303]},Jf,"bg",ug,"topleft"],null),new v(null,4,[Jf,"ui",ng,new W(null,2,5,Y,[8,6],null),Xf,"apple",jg,.8],null),new v(null,4,[ig,Tf,rg,new v(null,2,[rg,"0",Cf,12],null),Jf,"ui",ng,new W(null,2,5,Y,[25,9],null)],null),Xe([jg,Sf,ng,Xf,ig,Jf,Lf,ug,Hf],[function(){return.3},
new v(null,1,[Pf,100],null),new W(null,2,5,Y,[100,0],null),"pony",Kf,"game",new W(null,2,5,Y,[new W(null,2,5,Y,[-17,-39],null),new W(null,2,5,Y,[40,44],null)],null),"center",new v(null,1,[tg,350],null)])],null),Yf,function(){return Pg()},Qf,function(a,b){var c=Kf.i(b);return w(c)?(c.Fb("apple",function(d){if(w(d)){var e=Jb(b,Tf,0);w(e)&&(e.text=Tf.i(xd.G(Ag,Dd,Tf,Yb)),Pb.j(Tf.i(D(b)),28)&&Lg("win"));return Jg(d)}return null}),c.action(function(){return c.pos.y>=D(U).height()?D(U).go("game-over"):
null}),Ig(new W(null,2,5,Y,["left","right"],null),function(){var d=c.grounded();d=w(d)?!Pb.j(c.tc(),"move"):d;return w(d)?c.play("move"):null}),Ig("left",function(){c.flipX(-1);return c.move(-1*c.speed,0)}),Ig("right",function(){c.flipX(1);return c.move(c.speed,0)}),D(U).vc(["left","right"],function(){var d;if(d=qa(D(U).bc("right")))d=(d=qa(D(U).bc("left")))?c.grounded():d;return w(d)?c.play("idle"):null}),D(U).qb(["up","space"],function(){return w(c.grounded())?(c.jump(c.jumpForce),c.play("jump")):
null}),c.on("grounded",function(){return c.play("idle")}),c.action(function(){var d=c.pos;return D(U).camPos(d)})):null}],null);function Tg(){console.log("Starting game from button or key press");wd(Ag,rd);return Lg(Gf)}
var Ug=new v(null,6,[pg,new W(null,2,5,Y,[new W(null,2,5,Y,["bg","ui"],null),"ui"],null),ag,new W(null,2,5,Y,["ui","bg"],null),gg,0,bg,new W(null,11,5,Y,[new v(null,5,[Xf,"bg",jg,function(a){return new W(null,2,5,Y,[a.width()/512,a.height()/303],null)},Jf,"bg",ug,"topleft",Uf,new W(null,4,5,Y,[100,0,150,1],null)],null),new v(null,4,[Df,new W(null,2,5,Y,[800,200],null),ng,function(a){return new W(null,2,5,Y,[a.width()/2,a.height()/3],null)},ug,"center",Uf,new W(null,4,5,Y,[50,0,80,1],null)],null),
new v(null,4,[rg,new v(null,2,[rg,"PONY ADVENTURE",Cf,15],null),ng,function(a){return new W(null,2,5,Y,[a.width()/2,a.height()/3],null)},ug,"center",Uf,new W(null,4,5,Y,[255,255,255,1],null)],null),new v(null,5,[Xf,"pony",Jf,"ui",ng,function(a){return new W(null,2,5,Y,[a.width()/2,a.height()/3+70],null)},ug,"center",jg,.6],null),new v(null,5,[Xf,"apple",Jf,"ui",ng,function(a){return new W(null,2,5,Y,[a.width()/2-120,a.height()/3+70],null)},ug,"center",jg,1],null),new v(null,5,[Xf,"apple",Jf,"ui",
ng,function(a){return new W(null,2,5,Y,[a.width()/2+120,a.height()/3+70],null)},ug,"center",jg,1],null),new v(null,7,[ig,Rf,Df,new W(null,2,5,Y,[300,60],null),ng,function(a){return new W(null,2,5,Y,[a.width()/2,a.height()/3+100],null)},ug,"center",Uf,new W(null,4,5,Y,[100,100,0,1],null),Lf,new W(null,2,5,Y,[new W(null,2,5,Y,[150,30],null),new W(null,2,5,Y,[150,30],null)],null),Sf,new v(null,2,[Nf,new W(null,4,5,Y,[100,100,0,1],null),Of,new W(null,4,5,Y,[150,150,0,1],null)],null)],null),new v(null,
4,[Df,new W(null,2,5,Y,[310,70],null),ng,function(a){return new W(null,2,5,Y,[a.width()/2,a.height()/3+100],null)},ug,"center",Uf,new W(null,4,5,Y,[180,180,0,.5],null)],null),new v(null,5,[ig,dg,rg,new v(null,2,[rg,"START GAME",Cf,24],null),ng,function(a){return new W(null,2,5,Y,[a.width()/2,a.height()/3+100],null)},ug,"center",Uf,new W(null,4,5,Y,[255,255,255,1],null)],null),new v(null,4,[rg,new v(null,2,[rg,"or press SPACE key",Cf,14],null),ng,function(a){return new W(null,2,5,Y,[a.width()/2,a.height()/
3+140],null)},ug,"center",Uf,new W(null,4,5,Y,[200,200,200,1],null)],null),new v(null,4,[rg,new v(null,2,[rg,"Controls: Arrow keys to move, SPACE to jump",Cf,14],null),ng,function(a){return new W(null,2,5,Y,[a.width()/2,a.height()/3+120],null)},ug,"center",Uf,new W(null,4,5,Y,[200,200,200,1],null)],null)],null),Yf,function(){return console.log("Start scene initialized!")},Qf,function(a,b){console.log("Start scene loaded!");a.qb(["space"],Tg);a=Rf.i(b);return w(a)?console.log(null==a?null:a.constructor,
a):null}],null);var Vg=new W(null,1,5,Y,[Wf],null);console.log("Initializing game with first level:",rf(lc([Vg])));
(function(a){var b=qd(a),c=F(b,Sf),d=F(b,hg),e=F(b,kg);wd(U,kaboom(zf(c)));for(var f=H(d),h=null,k=0,l=0;;)if(l<k){var m=h.O(null,l);try{if(Bc(m)&&3===Q(m)){var n=hc(m,0),p=hc(m,1),q=hc(m,2);Cg(n,p,q)}else throw zg;}catch(ka){if(ka instanceof Error){var r=ka;if(r===zg)try{if(Bc(m)&&2===Q(m)){var x=hc(m,0),z=hc(m,1);Dg(x,z)}else throw zg;}catch(Ja){if(Ja instanceof Error)if(r=Ja,r===zg)Bg(m);else throw r;else throw Ja;}else throw r;}else throw ka;}l+=1}else if(f=H(f)){if(Cc(f))k=ob(f),f=pb(f),h=k,
k=Q(k);else{h=J(f);try{if(Bc(h)&&3===Q(h)){var I=hc(h,0),N=hc(h,1),P=hc(h,2);Cg(I,N,P)}else throw zg;}catch(ka){if(ka instanceof Error)if(k=ka,k===zg)try{if(Bc(h)&&2===Q(h)){var V=hc(h,0),X=hc(h,1);Dg(V,X)}else throw zg;}catch(Ja){if(Ja instanceof Error)if(k=Ja,k===zg)Bg(h);else throw k;else throw Ja;}else throw k;else throw ka;}f=M(f);h=null;k=0}l=0}else break;n=H(e);p=null;for(x=q=0;;)if(x<q){P=p.O(null,x);V=T(P,0,null);X=T(P,1,null);z=D(U);I=z.scene;N=Xc(V);if(zc(X))P=function(ka,Ja,qe,re,se,Tb,
ab){return function(){return Qg(Tb,ab)}}(n,p,q,x,P,V,X,a,b,c,d,e);else if(tc(X))P=function(ka,Ja,qe,re,se,Tb,ab){return function(Rc){return Qg(Tb,ab.i?ab.i(Rc):ab.call(null,Rc))}}(n,p,q,x,P,V,X,a,b,c,d,e);else throw Error("something went wrong...");I.call(z,N,P);x+=1}else if(V=H(n)){z=V;if(Cc(z))n=ob(z),x=pb(z),p=n,q=Q(n),n=x;else{X=J(z);f=T(X,0,null);h=T(X,1,null);I=D(U);N=I.scene;P=Xc(f);if(zc(h))n=function(ka,Ja,qe,re,se,Tb,ab){return function(){return Qg(Tb,ab)}}(n,p,q,x,X,f,h,z,V,a,b,c,d,e);
else if(tc(h))n=function(ka,Ja,qe,re,se,Tb,ab){return function(Rc){return Qg(Tb,ab.i?ab.i(Rc):ab.call(null,Rc))}}(n,p,q,x,X,f,h,z,V,a,b,c,d,e);else throw Error("something went wrong...");N.call(I,P,n);n=M(z);p=null;q=0}x=0}else break;return D(U)})(new v(null,3,[Sf,new v(null,6,[eg,!0,lg,!0,jg,3,mg,!1,Zf,new W(null,1,5,Y,[asepritePlugin],null),$f,new W(null,4,5,Y,[0,0,0,1],null)],null),hg,new W(null,8,5,Y,["resource/",new W(null,3,5,Y,["pony","applejack.png","applejack.json"],null),new W(null,2,5,
Y,["barrel","barrel.png"],null),new W(null,2,5,Y,["ground1","ground1.png"],null),new W(null,2,5,Y,["tree","tree1.png"],null),new W(null,2,5,Y,["apple","apple.png"],null),new W(null,2,5,Y,["grass","grass.png"],null),new W(null,2,5,Y,["bg","single_background.png"],null)],null),kg,new v(null,5,[Wf,Ug,Ef,Rg,Gf,Sg,sg,new v(null,2,[bg,new W(null,2,5,Y,[new v(null,3,[rg,new v(null,2,[rg,"Game over",Cf,34],null),ng,function(a){return new W(null,2,5,Y,[a.width()/2,a.height()/2],null)},ug,"center"],null),new v(null,
3,[rg,new v(null,2,[rg,"press space to restart...",Cf,8],null),ug,"center",ng,function(a){return new W(null,2,5,Y,[a.width()/2,a.height()/2+30],null)}],null)],null),Qf,function(a){return a.qb(["space"],function(){wd(Ag,rd);return Lg(Wf)})}],null),Ff,new v(null,2,[bg,new W(null,2,5,Y,[new v(null,3,[rg,new v(null,2,[rg,"You win!",Cf,34],null),ng,function(a){return new W(null,2,5,Y,[a.width()/2,a.height()/2],null)},ug,"center"],null),new v(null,3,[rg,new v(null,2,[rg,"press space to return to menu...",
Cf,8],null),ug,"center",ng,function(a){return new W(null,2,5,Y,[a.width()/2,a.height()/2+30],null)}],null)],null),Qf,function(a){return a.qb(["space"],function(){wd(Ag,rd);return Lg(Wf)})}],null)],null)],null));console.log("Starting game with scene:",rf(lc([Vg])));var Wg=J(Vg);console.log("Using scene-id:",rf(lc([Wg])));console.log("k-start called with id:",Xc(Wg));D(U).start(Xc(Wg));console.log("Game started!");
}).call(this);